Steps to review and implement (Phase 011 - Tier 10: Billing, HR, Facilities, Biomedical Engineering, Reporting, Communications, Subscriptions, Integrations, Compliance):
- **11.10.1** Billing home - `(main)/billing`
- **11.10.2** Invoices - `(main)/billing/invoices` - backend `invoice`
- **11.10.3** Invoice items - `(main)/billing/invoice-items` - backend `invoice-item`
- **11.10.4** Payments - `(main)/billing/payments` - backend `payment`
- **11.10.5** Refunds - `(main)/billing/refunds` - backend `refund`
- **11.10.6** Pricing rules - `(main)/billing/pricing-rules` - backend `pricing-rule`
- **11.10.7** Coverage plans - `(main)/billing/coverage-plans` - backend `coverage-plan`
- **11.10.8** Insurance claims - `(main)/billing/insurance-claims` - backend `insurance-claim`
- **11.10.9** Pre-authorizations - `(main)/billing/pre-authorizations` - backend `pre-authorization`
- **11.10.10** Billing adjustments - `(main)/billing/billing-adjustments` - backend `billing-adjustment`
- **11.10.11** HR home - `(main)/hr`
- **11.10.12** Staff positions - `(main)/hr/staff-positions` - backend `staff-position`
- **11.10.13** Staff profiles - `(main)/hr/staff-profiles` - backend `staff-profile`
- **11.10.14** Staff assignments - `(main)/hr/staff-assignments` - backend `staff-assignment`
- **11.10.15** Staff leaves - `(main)/hr/staff-leaves` - backend `staff-leave`
- **11.10.16** Shifts - `(main)/hr/shifts` - backend `shift`
- **11.10.17** Shift assignments - `(main)/hr/shift-assignments` - backend `shift-assignment`
- **11.10.18** Shift swap requests - `(main)/hr/shift-swap-requests` - backend `shift-swap-request`
- **11.10.19** Nurse rosters - `(main)/hr/nurse-rosters` - backend `nurse-roster`
- **11.10.20** Shift templates - `(main)/hr/shift-templates` - backend `shift-template`
- **11.10.21** Roster day offs - `(main)/hr/roster-day-offs` - backend `roster-day-off`
- **11.10.22** Staff availabilities - `(main)/hr/staff-availabilities` - backend `staff-availability`
- **11.10.23** Payroll runs - `(main)/hr/payroll-runs` - backend `payroll-run`
- **11.10.24** Payroll items - `(main)/hr/payroll-items` - backend `payroll-item`
- **11.10.25** Housekeeping home - `(main)/housekeeping`
- **11.10.26** Housekeeping tasks - `(main)/housekeeping/housekeeping-tasks` - backend `housekeeping-task`
- **11.10.27** Housekeeping schedules - `(main)/housekeeping/housekeeping-schedules` - backend `housekeeping-schedule`
- **11.10.28** Maintenance requests - `(main)/housekeeping/maintenance-requests` - backend `maintenance-request`
- **11.10.29** Assets - `(main)/housekeeping/assets` - backend `asset`
- **11.10.30** Asset service logs - `(main)/housekeeping/asset-service-logs` - backend `asset-service-log`
- **11.10.31** Communications home - `(main)/communications`
- **11.10.32** Notifications - `(main)/communications/notifications` - backend `notification`
- **11.10.33** Notification deliveries - `(main)/communications/notification-deliveries` - backend `notification-delivery`
- **11.10.34** Conversations - `(main)/communications/conversations` - backend `conversation`
- **11.10.35** Messages - `(main)/communications/messages` - backend `message`
- **11.10.36** Templates - `(main)/communications/templates` - backend `template`
- **11.10.37** Template variables - `(main)/communications/template-variables` - backend `template-variable`
- **11.10.38** Reports home - `(main)/reports`
- **11.10.39** Report definitions - `(main)/reports/report-definitions` - backend `report-definition`
- **11.10.40** Report runs - `(main)/reports/report-runs` - backend `report-run`
- **11.10.41** Dashboard widgets - `(main)/reports/dashboard-widgets` - backend `dashboard-widget`
- **11.10.42** KPI snapshots - `(main)/reports/kpi-snapshots` - backend `kpi-snapshot`
- **11.10.43** Analytics events - `(main)/reports/analytics-events` - backend `analytics-event`
- **11.10.44** Subscriptions home - `(main)/subscriptions`
- **11.10.45** Subscription plans - `(main)/subscriptions/subscription-plans` - backend `subscription-plan`
- **11.10.46** Subscriptions - `(main)/subscriptions/subscriptions` - backend `subscription`
- **11.10.47** Subscription invoices - `(main)/subscriptions/subscription-invoices` - backend `subscription-invoice`
- **11.10.48** Modules - `(main)/subscriptions/modules` - backend `module`
- **11.10.49** Module subscriptions - `(main)/subscriptions/module-subscriptions` - backend `module-subscription`
- **11.10.50** Licenses - `(main)/subscriptions/licenses` - backend `license`
- **11.10.51** Compliance home - `(main)/compliance`
- **11.10.52** Audit logs - `(main)/compliance/audit-logs` - backend `audit-log`
- **11.10.53** PHI access logs - `(main)/compliance/phi-access-logs` - backend `phi-access-log`
- **11.10.54** Data processing logs - `(main)/compliance/data-processing-logs` - backend `data-processing-log`
- **11.10.55** Breach notifications - `(main)/compliance/breach-notifications` - backend `breach-notification`
- **11.10.56** System change logs - `(main)/compliance/system-change-logs` - backend `system-change-log`
- **11.10.57** Integrations home - `(main)/integrations`
- **11.10.58** Integrations - `(main)/integrations/integrations` - backend `integration`
- **11.10.59** Integration logs - `(main)/integrations/integration-logs` - backend `integration-log`
- **11.10.60** Webhook subscriptions - `(main)/integrations/webhook-subscriptions` - backend `webhook-subscription`
- **11.10.61** Biomedical home - `(main)/housekeeping/biomedical`
- **11.10.62** Equipment categories - `(main)/housekeeping/biomedical/equipment-categories` - backend `equipment-category`
- **11.10.63** Equipment registries - `(main)/housekeeping/biomedical/equipment-registries` - backend `equipment-registry`
- **11.10.64** Equipment location histories - `(main)/housekeeping/biomedical/equipment-location-histories` - backend `equipment-location-history`
- **11.10.65** Equipment disposal transfers - `(main)/housekeeping/biomedical/equipment-disposal-transfers` - backend `equipment-disposal-transfer`
- **11.10.66** Equipment maintenance plans - `(main)/housekeeping/biomedical/equipment-maintenance-plans` - backend `equipment-maintenance-plan`
- **11.10.67** Equipment work orders - `(main)/housekeeping/biomedical/equipment-work-orders` - backend `equipment-work-order`
- **11.10.68** Equipment calibration logs - `(main)/housekeeping/biomedical/equipment-calibration-logs` - backend `equipment-calibration-log`
- **11.10.69** Equipment safety test logs - `(main)/housekeeping/biomedical/equipment-safety-test-logs` - backend `equipment-safety-test-log`
- **11.10.70** Equipment downtime logs - `(main)/housekeeping/biomedical/equipment-downtime-logs` - backend `equipment-downtime-log`
- **11.10.71** Equipment incident reports - `(main)/housekeeping/biomedical/equipment-incident-reports` - backend `equipment-incident-report`
- **11.10.72** Equipment recall notices - `(main)/housekeeping/biomedical/equipment-recall-notices` - backend `equipment-recall-notice`
- **11.10.73** Equipment spare parts - `(main)/housekeeping/biomedical/equipment-spare-parts` - backend `equipment-spare-part`
- **11.10.74** Equipment warranty contracts - `(main)/housekeeping/biomedical/equipment-warranty-contracts` - backend `equipment-warranty-contract`
- **11.10.75** Equipment service providers - `(main)/housekeeping/biomedical/equipment-service-providers` - backend `equipment-service-provider`
- **11.10.76** Equipment utilization snapshots - `(main)/housekeeping/biomedical/equipment-utilization-snapshots` - backend `equipment-utilization-snapshot`

## Concrete Parity Checklist for `11.10.12` (`(main)/hr/staff-positions`)

Run this after `10.14.1` is complete.

- [ ] Create route files:
  - `src/app/(main)/hr/staff-positions/index.jsx`
  - `src/app/(main)/hr/staff-positions/create.jsx`
  - `src/app/(main)/hr/staff-positions/[id].jsx`
  - `src/app/(main)/hr/staff-positions/[id]/edit.jsx`
- [ ] Use generic resource wrappers with `resourceId="staff-positions"`:
  - list -> `ClinicalResourceListScreen`
  - create -> `ClinicalResourceFormScreen`
  - detail -> `ClinicalResourceDetailScreen`
  - edit -> `ClinicalResourceFormScreen`
- [ ] Confirm shared wiring:
  - `src/config/sideMenu.js` includes `/hr/staff-positions`
  - `src/i18n/locales/en.json` includes `main-nav.hr-staff-positions`
  - `src/platform/screens/clinical/ClinicalResourceConfigs.js` includes `staff-positions`
  - `src/platform/screens/clinical/useClinicalResourceCrud.js` maps `CLINICAL_RESOURCE_IDS.STAFF_POSITIONS`
- [ ] Update route coverage:
  - `src/__tests__/app/(main)/tier-10-routes.test.js` add `'staff-positions'` in `RESOURCES_WITH_EDIT.hr`
- [ ] Verify:
  - `npm run test -- "src/__tests__/app/(main)/tier-10-routes.test.js"`
  - `npm run test -- src/__tests__/platform/screens/clinical/clinicalResourceConfigs.test.js`
  - navigate `/hr/staff-positions`, `/hr/staff-positions/create`, `/hr/staff-positions/:id`, `/hr/staff-positions/:id/edit`

Specific implementation scope for this tier:
- Implement selected screen/route wiring and interactions for this tier only.
- Ensure end-to-end backend linkage for enabled actions and role-aware fallbacks when API contract or entitlement blocks an action.
- Apply route/action access control, accessibility semantics, and resilient loading/error/offline states.

Review and implement all missing and non-compliant aspects of this selected tier per:
- hms-frontend/dev-plan/P011_screens-routes.md

You must ensure 100% compliance with:
- All rules in hms-frontend/.cursor/rules/*
- hms-frontend/write-up.md
- Contracts must align with `hms-backend/dev-plan/P010_api_endpoints.mdc`.
- Mounted routes in `hms-backend/src/app/router.js` and selected module route files are source of truth.
- Use only mounted backend resources/actions from `hms-backend/src/app/router.js`; do not invent unsupported endpoints.
- If backend changes are required, comply fully with `hms-backend/.cursor/rules/*`.
- Actual repository architecture and conventions already in hms-frontend/src/**

Only implement what is required for this tier's selected step(s).

## Mobile UI Parity and Compact UX Contract (Mandatory)

For any selected step that touches UI (components, screens, layouts, route presentation, copy, interactions, or styling):
- Android and iOS must visually and behaviorally match mobile web for layout density, typography scale, component sizing, spacing, and interaction patterns.
- Use shared-first implementations by default. Platform-specific override files are allowed only for hard platform/accessibility constraints and must preserve parity with mobile web.
- Keep UI simple, modern, compact, stable, and fully responsive across phone, tablet, and web breakpoints.
- Keep user journeys chronological and obvious for first-time users: clear actions, short labels, and minimal friction.
- Prefer consolidating related actions on one screen when it reduces fragmentation and cognitive load.
- Auto-resolve and hide known context parameters (tenant, facility, branch, user, encounter, and similar context) unless user input is mandatory by contract or compliance.
- Do not show internal model IDs in UI. Display human-readable business IDs/labels from backend or domain data contracts.
- Keep navigation straightforward with stable route structure, stable nav items, and consistent placement of controls.
- Reuse shared platform components/patterns/tokens first; avoid ad-hoc one-off UI implementations.
- Add concise contextual help for critical decisions and keep instructional copy short and local to the action.
- Keep full compliance with i18n, accessibility, and theme-token rules while applying this contract.

---

## Total UI Component and Sub-Component Compliance Contract (Mandatory)

For any selected step that touches UI (components, screens, layouts, route presentation, copy, interactions, or styling):
- Review every impacted UI component and nested sub-component end-to-end, including conditional branches (tabs, modals, drawers, tables, cards, forms, field groups, action bars, empty/loading/error states).
- Assess each element for full compliance with this UX target: elegant, intuitive, modern, simple, self-explanatory, role-aware, minimal, quick to use, and chronologically organized.
- If any element is non-compliant, redesign it before completion (information hierarchy, interaction flow, copy, control placement, visual density, and component composition).
- Remove or merge redundant controls/sections to reduce clutter and shorten task time without hiding required clinical/business context.
- Ensure every primary workflow has clear chronological next actions and predictable back/forward handoffs.
- Enforce role-aware visibility and action readiness at component and sub-component level (not only at route level).
- Keep redesigned UI aligned with shared components/tokens and platform parity; avoid one-off visual patterns unless required by accessibility/compliance constraints.
- Document reviewed components, non-compliance findings, and redesign decisions in the final compliance report.
---
## Novice-First UX and Navigation Contract (Mandatory)

For any selected step that touches UI (components, screens, layouts, route presentation, copy, interactions, or styling):
- Design for first-time users with minimal or no prior training; every primary action must be obvious from context.
- Keep user journeys chronological and self-explanatory from start to completion; every next step must be clearly signposted.
- Make navigation between related screens easy and predictable with consistent placement, labels, and back/next patterns.
- Prefer progressive disclosure and role-focused context; show only what the current user needs to complete the current task.
- Pre-fill and auto-resolve known values from trusted context (tenant, facility, user, encounter, branch, etc.) and hide them unless confirmation or compliance visibility is required.
- Enforce strict role and permission visibility for routes, navigation items, widgets, fields, and actions.
- Do not surface unauthorized or irrelevant areas (for example, finance metrics for non-finance roles or registration flows for non-admin operational roles).
- Reuse predefined shared components and established design tokens before creating new UI patterns.
- Keep layouts space-efficient, lightweight, and performant; avoid visual clutter and long static instructions.
- Provide contextual in-app guidance with a help icon pattern; on hover/focus/press it must reveal a tooltip or modal that explains terms, fields, and decisions.
- Include concise guidance for domain sequencing where needed (for example, tenant vs facility and required creation order).
- Ensure terminology, labels, and helper text remain short, clear, and action-oriented across Android, iOS, and web.

---


## User-Friendly Errors and Recovery Contract (Mandatory)

For any selected step that touches UI (components, screens, layouts, route presentation, copy, interactions, or styling):
- Display errors in plain language that users can understand without technical training.
- Do not use ambiguous generic text such as "Something went wrong" or "Server error" without context.
- Prefer specific, user-centered messages (for example, "We could not load facility data right now").
- Provide immediate, actionable next steps in the UI (retry, check connection, refresh, confirm permissions, continue in read-only mode when appropriate).
- Distinguish user-correctable issues from system-side issues and tailor guidance accordingly.
- Map validation and business-rule failures to field-level or action-level messages near the relevant control.
- Keep sensitive internals out of UI messages (no stack traces, SQL/errors, secrets, or internal identifiers).
- Store technical diagnostics in logs and telemetry only; surface concise user-facing guidance in the screen.
- For persistent system errors, provide a support handoff path with a user-friendly incident reference and clear instruction to contact support if retries fail.
- Ensure all error/help text remains concise, localized, accessible, and role-appropriate.
- Use contextual help triggers (help icon / tooltip / modal) to clarify domain terms and required action order when confusion is likely.

## Interconnected Functionality Coordination Contract (Mandatory)

For any selected step that touches UI (components, screens, layouts, route presentation, copy, interactions, or styling):
- Treat related screens and features as one coordinated workflow, not isolated pages.
- Verify upstream and downstream dependencies so updates in one area correctly reflect in all linked areas.
- Keep identifiers, statuses, timestamps, ownership fields, and state transitions consistent across connected modules.
- Ensure actions in one screen (create/update/approve/cancel/assign/close) propagate clearly to dependent queues, summaries, detail views, and dashboards.
- Provide explicit cross-screen navigation handoffs (next step, related records, return path) where workflows span multiple modules.
- Align validation and business rules across interconnected forms to prevent contradictory outcomes between screens.
- Enforce role and permission coordination across linked flows so users only see and trigger actions they are authorized for end-to-end.
- Use shared domain components, hooks, and contracts to avoid duplicated logic and drift between connected features.
- Handle partial failure/offline scenarios with clear reconciliation behavior so linked records do not silently diverge.
- Include cross-functional test coverage for linked journeys, including success, validation, permission-denied, and recovery paths.
## Role-Based Visibility and Access Enforcement Contract (Mandatory)

For any selected step that touches auth, routing, navigation, data access, or UI:
- Users must never see or execute anything outside their role and permission scope.
- Ensure each role sees the routes, nav items, screens, sections, components, and actions required for their responsibilities; missing required access is a defect.
- Enforce access at multiple layers: menu item visibility, route/screen guards, section-level rendering, component-level rendering, and action/function-level handlers.
- Hide unauthorized menu items, tabs, widgets, buttons, fields, cards, and screen sections by default; do not expose privileged controls unless explicitly required by approved requirements.
- Block unauthorized function/action execution even when UI is bypassed (direct URL entry, deep links, state tampering, manual event triggering).
- Use a single source of truth for access checks across web, Android, and iOS to prevent behavior drift.
- Use canonical backend role names and permission contracts as defined by `hms-backend/.cursor/rules/index.mdc` and backend auth/rbac contracts.
- Provide deterministic denied-access UX (safe redirect, read-only fallback, or localized permission message) without leaking sensitive details.
- Add/update tests that verify protected and required role paths: menu visibility, required route availability, route guards, screen/section/component rendering, and denied function/action paths.

---

## Rule Loading Contract (Mandatory)

Before coding, read and apply:
- `hms-frontend/.cursor/rules/index.mdc` (entry point)
- `hms-frontend/.cursor/rules/core-principles.mdc`
- `hms-frontend/.cursor/rules/tech-stack.mdc`
- `hms-frontend/.cursor/rules/dependency-policy.mdc`
- `hms-frontend/.cursor/rules/project-structure.mdc`
- `hms-frontend/.cursor/rules/app-router.mdc`
- `hms-frontend/.cursor/rules/platform-ui.mdc`
- `hms-frontend/.cursor/rules/component-structure.mdc`
- `hms-frontend/.cursor/rules/theme-design.mdc`
- `hms-frontend/.cursor/rules/state-management.mdc`
- `hms-frontend/.cursor/rules/features-domain.mdc`
- `hms-frontend/.cursor/rules/services-integration.mdc`
- `hms-frontend/.cursor/rules/hooks-utils.mdc`
- `hms-frontend/.cursor/rules/offline-sync.mdc`
- `hms-frontend/.cursor/rules/security.mdc`
- `hms-frontend/.cursor/rules/i18n.mdc`
- `hms-frontend/.cursor/rules/accessibility.mdc`
- `hms-frontend/.cursor/rules/performance.mdc`
- `hms-frontend/.cursor/rules/errors-logging.mdc`
- `hms-frontend/.cursor/rules/debug.mdc`
- `hms-frontend/.cursor/rules/bootstrap-config.mdc`
- `hms-frontend/.cursor/rules/coding-conventions.mdc`
- `hms-frontend/.cursor/rules/testing.mdc`

---

## Tier Step Selection Contract (Mandatory)

- This file covers only the listed step IDs for Phase 011 Tier 10.
- If specific step IDs from this tier are selected, implement only those IDs.
- If the tier is selected as a whole, implement all listed step IDs in order.
- If shared prerequisite wiring is required, implement only the minimum required for this tier.
- Do NOT implement unselected sibling tiers or out-of-tier steps.

---

## Implementation Areas

Primary areas for this tier:
- `src/app/**` route files and group layouts for selected tier step(s)
- Selected `src/features/**`, `src/hooks/**`, and form components required by tier screens
- Tests under `src/__tests__/**` covering selected tier routes, actions, and edge states

---

## Tier Constraints (Mandatory)

- Do NOT implement steps from other tiers unless minimal prerequisite wiring is required.
- Do NOT call non-mounted backend endpoints or invent shortcut routes.
- Do NOT bypass route-level auth/role guards.

---

## Tier Gate Checklist

1. Implement/fix only selected step(s) within this tier.
2. Enforce i18n/accessibility/rules compliance.
3. Add/update tests and edge-path coverage for selected step(s).
4. Run relevant checks/tests and report results.
5. Verify no architecture boundary violations.
6. Verify no out-of-tier scope creep.
7. Complete and document a full UI component/sub-component compliance review for selected step(s), redesigning non-compliant UI where needed.

---

## Deliverables

Return ONLY:

1. Implementation files changed for selected step(s) in this tier.
2. Related exports/wiring updates required by selected step(s) only.
3. i18n locale key updates required by selected step(s).
4. Tests/check commands run and result summary.
5. A concise compliance report confirming selected step IDs, full UI component/sub-component review outcomes, redesign actions taken where needed, rule checks, backend/write-up alignment checks, and any justified out-of-scope deferrals.

Do NOT include files or logic outside this tier's selected step(s).
