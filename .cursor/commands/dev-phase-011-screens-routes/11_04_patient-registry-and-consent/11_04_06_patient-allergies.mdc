Step file for **11.4.6** - Care Context (Merged Workspace Surface).
Load `../00_shared-contracts.mdc` first.

## Step Metadata
- Step ID: `11.4.6`
- Primary route: `(main)/patients/patients/[id]?tab=care`
- Backend modules: `patient-allergy`, `patient-medical-history`
- Action mode: In-workspace merged CRUD + compatibility redirects.

## Owned Route Surface
- Workspace tab/panels:
  - `/patients/patients/[id]?tab=care&panel=allergies`
  - `/patients/patients/[id]?tab=care&panel=histories`
- Legacy compatibility redirects:
  - `src/app/(main)/patients/patient-allergies/**`
  - `src/app/(main)/patients/patient-medical-histories/**`

## Platform Screen Surface
- `src/platform/screens/patients/PatientWorkspaceScreen/**`
- `src/platform/screens/patients/components/**` (field help + inline guide)

## Test Surface
- `src/__tests__/app/(main)/patients-routes.test.js`
- `src/__tests__/platform/screens/patients/usePatientWorkspaceScreen.test.js`

## Implementation Granularity
- Implement allergies/histories as merged in-tab operations only.
- Do not re-introduce standalone care-context patient subresource screens.
- Keep role-guarded actions and entitlement-safe blocked UX.
- Keep clinical identity display human-readable in UI output.

## Completion Checklist
- [ ] Care tab supports merged CRUD for allergies and medical histories.
- [ ] Legacy care routes redirect correctly with and without patient context.
- [ ] Help icon and inline guide cover care fields.
- [ ] Tests cover redirect mapping and in-tab action behavior.

## Shared Contract Enforcement (Mandatory)
- This file inherits and must fully comply with ../00_shared-contracts.mdc.
- All mandatory contracts in ../00_shared-contracts.mdc are required for work executed from this prompt.
- ../00_shared-contracts.mdc has precedence over this file; if instructions conflict, the shared contract wins.
- A task is complete only when this file and every mandatory requirement in ../00_shared-contracts.mdc are satisfied.
