Steps to review and implement (Phase 010 - Tier 14: HR, Payroll & Staffing):
- **10.14.1** `staff-position`
- **10.14.2** `staff-profile`
- **10.14.3** `staff-assignment`
- **10.14.4** `staff-leave`
- **10.14.5** `shift`
- **10.14.6** `shift-assignment`
- **10.14.7** `shift-swap-request`
- **10.14.8** `payroll-run`
- **10.14.9** `payroll-item`
- **10.14.10** `nurse-roster` - (Nurses Time-table Generator: roster config, constraints, generated schedules - write-up sections 6.14, 7.9, and 20.3)
- **10.14.11** `shift-template`
- **10.14.12** `roster-day-off`
- **10.14.13** `staff-availability`

## Concrete Parity Checklist for `10.14.1` (`staff-position`)

Complete this checklist before moving to `10.14.2`.

- [ ] Create `src/features/staff-position/` files:
  - `staff-position.rules.js`
  - `staff-position.model.js`
  - `staff-position.api.js`
  - `staff-position.usecase.js`
  - `index.js`
- [ ] Add exports:
  - `src/features/index.js` -> `export * from './staff-position';`
  - `src/hooks/useStaffPosition.js`
  - `src/hooks/index.js` -> `export { default as useStaffPosition } from './useStaffPosition';`
- [ ] Add endpoint group:
  - `src/config/endpoints.js` -> `STAFF_POSITIONS` with `LIST/CREATE/GET/UPDATE/DELETE` at `/staff-positions`
- [ ] Wire resource configuration:
  - `src/platform/screens/clinical/ClinicalResourceConfigs.js`
    - `CLINICAL_RESOURCE_IDS.STAFF_POSITIONS = 'staff-positions'`
    - include in `HR_RESOURCE_LIST_ORDER` before `STAFF_PROFILES`
    - add config entry with route `/hr/staff-positions`
  - `src/platform/screens/clinical/useClinicalResourceCrud.js`
    - import/init/map `useStaffPosition`
- [ ] Wire nav and i18n:
  - `src/config/sideMenu.js` add `hr-staff-positions` (`/hr/staff-positions`)
  - `src/i18n/locales/en.json` add `main-nav.hr-staff-positions`
- [ ] Add tests:
  - `src/__tests__/features/staff-position/staff-position.rules.test.js`
  - `src/__tests__/features/staff-position/staff-position.model.test.js`
  - `src/__tests__/features/staff-position/staff-position.api.test.js`
  - `src/__tests__/features/staff-position/staff-position.usecase.test.js`
  - `src/__tests__/hooks/useStaffPosition.test.js`
  - update `src/__tests__/platform/screens/clinical/clinicalResourceConfigs.test.js`
  - update `src/__tests__/config/endpoints.test.js`
- [ ] Verify:
  - `npm run test -- src/__tests__/features/staff-position`
  - `npm run test -- src/__tests__/hooks/useStaffPosition.test.js`
  - `npm run test -- src/__tests__/platform/screens/clinical/clinicalResourceConfigs.test.js`
  - `npm run test -- src/__tests__/config/endpoints.test.js`
  - `rg -n "staff-position|staff-positions|STAFF_POSITIONS|useStaffPosition" src`

Specific implementation scope for this tier:
- Implement full feature-template files per selected module step(s): rules, model, api, usecase, optional events, and exports.
- Add/update optional store slice and `use<Feature>` hook only when required by selected module scope.
- Complete tests with required coverage gates for rules/models/api/usecase/slice/hook branches.

Review and implement all missing and non-compliant aspects of this selected tier per:
- hms-frontend/dev-plan/P010_core-features.md

You must ensure 100% compliance with:
- All rules in hms-frontend/.cursor/rules/*
- hms-frontend/write-up.md
- Module order must align with mounted backend modules in `hms-backend/src/app/router.js` (and with `hms-backend/dev-plan/P011_modules.mdc` where synchronized).
- Endpoint contracts must align with `hms-backend/dev-plan/P010_api_endpoints.mdc`.
- Mounted routes in `hms-backend/src/app/router.js` and module route files are source of truth.
- All Phase 10 modules listed in `P010_core-features.md` are mounted in backend snapshot `2026-02-16`; implement full CRUD-capable feature behavior where the API contract and RBAC allow it.
- If backend changes are required, comply fully with `hms-backend/.cursor/rules/*`.
- Actual repository architecture and conventions already in hms-frontend/src/**

Only implement what is required for this tier's selected step(s).

## Mobile UI Parity and Compact UX Contract (Mandatory)

For any selected step that touches UI (components, screens, layouts, route presentation, copy, interactions, or styling):
- Android and iOS must match mobile web UI for layout, spacing density, typography scale, component sizing, and interaction patterns.
- Use shared-first implementations by default. Only create .android or .ios overrides when required by hard platform constraints or accessibility requirements.
- When overrides are required, keep visual and interaction parity with mobile web.
- Prioritize simplicity and space economy: compact layouts, short labels, short helper text, and minimal non-essential copy.
- Add inline/in-app guidance for critical user actions using concise contextual hints and progressive disclosure.
- Avoid long instructional paragraphs in screens; guidance must be brief, actionable, and local to the current step.
- Keep full compliance with i18n, accessibility, and theme-token rules while applying this parity and compactness contract.

---

## Role-Based Visibility and Access Enforcement Contract (Mandatory)

For any selected step that touches auth, routing, navigation, data access, or UI:
- Users must never see or execute anything outside their role and permission scope.
- Enforce access at multiple layers: menu item visibility, route/screen guards, section-level rendering, component-level rendering, and action/function-level handlers.
- Hide unauthorized menu items, tabs, widgets, buttons, fields, cards, and screen sections by default; do not expose privileged controls unless explicitly required by approved requirements.
- Block unauthorized function/action execution even when UI is bypassed (direct URL entry, deep links, state tampering, manual event triggering).
- Use a single source of truth for access checks across web, Android, and iOS to prevent behavior drift.
- Provide deterministic denied-access UX (safe redirect, read-only fallback, or localized permission message) without leaking sensitive details.
- Add/update tests that verify all protected layers: menu visibility, route guards, screen/section/component rendering, and denied function/action paths.
---

## Rule Loading Contract (Mandatory)

Before coding, read and apply:
- `hms-frontend/.cursor/rules/index.mdc` (entry point)
- `hms-frontend/.cursor/rules/core-principles.mdc`
- `hms-frontend/.cursor/rules/tech-stack.mdc`
- `hms-frontend/.cursor/rules/dependency-policy.mdc`
- `hms-frontend/.cursor/rules/project-structure.mdc`
- `hms-frontend/.cursor/rules/app-router.mdc`
- `hms-frontend/.cursor/rules/platform-ui.mdc`
- `hms-frontend/.cursor/rules/component-structure.mdc`
- `hms-frontend/.cursor/rules/theme-design.mdc`
- `hms-frontend/.cursor/rules/state-management.mdc`
- `hms-frontend/.cursor/rules/features-domain.mdc`
- `hms-frontend/.cursor/rules/services-integration.mdc`
- `hms-frontend/.cursor/rules/hooks-utils.mdc`
- `hms-frontend/.cursor/rules/offline-sync.mdc`
- `hms-frontend/.cursor/rules/security.mdc`
- `hms-frontend/.cursor/rules/i18n.mdc`
- `hms-frontend/.cursor/rules/accessibility.mdc`
- `hms-frontend/.cursor/rules/performance.mdc`
- `hms-frontend/.cursor/rules/errors-logging.mdc`
- `hms-frontend/.cursor/rules/debug.mdc`
- `hms-frontend/.cursor/rules/bootstrap-config.mdc`
- `hms-frontend/.cursor/rules/coding-conventions.mdc`
- `hms-frontend/.cursor/rules/testing.mdc`

---

## Tier Step Selection Contract (Mandatory)

- This file covers only the listed step IDs for Phase 010 Tier 14.
- If specific step IDs from this tier are selected, implement only those IDs.
- If the tier is selected as a whole, implement all listed step IDs in order.
- If shared prerequisite wiring is required, implement only the minimum required for this tier.
- Do NOT implement unselected sibling tiers or out-of-tier steps.

---

## Implementation Areas

Primary areas for this tier:
- `src/features/<module>/**` for selected module step(s)
- `src/store/slices/<module>.slice.js` only when selected step requires global state
- `src/hooks/use<Feature>.js`, `src/features/index.js`, and tests for selected module step(s)

---

## Tier Constraints (Mandatory)

- Do NOT merge multiple module child steps into one implementation unit.
- Do NOT implement screen/route UI scope except minimal wiring strictly required by selected module step(s).
- Do NOT use endpoints that are not mounted in `hms-backend/src/app/router.js`.

---

## Tier Gate Checklist

1. Implement/fix only selected step(s) within this tier.
2. Enforce i18n/accessibility/rules compliance.
3. Add/update tests and edge-path coverage for selected step(s).
4. Run relevant checks/tests and report results.
5. Verify no architecture boundary violations.
6. Verify no out-of-tier scope creep.

---

## Deliverables

Return ONLY:

1. Implementation files changed for selected step(s) in this tier.
2. Related exports/wiring updates required by selected step(s) only.
3. i18n locale key updates required by selected step(s).
4. Tests/check commands run and result summary.
5. A concise compliance report confirming selected step IDs, rule checks, backend/write-up alignment checks, and any justified out-of-scope deferrals.

Do NOT include files or logic outside this tier's selected step(s).
