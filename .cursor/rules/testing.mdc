---
alwaysApply: true
---

# Testing Strategy

## Purpose
Define mandatory testing quality gates across all layers.
No feature is complete without tests.

## Test Location and Naming
- Tests live under `src/__tests__/` and mirror source ownership.
- Test files use `*.test.js` naming.

## Coverage Requirements
- Target 100% statements, branches, functions, and lines.
- Critical paths require explicit branch/error-path coverage.
- Coverage exceptions require clear justification.

## Mandatory Scope by Layer
- Platform UI: state variants, interactions, accessibility, platform overrides.
- Screens/routes: loading, empty, error, offline, navigation transitions.
- Hooks: state transitions, side effects, cleanup, error handling.
- Utilities: pure input/output behavior and edge-case branches.
- Features: rules, models, use-cases, orchestration error paths.
- Store: reducers, selectors, middleware, async flows, persistence.
- Services/security/offline/bootstrap/errors: behavior contracts and failure paths.

## Platform and Interaction Rules
- Test shared implementation first.
- Test `.android/.ios/.web` overrides when override files exist.
- Cover keyboard/touch interactions and accessibility behaviors.
- Cover loading, empty, success, and error UX states.

## Test Isolation Rules
- Unit/integration tests must not hit real network/storage/SDK boundaries.
- Mock services, storage, platform APIs, time, and navigation as needed.
- Prefer behavior-focused tests over implementation-detail coupling.

## Enforcement
- Test regressions block merge.
- Missing critical-path tests block merge.

## Related Owners
- UI behavior: `platform-ui.mdc`
- Accessibility acceptance requirements: `accessibility.mdc`
- Security-critical test expectations: `security.mdc`
- Offline behavior: `offline-sync.mdc`