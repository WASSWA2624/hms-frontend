---
alwaysApply: true
---

# Coding Conventions, Enforcement & Change Policy

## Purpose
Define global conventions that apply to all layers.
This file owns naming, module system, imports/exports, and side-effect placement.

## File Naming
- `camelCase`: hooks, utilities, functions
- `PascalCase`: components, screens, layouts
- Routing files (`src/app/**`):
  - Route segment files in `kebab-case` (example: `user-profile.jsx`)
  - Default segment entry files use `index.jsx`
  - Layout files use `_layout.jsx`

## Module System
- ES modules are mandatory in source code.
- Use `import` / `export` only in `src/**`.
- CommonJS is forbidden in `src/**`.

Allowed exceptions:
- Tooling config files at repository root when toolchains require CommonJS (`babel.config.js`, `metro.config.js`, `jest.config.js`).
- Repository root Expo entry `index.js` may use `require('expo-router/entry')`.

## Exports
- Prefer named exports by default.
- Exceptions:
  - Expo App Router pages/layouts must use default exports.
  - Leaf platform component barrels may re-export default component entries (see `component-structure.mdc`).
- Barrel files are `index.js` and must contain exports only (no JSX).

## Imports
- Use alias imports from `babel.config.js` mappings.
- Respect layer boundaries from `project-structure.mdc`.
- Prefer specific aliases (`@services`, `@hooks`) over generic `@/` when possible.

## Side Effects
Authoritative placement:
- Redux middleware/thunks
- Services
- Workers
- Bootstrap

Hooks may coordinate UI-adjacent lifecycle side effects, but irreversible work must be delegated to the locations above.
UI render code must not execute irreversible side effects directly.

## Enforcement
- All PRs must comply with `index.mdc` and owner files.
- Violations are architectural defects.
- Testing requirements are owned by `testing.mdc`.

## Change Policy
- Architectural changes require updating the relevant owner `.mdc` file.
- `index.mdc` must be updated when ownership or rule files change.
