---
alwaysApply: true
---

# Error Handling & Logging Standards

## Purpose
Define how technical failures are normalized, stored, surfaced, and logged.
This file owns the global error/logging pipeline.

## Ownership Model
- UI: render safe fallback/recovery UX
- Hooks: expose semantic error state and retry actions
- Store: hold error codes/state only
- Services: detect and throw technical failures
- Errors layer: normalize and route errors
- Logging layer: emit structured sanitized events

## Core Modules
```txt
src/errors/
  index.js
  ErrorBoundary.jsx
  error.handler.js
  fallback.ui.jsx
src/logging/
  index.js
  logger.js
  levels.js
```

## Error Boundary Rules
- Exactly one global `ErrorBoundary` wraps the app.
- It is mounted in `src/app/_layout.jsx`.
- It reports fatal runtime/render failures through the logging pipeline.

## Normalization Rules
- All non-trivial errors pass through `src/errors/error.handler.js`.
- UI must not receive raw technical error payloads.
- Store keeps normalized codes/status, not raw error objects.

## Logging Rules
Allowed logging locations:
- Errors layer handlers
- Store middleware
- Services/interceptors
- Workers
- Bootstrap

Forbidden logging locations:
- UI render code
- Pure utility functions
- Ad-hoc production `console.*` calls

Never log tokens, credentials, secrets, or PII.

## Related Owners
- Security sanitization and sensitive-data rules: `security.mdc`
- Infrastructure integration boundaries: `services-integration.mdc`
- State error shape: `state-management.mdc`
- Test requirements: `testing.mdc`