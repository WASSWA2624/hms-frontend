---
alwaysApply: true
---

# App Router & Navigation Standards

## Purpose
Define routing and navigation rules for Expo App Router.
This file owns route organization, route naming, and navigation boundaries.

## Route Location
- All routes live under `src/app/`.
- Only these files may live directly under `src/app/`:
  - `_layout.jsx`
  - `index.jsx`
  - `+not-found.jsx`
  - `_error.jsx` (optional)
- All feature routes must be inside route groups such as `src/app/(auth)/`.

## Route Groups
- Route groups use parentheses and are allowed only in `src/app/`.
- Each route group must include its own `_layout.jsx` for group navigation/guard composition.
- Group names are project-specific and tracked in `dev-plan/`.

## Naming & Exports
- Route segment files use `kebab-case` (example: `user-profile.jsx`).
- Default segment pages may use `index.jsx` inside a route folder.
- Layout files must be named `_layout.jsx`.
- Route pages and layouts must use default exports.

## Page Boundaries
Pages may import:
- Platform UI (`@platform/...`)
- Shared hooks (`@hooks/...`)
- Feature entrypoints/use-cases (`@features/...`)

Pages must not import:
- Service internals (`@services/...` internals)
- Store implementation internals (reducers, middleware, persistence wiring)
- Infrastructure modules directly for business flows

## Navigation Rules
- Use Expo App Router only.
- Do not use a separate React Navigation stack outside Expo App Router.
- Guard logic belongs in `src/navigation/guards/` and is applied by layouts.
- Generated links must omit route group segments (use `/login`, not `/(auth)/login`).

## Error Handling
- The global `ErrorBoundary` is mounted once in `src/app/_layout.jsx` (owner: `errors-logging.mdc`).
- Route-level error surfaces use App Router conventions (`+not-found.jsx`, optional `_error.jsx`).
- Do not mount competing global error boundaries in group layouts.

## Related
- `bootstrap-config.mdc` (provider placement)
- `errors-logging.mdc` (error boundary ownership)
- `component-structure.mdc` (platform file strategy)
- `coding-conventions.mdc` (imports, module system, naming baseline)
