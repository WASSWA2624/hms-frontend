---
alwaysApply: true
---

# Hooks & Utilities Standards

## Purpose
Define how reusable hooks and utilities are built and consumed.
This file owns hook and utility behavior, not domain rules or service contracts.

## Ownership
Hooks own:
- UI-facing orchestration APIs
- Selector/dispatch abstraction for UI
- Local UI state and lifecycle coordination

Utilities own:
- Pure stateless helpers
- Formatting/transformation/validation helpers
- Deterministic logic without React/Redux dependencies

## Folder Structure
```txt
src/hooks/
  index.js
  useHookName.js
src/utils/
  index.js
  util-name.js
```

## Hook Rules
- Hooks start with `use` and use `camelCase`.
- One hook = one responsibility.
- Hooks must not render JSX.
- Hooks must not contain domain business rules.
- Hooks must not import UI components.

## Redux Integration
- UI must consume Redux via semantic hooks.
- UI must not call `useSelector`/`useDispatch` directly in screens/components.
- Hooks expose semantic APIs (example: `useAuth()` returns state + actions).

## Side Effects and Service Access
- Hooks may coordinate lifecycle side effects (subscriptions, focus, cleanup).
- Business data/network flows must go through features/thunks/middleware to services.
- Direct `@services` calls from hooks are allowed only for technical cross-cutting hooks (example: connectivity observers, platform capability checks), never for domain business flows.

## Utility Rules
Utilities must be:
- Pure
- Stateless
- Deterministic
- Independently testable

Utilities must not:
- Import React
- Import Redux
- Perform I/O (network, storage, SDK calls)
- Log analytics

## Dependency Direction
Allowed:
```txt
hooks -> store
hooks -> features
hooks -> utils
hooks -> services (technical cross-cutting only)
utils -> (none of hooks/store/services)
```

Forbidden:
```txt
utils -> hooks
utils -> store
utils -> services
hooks -> platform components
```

## Error Contract
- Hooks expose normalized, semantic error state to UI.
- Utilities may throw predictable errors for invalid inputs.
- Do not leak raw service errors to UI components.

## Related
- `coding-conventions.mdc` (side-effect placement)
- `features-domain.mdc` (business flow ownership)
- `services-integration.mdc` (service boundaries)
- `state-management.mdc` (Redux ownership)
