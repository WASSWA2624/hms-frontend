---
alwaysApply: true
---

# Services & External Integrations Standards

## Purpose
Define infrastructure/service boundaries for external I/O and irreversible side effects.

## Service Ownership
Services own:
- Network calls
- Storage access
- SDK integrations
- Technical retry/timeout/header behavior

Services must not own:
- Domain business rules
- UI rendering or navigation
- Redux reducer logic

## Folder Structure
```txt
src/services/
  index.js
  api/
    client.js
    endpoints.js
    interceptors.js
    index.js
  storage/
    async.js
    secure.js
    index.js
  analytics/
    tracker.js
    index.js
```

## API Service Rules
- `client.js` centralizes request execution and low-level error shaping.
- `endpoints.js` reads environment/config values from `src/config` only.
- `interceptors.js` handles headers/auth refresh wiring and sanitized operational logs.
- Services must not emit user-facing messages.

## Storage Rules
- Non-sensitive data: async storage service.
- Sensitive credentials/tokens: secure storage service.
- Encryption primitives belong to `src/security`.

## Analytics Rules
- Fire-and-forget behavior only.
- Must not block UI critical paths.
- Must not contain domain branching.

## Dependency Direction
Allowed:
```txt
services -> utils
services -> config
services -> security
services -> logging
```

Forbidden:
```txt
services -> platform
services -> store
services -> app
services -> features domain rules
```

## Offline Compatibility
- Services remain stateless and reusable.
- Offline orchestration is owned by `offline-sync.mdc`.

## Related Owners
- Feature/domain flow ownership: `features-domain.mdc`
- Side-effect placement: `coding-conventions.mdc`
- Central error normalization and logging flow: `errors-logging.mdc`
