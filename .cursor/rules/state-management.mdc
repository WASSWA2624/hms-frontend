---
alwaysApply: true
---

# State Management Standards (Redux Toolkit)

## Purpose
Define global state ownership and Redux usage.
Redux Toolkit is the only approved global state solution.

## State Layer Owns
- Global application state
- Reducers/selectors
- Async orchestration via thunks/middleware
- Persistence integration

State layer must not:
- Render UI
- Import platform UI modules
- Hold raw secrets/tokens

## Folder Ownership
```txt
src/store/
  index.js
  rootReducer.js
  middleware.js
  persist.js
  slices/
  selectors/
  types.js
```

## Store Setup Rules
- Use `configureStore`.
- Enable DevTools in development only.
- Declare middleware explicitly.
- Provider mounting is owned by `bootstrap-config.mdc`.

## Slice Rules
- One slice per cohesive concern.
- Reducers must be pure.
- No API calls inside reducers.
- Avoid monolithic "global" slices.

## Async Rules
- Async flows use `createAsyncThunk` and/or middleware.
- Thunks/middleware may call services and utilities; feature use-cases may dispatch into store through public actions.
- Normalize and propagate error codes/states.

## Selector Rules
- Selectors live in `src/store/selectors/`.
- Use memoized selectors for derived data.
- UI should consume selectors through semantic hooks.

## Persistence Rules
Persist only stable state (for example: preferences, non-sensitive app state metadata).
Do not persist transient UI flags or raw technical objects.
Security-sensitive data handling is owned by `security.mdc`.

## Integration Boundaries
Allowed:
```txt
features -> store
hooks -> store
```

Forbidden:
```txt
store -> platform
store -> app UI
```

## Related Owners
- Feature/domain ownership: `features-domain.mdc`
- Hook access patterns: `hooks-utils.mdc`
- Error code normalization and logging pipeline: `errors-logging.mdc`
- Provider placement/startup: `bootstrap-config.mdc`
