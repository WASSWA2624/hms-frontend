---
alwaysApply: true
---

# Domain & Features Architecture Standards

## Purpose
Define how business/domain logic is organized in `src/features`.
This file owns domain boundaries and feature composition.

## Feature Definition
A feature represents a domain capability (for example: auth, appointments, billing).
A feature owns:
- Domain rules and validation
- Domain models
- Use-case orchestration
- Service/store integration for that domain

A feature must not own:
- UI rendering
- Theme/styling
- Route structure

## Standard Structure
```txt
src/features/
  index.js
  feature-name/
    feature-name.rules.js
    feature-name.model.js
    feature-name.api.js
    feature-name.usecase.js
    feature-name.events.js (optional)
    index.js
```

## File Roles
- `*.rules.js`: pure domain rules (no I/O)
- `*.model.js`: domain-safe normalization/mapping
- `*.api.js`: feature-level wrappers around service calls
- `*.usecase.js`: orchestrates rules/models/api and store interactions
- `*.events.js`: optional domain event contracts
- `index.js`: public exports only

## Dependency Boundaries
Allowed:
```txt
features -> services
features -> store
features -> utils
```

Forbidden:
```txt
features -> platform
features -> app
features -> navigation
features -> other features (direct internals)
```

Cross-feature collaboration must happen through explicit public contracts, shared services, or shared store/event mechanisms, not direct internal imports.

## UI Interaction Contract
- UI consumes features through hooks or explicit feature entrypoints.
- UI must not re-implement domain rules.
- UI must not call raw service clients for domain flows.

## Error Contract
- Features expose normalized domain-level errors/codes.
- Raw technical errors stay inside service/error layers.

## Related Owners
- Redux details: `state-management.mdc`
- Infrastructure contract boundaries: `services-integration.mdc`
- Hook API boundaries: `hooks-utils.mdc`
- Test policy and coverage gates: `testing.mdc`
