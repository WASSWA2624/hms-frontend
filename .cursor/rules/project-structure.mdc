---
alwaysApply: true
---

# Project Structure & Architecture

## Purpose
Define layer boundaries and folder ownership for the application.
This file owns architecture boundaries, not detailed conventions for routing, theming, or testing.

## Layer Model (Strict)
1. Routing layer (`src/app`, `src/navigation`)
2. Platform UI layer (`src/platform`)
3. Domain/features layer (`src/features`)
4. State layer (`src/store`)
5. Infrastructure layer (`src/services`, `src/offline`, `src/security`, `src/workers`)
6. Cross-cutting support (`src/errors`, `src/logging`, `src/i18n`, `src/theme`, `src/bootstrap`, `src/config`)

## Boundary Rules
- UI layers must not contain domain business rules.
- Features must not import UI modules.
- Services must not import UI or Redux internals.
- Reducers/selectors stay in `src/store`; UI consumes state through hooks.
- Cross-feature direct imports are forbidden unless through explicit shared contracts/public APIs.

## Folder Ownership Summary
- `src/app/`: route files and route layouts (owner details: `app-router.mdc`)
- `src/platform/`: presentational components/screens/layouts (owner details: `platform-ui.mdc`, `component-structure.mdc`)
- `src/features/`: business rules, models, use-cases
- `src/store/`: Redux store, slices, selectors, middleware, persistence
- `src/services/`: API/storage/SDK integrations
- `src/offline/`: queue/sync orchestration
- `src/security/`: token, encryption, permissions, biometric helpers
- `src/theme/`: tokens, themes, responsive helpers
- `src/hooks/`: shared semantic hooks for UI
- `src/utils/`: pure utilities
- `src/bootstrap/`: startup wiring and provider composition
- `src/errors/`: error normalization and boundaries
- `src/logging/`: structured logging and monitoring adapters
- `src/i18n/`: locale bootstrap and translation catalogs
- `src/config/`: side-effect-free runtime config values
- `src/debug/`: in-app development debug helpers only
- `src/__tests__/`: tests mirroring source ownership (details in `testing.mdc`)

## Import Direction (High Level)
Allowed direction:
```txt
app -> platform/hooks/features
platform -> hooks/utils
hooks -> store/features/utils/services (technical cross-cutting only)
features -> services/store/utils
store -> services/utils
services -> security/config/utils/logging
```

Forbidden direction:
```txt
features -> platform/app
services -> platform/store/app
store -> platform
utils -> store/services/hooks
```

## Performance & Scale Constraints
- Keep modules cohesive and small.
- Prefer composition over large shared "god" modules.
- Keep folder depth practical and predictable.
- Preserve boundaries to enable route and feature-level code splitting.

## Related Owners
- Routing conventions: `app-router.mdc`
- Platform file structure: `component-structure.mdc`
- Styling/theming: `theme-design.mdc`
- Module system and aliases: `coding-conventions.mdc`
- Test structure and quality requirements: `testing.mdc`
