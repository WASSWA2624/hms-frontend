{"version":3,"names":["useCallback","useEffect","useState","useRouter","useLocalSearchParams","useI18n","useContact","cov_hohgh0am","s","useContactFormScreen","f","_ref","t","router","_ref2","id","_ref3","get","create","update","data","isLoading","errorCode","reset","isEdit","Boolean","_ref4","_ref5","_slicedToArray","value","setValue","_ref6","_ref7","contactType","setContactType","_ref8","_ref9","isPrimary","setIsPrimary","_ref0","_ref1","tenantId","setTenantId","contact","b","Array","isArray","_ref10","_ref11","_ref12","_ref13","_ref14","contact_type","type","is_primary","tenant_id","handleSubmit","_asyncToGenerator","payload","trim","undefined","replace","_unused","handleCancel","push","hasError","onSubmit","onCancel","testID"],"sources":["useContactFormScreen.js"],"sourcesContent":["/**\r\n * useContactFormScreen Hook\r\n * Shared logic for ContactFormScreen (create/edit).\r\n */\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport { useRouter, useLocalSearchParams } from 'expo-router';\r\nimport { useI18n, useContact } from '@hooks';\r\n\r\nconst useContactFormScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { id } = useLocalSearchParams();\r\n  const { get, create, update, data, isLoading, errorCode, reset } = useContact();\r\n\r\n  const isEdit = Boolean(id);\r\n  const [value, setValue] = useState('');\r\n  const [contactType, setContactType] = useState('');\r\n  const [isPrimary, setIsPrimary] = useState(false);\r\n  const [tenantId, setTenantId] = useState('');\r\n\r\n  const contact = data && typeof data === 'object' && !Array.isArray(data) ? data : null;\r\n\r\n  useEffect(() => {\r\n    if (isEdit && id) {\r\n      reset();\r\n      get(id);\r\n    }\r\n  }, [isEdit, id, get, reset]);\r\n\r\n  useEffect(() => {\r\n    if (contact) {\r\n      setValue(contact.value ?? '');\r\n      setContactType(contact.contact_type ?? contact.type ?? '');\r\n      setIsPrimary(contact.is_primary ?? false);\r\n      setTenantId(contact.tenant_id ?? '');\r\n    }\r\n  }, [contact]);\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    try {\r\n      const payload = {\r\n        value: value.trim(),\r\n        contact_type: contactType.trim() || undefined,\r\n        is_primary: isPrimary,\r\n      };\r\n      if (!isEdit && tenantId?.trim()) {\r\n        payload.tenant_id = tenantId.trim();\r\n      }\r\n      if (isEdit && id) {\r\n        await update(id, payload);\r\n      } else {\r\n        await create(payload);\r\n      }\r\n      router.replace('/settings/contacts');\r\n    } catch {\r\n      /* error from hook */\r\n    }\r\n  }, [isEdit, id, value, contactType, isPrimary, tenantId, create, update, router]);\r\n\r\n  const handleCancel = useCallback(() => {\r\n    router.push('/settings/contacts');\r\n  }, [router]);\r\n\r\n  return {\r\n    isEdit,\r\n    value,\r\n    setValue,\r\n    contactType,\r\n    setContactType,\r\n    isPrimary,\r\n    setIsPrimary,\r\n    tenantId,\r\n    setTenantId,\r\n    isLoading,\r\n    hasError: Boolean(errorCode),\r\n    contact,\r\n    onSubmit: handleSubmit,\r\n    onCancel: handleCancel,\r\n    testID: 'contact-form-screen',\r\n  };\r\n};\r\n\r\nexport default useContactFormScreen;\r\n"],"mappings":"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","ignoreList":[]}