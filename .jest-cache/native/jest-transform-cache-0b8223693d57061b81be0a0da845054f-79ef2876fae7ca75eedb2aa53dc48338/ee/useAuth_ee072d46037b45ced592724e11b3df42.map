{"version":3,"names":["_react","require","_reactRedux","_selectors","_auth","normalizeRole","role","String","trim","toLowerCase","normalizeRoles","roles","list","Array","isArray","map","filter","Boolean","useAuth","dispatch","useDispatch","isAuthenticated","useSelector","selectIsAuthenticated","user","selectUser","useMemo","userRoles","login","useCallback","payload","authActions","register","logout","refreshSession","loadCurrentUser","_default","exports","default"],"sources":["useAuth.js"],"sourcesContent":["/**\r\n * useAuth Hook\r\n * Provides minimal auth state from Redux for UI guards/navigation.\r\n * File: useAuth.js\r\n */\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { selectIsAuthenticated, selectUser } from '@store/selectors';\r\nimport { actions as authActions } from '@store/slices/auth.slice';\r\n\r\nconst normalizeRole = (role) => {\r\n  if (!role) return null;\r\n  return String(role).trim().toLowerCase();\r\n};\r\n\r\nconst normalizeRoles = (roles) => {\r\n  if (!roles) return [];\r\n  const list = Array.isArray(roles) ? roles : [roles];\r\n  return list.map(normalizeRole).filter(Boolean);\r\n};\r\n\r\n/**\r\n * useAuth hook\r\n * @returns {Object} auth state and normalized roles\r\n */\r\nconst useAuth = () => {\r\n  const dispatch = useDispatch();\r\n  const isAuthenticated = useSelector(selectIsAuthenticated);\r\n  const user = useSelector(selectUser);\r\n\r\n  const roles = useMemo(() => {\r\n    const userRoles = user?.roles || user?.role || [];\r\n    return normalizeRoles(userRoles);\r\n  }, [user]);\r\n\r\n  return {\r\n    isAuthenticated: Boolean(isAuthenticated),\r\n    user: user || null,\r\n    roles,\r\n    role: roles[0] || null,\r\n    login: useCallback((payload) => dispatch(authActions.login(payload)), [dispatch]),\r\n    register: useCallback((payload) => dispatch(authActions.register(payload)), [dispatch]),\r\n    logout: useCallback(() => dispatch(authActions.logout()), [dispatch]),\r\n    refreshSession: useCallback(() => dispatch(authActions.refreshSession()), [dispatch]),\r\n    loadCurrentUser: useCallback(() => dispatch(authActions.loadCurrentUser()), [dispatch]),\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":";;;;AAKA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,UAAA,GAAAF,OAAA;AACA,IAAAG,KAAA,GAAAH,OAAA;AAEA,IAAMI,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,IAAI,EAAK;EAC9B,IAAI,CAACA,IAAI,EAAE,OAAO,IAAI;EACtB,OAAOC,MAAM,CAACD,IAAI,CAAC,CAACE,IAAI,CAAC,CAAC,CAACC,WAAW,CAAC,CAAC;AAC1C,CAAC;AAED,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,KAAK,EAAK;EAChC,IAAI,CAACA,KAAK,EAAE,OAAO,EAAE;EACrB,IAAMC,IAAI,GAAGC,KAAK,CAACC,OAAO,CAACH,KAAK,CAAC,GAAGA,KAAK,GAAG,CAACA,KAAK,CAAC;EACnD,OAAOC,IAAI,CAACG,GAAG,CAACV,aAAa,CAAC,CAACW,MAAM,CAACC,OAAO,CAAC;AAChD,CAAC;AAMD,IAAMC,OAAO,GAAG,SAAVA,OAAOA,CAAA,EAAS;EACpB,IAAMC,QAAQ,GAAG,IAAAC,uBAAW,EAAC,CAAC;EAC9B,IAAMC,eAAe,GAAG,IAAAC,uBAAW,EAACC,gCAAqB,CAAC;EAC1D,IAAMC,IAAI,GAAG,IAAAF,uBAAW,EAACG,qBAAU,CAAC;EAEpC,IAAMd,KAAK,GAAG,IAAAe,cAAO,EAAC,YAAM;IAC1B,IAAMC,SAAS,GAAG,CAAAH,IAAI,oBAAJA,IAAI,CAAEb,KAAK,MAAIa,IAAI,oBAAJA,IAAI,CAAElB,IAAI,KAAI,EAAE;IACjD,OAAOI,cAAc,CAACiB,SAAS,CAAC;EAClC,CAAC,EAAE,CAACH,IAAI,CAAC,CAAC;EAEV,OAAO;IACLH,eAAe,EAAEJ,OAAO,CAACI,eAAe,CAAC;IACzCG,IAAI,EAAEA,IAAI,IAAI,IAAI;IAClBb,KAAK,EAALA,KAAK;IACLL,IAAI,EAAEK,KAAK,CAAC,CAAC,CAAC,IAAI,IAAI;IACtBiB,KAAK,EAAE,IAAAC,kBAAW,EAAC,UAACC,OAAO;MAAA,OAAKX,QAAQ,CAACY,aAAW,CAACH,KAAK,CAACE,OAAO,CAAC,CAAC;IAAA,GAAE,CAACX,QAAQ,CAAC,CAAC;IACjFa,QAAQ,EAAE,IAAAH,kBAAW,EAAC,UAACC,OAAO;MAAA,OAAKX,QAAQ,CAACY,aAAW,CAACC,QAAQ,CAACF,OAAO,CAAC,CAAC;IAAA,GAAE,CAACX,QAAQ,CAAC,CAAC;IACvFc,MAAM,EAAE,IAAAJ,kBAAW,EAAC;MAAA,OAAMV,QAAQ,CAACY,aAAW,CAACE,MAAM,CAAC,CAAC,CAAC;IAAA,GAAE,CAACd,QAAQ,CAAC,CAAC;IACrEe,cAAc,EAAE,IAAAL,kBAAW,EAAC;MAAA,OAAMV,QAAQ,CAACY,aAAW,CAACG,cAAc,CAAC,CAAC,CAAC;IAAA,GAAE,CAACf,QAAQ,CAAC,CAAC;IACrFgB,eAAe,EAAE,IAAAN,kBAAW,EAAC;MAAA,OAAMV,QAAQ,CAACY,aAAW,CAACI,eAAe,CAAC,CAAC,CAAC;IAAA,GAAE,CAAChB,QAAQ,CAAC;EACxF,CAAC;AACH,CAAC;AAAC,IAAAiB,QAAA,GAAAC,OAAA,CAAAC,OAAA,GAEapB,OAAO","ignoreList":[]}