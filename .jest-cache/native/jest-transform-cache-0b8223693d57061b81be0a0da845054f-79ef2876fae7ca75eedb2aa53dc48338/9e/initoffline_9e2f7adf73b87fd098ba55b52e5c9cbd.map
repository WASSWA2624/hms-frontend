{"version":3,"names":["networkListener","syncManager","hydration","logger","store","actions","NETWORK_QUALITY","initOffline","_initOffline","apply","arguments","_asyncToGenerator","cov_2mwnv74ltp","f","s","_ref2","startListening","subscribe","snapshot","_ref","isOnline","Boolean","quality","b","UNKNOWN","dispatch","setOnline","setQuality","currentStatus","checkConnectivity","hydrate","startSync","info","error","message"],"sources":["init.offline.js"],"sourcesContent":["/**\r\n * Offline Initialization\r\n * File: init.offline.js\r\n */\r\nimport { networkListener, syncManager, hydration } from '@offline';\r\nimport { logger } from '@logging';\r\nimport store from '@store';\r\nimport { actions } from '@store/slices/network.slice';\r\nimport { NETWORK_QUALITY } from '@utils/networkQuality';\r\n\r\nexport async function initOffline() {\r\n  try {\r\n    // Register network listeners\r\n    networkListener.startListening();\r\n    \r\n    // Subscribe to network changes and update Redux store\r\n    networkListener.subscribe((snapshot) => {\r\n      const isOnline = Boolean(snapshot?.isOnline);\r\n      const quality = snapshot?.quality ?? NETWORK_QUALITY.UNKNOWN;\r\n      store.dispatch(actions.setOnline(isOnline));\r\n      store.dispatch(actions.setQuality(quality));\r\n    });\r\n    \r\n    // Initialize current network status in store\r\n    const currentStatus = await networkListener.checkConnectivity();\r\n    const isOnline = Boolean(currentStatus?.isOnline);\r\n    const quality = currentStatus?.quality ?? NETWORK_QUALITY.UNKNOWN;\r\n    store.dispatch(actions.setOnline(isOnline));\r\n    store.dispatch(actions.setQuality(quality));\r\n    \r\n    // Initialize request queue\r\n    // Queue is initialized lazily when first request is queued\r\n    \r\n    // Trigger state hydration\r\n    await hydration.hydrate();\r\n    \r\n    // Start sync manager (will sync when online)\r\n    syncManager.startSync();\r\n    \r\n    logger.info('Offline system initialized successfully');\r\n  } catch (error) {\r\n    logger.error('Offline initialization failed', { error: error.message });\r\n    // Offline failure is not fatal - app can continue without offline support\r\n  }\r\n}\r\n\r\n"],"mappings":"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","ignoreList":[]}