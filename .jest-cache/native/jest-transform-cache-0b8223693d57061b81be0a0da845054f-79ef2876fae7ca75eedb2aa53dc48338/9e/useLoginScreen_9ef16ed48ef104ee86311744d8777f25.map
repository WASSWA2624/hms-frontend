{"version":3,"names":["useCallback","useMemo","useState","useEffect","useRef","useRouter","useSelector","useAuth","useBiometricAuth","useI18n","useNetwork","AUTH","normalizePhoneNumber","identifyUseCase","loginUseCase","selectIsAuthenticated","store","cov_sf2tn2s04","s","resolveErrorMessage","t","errorCode","f","b","key","resolved","normalizeIdentifier","value","String","trim","isEmailIdentifier","includes","useLoginScreen","_ref","router","_ref2","isOffline","_ref3","login","clearError","isLoading","refreshSession","loadCurrentUser","roles","isAuthenticated","_ref4","isBiometricAvailable","isAvailable","isBiometricChecking","isChecking","biometricErrorMessage","errorMessage","authenticateBiometric","authenticate","_ref5","window","saved","localStorage","getItem","savedIdentifier","_ref6","_slicedToArray","identifier","setIdentifier","_ref7","_ref8","password","setPassword","_ref9","_ref0","rememberMe","setRememberMe","loginCompletedRef","authMessage","canSubmit","Boolean","canAccessRegister","_AUTH$REGISTER_ROLES","REGISTER_ROLES","length","some","role","handleSubmit","_asyncToGenerator","fetch","method","headers","body","JSON","stringify","location","message","data","hasIdentifier","hasPassword","timestamp","Date","now","sessionId","runId","hypothesisId","catch","rawIdentifier","payload","email","toLowerCase","phone","_result$facilities","console","log","Object","assign","result","isUser","id","requiresFacilitySelection","hasId","hasEmail","hasPhone","resultKeys","keys","hasFacilities","facilities","hasTenantId","tenantId","resultType","route","push","pathname","params","loginPayload","tenant_id","isUserResult","current","attempts","maxAttempts","currentState","getState","authState","auth","isAuth","user","attempt","hasUser","replace","Promise","resolve","setTimeout","warn","loadError","error","_error$message","code","stack","name","slice","handleChangeIdentifier","handleChangePassword","handleRememberMeChange","checked","setItem","removeItem","timeoutId","clearTimeout","handleGoToRegister","handleGoToForgotPassword","handleBiometricLogin","authenticated"],"sources":["useLoginScreen.js"],"sourcesContent":["/**\r\n * useLoginScreen Hook\r\n * Shared behavior/logic for LoginScreen across all platforms.\r\n * File: useLoginScreen.js\r\n */\r\nimport { useCallback, useMemo, useState, useEffect, useRef } from 'react';\r\nimport { useRouter } from 'expo-router';\r\nimport { useSelector } from 'react-redux';\r\nimport { useAuth, useBiometricAuth, useI18n, useNetwork } from '@hooks';\r\nimport { AUTH } from '@config';\r\nimport { normalizePhoneNumber } from '@utils';\r\nimport { identifyUseCase, loginUseCase } from '@features/auth';\r\nimport { selectIsAuthenticated } from '@store/selectors';\r\nimport store from '@store';\r\n\r\nconst resolveErrorMessage = (t, errorCode) => {\r\n  if (!errorCode) return null;\r\n  const key = `errors.codes.${errorCode}`;\r\n  const resolved = t(key);\r\n  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;\r\n};\r\n\r\nconst normalizeIdentifier = (value) => String(value || '').trim();\r\nconst isEmailIdentifier = (value) => normalizeIdentifier(value).includes('@');\r\n\r\nconst useLoginScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { isOffline } = useNetwork();\r\n  const {\r\n    login,\r\n    clearError,\r\n    isLoading,\r\n    errorCode,\r\n    refreshSession,\r\n    loadCurrentUser,\r\n    roles,\r\n  } = useAuth();\r\n  \r\n  // Get isAuthenticated directly from Redux to avoid stale closure issues\r\n  const isAuthenticated = useSelector(selectIsAuthenticated);\r\n  const {\r\n    isAvailable: isBiometricAvailable,\r\n    isChecking: isBiometricChecking,\r\n    errorMessage: biometricErrorMessage,\r\n    authenticate: authenticateBiometric,\r\n  } = useBiometricAuth();\r\n  const [identifier, setIdentifier] = useState(() => {\r\n    // Load saved identifier if rememberMe was true\r\n    if (typeof window !== 'undefined') {\r\n      const saved = localStorage.getItem('login_rememberMe');\r\n      if (saved === 'true') {\r\n        const savedIdentifier = localStorage.getItem('login_identifier');\r\n        return savedIdentifier || '';\r\n      }\r\n    }\r\n    return '';\r\n  });\r\n  const [password, setPassword] = useState('');\r\n  const [rememberMe, setRememberMe] = useState(() => {\r\n    // Load rememberMe state\r\n    if (typeof window !== 'undefined') {\r\n      return localStorage.getItem('login_rememberMe') === 'true';\r\n    }\r\n    return false;\r\n  });\r\n  \r\n  // Track if we just completed a login to trigger redirect\r\n  const loginCompletedRef = useRef(false);\r\n\r\n  const errorMessage = useMemo(() => {\r\n    const authMessage = resolveErrorMessage(t, errorCode);\r\n    return authMessage || biometricErrorMessage;\r\n  }, [biometricErrorMessage, errorCode, t]);\r\n\r\n  const canSubmit = useMemo(\r\n    () => Boolean(identifier && password) && !isLoading && !isOffline,\r\n    [identifier, isLoading, isOffline, password]\r\n  );\r\n\r\n  const canAccessRegister = useMemo(() => {\r\n    if (!isAuthenticated) return false;\r\n    if (!AUTH.REGISTER_ROLES?.length) return false;\r\n    return AUTH.REGISTER_ROLES.some((role) => roles.includes(role));\r\n  }, [isAuthenticated, roles]);\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    // #region agent log\r\n    fetch('http://127.0.0.1:7251/ingest/1d28b85e-4e80-4cd6-84bc-0a14f3ba6cec',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useLoginScreen.js:80',message:'login_submit_enter',data:{canSubmit,isOffline,isLoading,hasIdentifier:Boolean(identifier),hasPassword:Boolean(password)},timestamp:Date.now(),sessionId:'debug-session',runId:'login-redirect',hypothesisId:'H1'})}).catch(()=>{});\r\n    // #endregion agent log\r\n    if (!canSubmit) return false;\r\n    clearError();\r\n    const rawIdentifier = normalizeIdentifier(identifier);\r\n    const payload = isEmailIdentifier(rawIdentifier)\r\n      ? { email: rawIdentifier.toLowerCase() }\r\n      : { phone: normalizePhoneNumber(rawIdentifier) };\r\n    \r\n    try {\r\n      // Call login use case directly to check response\r\n      console.log('[LOGIN] Starting login with payload:', { ...payload, password: '***' });\r\n      const result = await loginUseCase({\r\n        ...payload,\r\n        password,\r\n      });\r\n      \r\n      // Log full server response\r\n      console.log('[LOGIN] Login result from server:', JSON.stringify(result, null, 2));\r\n      console.log('[LOGIN] Login successful:', Boolean(result));\r\n      console.log('[LOGIN] Result type check:', {\r\n        isUser: Boolean(result?.id || result?.email || result?.phone),\r\n        requiresFacilitySelection: Boolean(result?.requiresFacilitySelection),\r\n        hasId: Boolean(result?.id),\r\n        hasEmail: Boolean(result?.email),\r\n        hasPhone: Boolean(result?.phone),\r\n        resultKeys: result ? Object.keys(result) : [],\r\n      });\r\n      \r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7251/ingest/1d28b85e-4e80-4cd6-84bc-0a14f3ba6cec',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useLoginScreen.js:96',message:'login_usecase_result',data:{requiresFacilitySelection:Boolean(result?.requiresFacilitySelection),hasFacilities:Boolean(result?.facilities?.length),hasTenantId:Boolean(result?.tenantId),isUser:Boolean(result?.id || result?.email || result?.phone),resultType:typeof result,resultKeys:result ? Object.keys(result) : []},timestamp:Date.now(),sessionId:'debug-session',runId:'login-redirect',hypothesisId:'H2'})}).catch(()=>{});\r\n      // #endregion agent log\r\n      \r\n      // Check if facility selection is required\r\n      if (result?.requiresFacilitySelection) {\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7251/ingest/1d28b85e-4e80-4cd6-84bc-0a14f3ba6cec',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useLoginScreen.js:102',message:'login_redirect_facility_selection',data:{route:'/facility-selection'},timestamp:Date.now(),sessionId:'debug-session',runId:'login-redirect',hypothesisId:'H2'})}).catch(()=>{});\r\n        // #endregion agent log\r\n        router.push({\r\n          pathname: '/facility-selection',\r\n          params: {\r\n            facilities: JSON.stringify(result.facilities),\r\n            loginPayload: JSON.stringify({\r\n              ...payload,\r\n              password,\r\n              tenant_id: result.tenantId,\r\n            }),\r\n          },\r\n        });\r\n        return true;\r\n      }\r\n      \r\n      // Normal login - tokens are already stored by loginUseCase\r\n      // Update Redux state by loading current user, then redirect\r\n      const isUserResult = result && (result.id || result.email || result.phone);\r\n      console.log('[LOGIN] Is user result?', isUserResult);\r\n      \r\n      if (isUserResult) {\r\n        console.log('[LOGIN] Loading current user to update Redux state...');\r\n        try {\r\n          // Set flag for backup redirect mechanism\r\n          loginCompletedRef.current = true;\r\n          \r\n          // Dispatch loadCurrentUser and wait for it to complete\r\n          await loadCurrentUser();\r\n          console.log('[LOGIN] loadCurrentUser thunk completed');\r\n          \r\n          // Poll Redux store directly until isAuthenticated is true\r\n          // This ensures we have the latest state, not a stale closure\r\n          let attempts = 0;\r\n          const maxAttempts = 20; // 2 seconds max (20 * 100ms)\r\n          \r\n          while (attempts < maxAttempts) {\r\n            const currentState = store.getState();\r\n            const authState = currentState.auth || {};\r\n            const isAuth = Boolean(authState.isAuthenticated || authState.user);\r\n            \r\n            console.log('[LOGIN] Checking auth state:', { \r\n              attempt: attempts + 1, \r\n              isAuthenticated: isAuth,\r\n              hasUser: Boolean(authState.user)\r\n            });\r\n            \r\n            if (isAuth) {\r\n              console.log('[LOGIN] Authentication state confirmed, redirecting to /home...');\r\n              router.replace('/home');\r\n              return true;\r\n            }\r\n            \r\n            // Wait 100ms before next check\r\n            await new Promise(resolve => setTimeout(resolve, 100));\r\n            attempts++;\r\n          }\r\n          \r\n          // Fallback: if polling didn't work, try redirect anyway\r\n          console.warn('[LOGIN] Polling timeout, attempting redirect anyway...');\r\n          router.replace('/home');\r\n          return true;\r\n        } catch (loadError) {\r\n          console.error('[LOGIN] Error loading current user:', loadError);\r\n          return false;\r\n        }\r\n      }\r\n      \r\n      console.warn('[LOGIN] Login result is not a valid user object:', result);\r\n      return false;\r\n    } catch (error) {\r\n      console.error('[LOGIN] Login error:', error);\r\n      console.error('[LOGIN] Error details:', {\r\n        code: error?.code,\r\n        message: error?.message,\r\n        stack: error?.stack,\r\n        name: error?.name,\r\n      });\r\n      // #region agent log\r\n      fetch('http://127.0.0.1:7251/ingest/1d28b85e-4e80-4cd6-84bc-0a14f3ba6cec',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useLoginScreen.js:129',message:'login_submit_error',data:{errorCode:error?.code || null,errorMessage:typeof error?.message === 'string' ? error.message.slice(0,120) : null},timestamp:Date.now(),sessionId:'debug-session',runId:'login-redirect',hypothesisId:'H5'})}).catch(()=>{});\r\n      // #endregion agent log\r\n      // Check if error is multiple tenants\r\n      if (error?.code === 'MULTIPLE_TENANTS' || error?.message?.includes('multiple_tenants')) {\r\n        // Redirect to tenant selection\r\n        // #region agent log\r\n        fetch('http://127.0.0.1:7251/ingest/1d28b85e-4e80-4cd6-84bc-0a14f3ba6cec',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({location:'useLoginScreen.js:134',message:'login_redirect_tenant_selection',data:{route:'/tenant-selection'},timestamp:Date.now(),sessionId:'debug-session',runId:'login-redirect',hypothesisId:'H5'})}).catch(()=>{});\r\n        // #endregion agent log\r\n        router.push({\r\n          pathname: '/tenant-selection',\r\n          params: {\r\n            identifier: rawIdentifier,\r\n            password,\r\n          },\r\n        });\r\n        return true;\r\n      }\r\n      // Dispatch login to Redux to handle error state\r\n      await login({\r\n        ...payload,\r\n        password,\r\n      });\r\n      return false;\r\n    }\r\n  }, [canSubmit, clearError, identifier, login, loadCurrentUser, password, router]);\r\n\r\n  const handleChangeIdentifier = useCallback((value) => {\r\n    setIdentifier(value);\r\n  }, []);\r\n\r\n  const handleChangePassword = useCallback((value) => {\r\n    setPassword(value);\r\n  }, []);\r\n\r\n  const handleRememberMeChange = useCallback((checked) => {\r\n    setRememberMe(checked);\r\n    if (typeof window !== 'undefined') {\r\n      if (checked) {\r\n        localStorage.setItem('login_rememberMe', 'true');\r\n        if (identifier) {\r\n          localStorage.setItem('login_identifier', identifier);\r\n        }\r\n      } else {\r\n        localStorage.removeItem('login_rememberMe');\r\n        localStorage.removeItem('login_identifier');\r\n      }\r\n    }\r\n  }, [identifier]);\r\n\r\n  // Save identifier when it changes and rememberMe is true\r\n  useEffect(() => {\r\n    if (rememberMe && identifier && typeof window !== 'undefined') {\r\n      localStorage.setItem('login_identifier', identifier);\r\n    }\r\n  }, [identifier, rememberMe]);\r\n\r\n  // Backup redirect: if manual redirect in handleSubmit fails, this will catch it\r\n  // Only redirect if we're on login page and become authenticated\r\n  useEffect(() => {\r\n    if (isAuthenticated && loginCompletedRef.current) {\r\n      console.log('[LOGIN] Backup: isAuthenticated became true, redirecting to /home...');\r\n      loginCompletedRef.current = false;\r\n      // Small delay to avoid race condition with manual redirect\r\n      const timeoutId = setTimeout(() => {\r\n        router.replace('/home');\r\n      }, 100);\r\n      return () => clearTimeout(timeoutId);\r\n    }\r\n  }, [isAuthenticated, router]);\r\n\r\n  const handleGoToRegister = useCallback(() => {\r\n    router.push('/register');\r\n  }, [router]);\r\n\r\n  const handleGoToForgotPassword = useCallback(() => {\r\n    router.push('/forgot-password');\r\n  }, [router]);\r\n\r\n  const handleBiometricLogin = useCallback(async () => {\r\n    if (!isBiometricAvailable || isBiometricChecking || isOffline) return false;\r\n    const authenticated = await authenticateBiometric();\r\n    if (!authenticated) return false;\r\n    clearError();\r\n    await refreshSession();\r\n    await loadCurrentUser();\r\n    return true;\r\n  }, [\r\n    authenticateBiometric,\r\n    clearError,\r\n    isBiometricAvailable,\r\n    isBiometricChecking,\r\n    isOffline,\r\n    loadCurrentUser,\r\n    refreshSession,\r\n  ]);\r\n\r\n  return {\r\n    identifier,\r\n    password,\r\n    rememberMe,\r\n    errorMessage,\r\n    isLoading,\r\n    isOffline,\r\n    canSubmit,\r\n    canAccessRegister,\r\n    isBiometricAvailable,\r\n    isBiometricChecking,\r\n    handleSubmit,\r\n    handleChangeIdentifier,\r\n    handleChangePassword,\r\n    handleRememberMeChange,\r\n    handleGoToRegister,\r\n    handleGoToForgotPassword,\r\n    handleBiometricLogin,\r\n  };\r\n};\r\n\r\nexport default useLoginScreen;\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,SAASA,WAAW,EAAEC,OAAO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","ignoreList":[]}