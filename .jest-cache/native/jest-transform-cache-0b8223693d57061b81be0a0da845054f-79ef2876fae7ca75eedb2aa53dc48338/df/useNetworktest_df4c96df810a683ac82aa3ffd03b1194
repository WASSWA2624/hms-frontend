41815808b71fa839e4f816d25af0696f
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _reactRedux = require("react-redux");
var _toolkit = require("@reduxjs/toolkit");
var _useNetwork = _interopRequireDefault(require("../../hooks/useNetwork"));
var _rootReducer = _interopRequireDefault(require("../../store/rootReducer"));
var _jsxRuntime = require("react/jsx-runtime");
var createMockStore = function createMockStore() {
  var preloadedState = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
  return (0, _toolkit.configureStore)({
    reducer: _rootReducer.default,
    preloadedState: preloadedState
  });
};
var TestComponent = function TestComponent(_ref) {
  var onResult = _ref.onResult;
  var result = (0, _useNetwork.default)();
  _react.default.useEffect(function () {
    onResult(result);
  });
  return null;
};
describe('useNetwork', function () {
  it('returns online state and derived isOffline flag', (0, _asyncToGenerator2.default)(function* () {
    var store = createMockStore({
      network: {
        isOnline: true,
        isSyncing: false
      }
    });
    var result;
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_reactRedux.Provider, {
      store: store,
      children: (0, _jsxRuntime.jsx)(TestComponent, {
        onResult: function onResult(value) {
          return result = value;
        }
      })
    }));
    yield (0, _reactNative.waitFor)(function () {
      expect(result.isOnline).toBe(true);
      expect(result.isOffline).toBe(false);
      expect(result.isSyncing).toBe(false);
    });
  }));
  it('returns offline state', (0, _asyncToGenerator2.default)(function* () {
    var store = createMockStore({
      network: {
        isOnline: false,
        isSyncing: false
      }
    });
    var result;
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_reactRedux.Provider, {
      store: store,
      children: (0, _jsxRuntime.jsx)(TestComponent, {
        onResult: function onResult(value) {
          return result = value;
        }
      })
    }));
    yield (0, _reactNative.waitFor)(function () {
      expect(result.isOnline).toBe(false);
      expect(result.isOffline).toBe(true);
    });
  }));
  it('returns syncing state', (0, _asyncToGenerator2.default)(function* () {
    var store = createMockStore({
      network: {
        isOnline: true,
        isSyncing: true
      }
    });
    var result;
    (0, _reactNative.render)((0, _jsxRuntime.jsx)(_reactRedux.Provider, {
      store: store,
      children: (0, _jsxRuntime.jsx)(TestComponent, {
        onResult: function onResult(value) {
          return result = value;
        }
      })
    }));
    yield (0, _reactNative.waitFor)(function () {
      return expect(result.isSyncing).toBe(true);
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdE5hdGl2ZSIsIl9yZWFjdFJlZHV4IiwiX3Rvb2xraXQiLCJfdXNlTmV0d29yayIsIl9yb290UmVkdWNlciIsIl9qc3hSdW50aW1lIiwiY3JlYXRlTW9ja1N0b3JlIiwicHJlbG9hZGVkU3RhdGUiLCJhcmd1bWVudHMiLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJjb25maWd1cmVTdG9yZSIsInJlZHVjZXIiLCJyb290UmVkdWNlciIsIlRlc3RDb21wb25lbnQiLCJfcmVmIiwib25SZXN1bHQiLCJyZXN1bHQiLCJ1c2VOZXR3b3JrIiwiUmVhY3QiLCJ1c2VFZmZlY3QiLCJkZXNjcmliZSIsIml0IiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiZGVmYXVsdCIsInN0b3JlIiwibmV0d29yayIsImlzT25saW5lIiwiaXNTeW5jaW5nIiwicmVuZGVyIiwianN4IiwiUHJvdmlkZXIiLCJjaGlsZHJlbiIsInZhbHVlIiwid2FpdEZvciIsImV4cGVjdCIsInRvQmUiLCJpc09mZmxpbmUiXSwic291cmNlcyI6WyJ1c2VOZXR3b3JrLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIHVzZU5ldHdvcmsgSG9vayBUZXN0c1xyXG4gKiBGaWxlOiB1c2VOZXR3b3JrLnRlc3QuanNcclxuICovXHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHJlbmRlciwgd2FpdEZvciB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QtbmF0aXZlJztcclxuaW1wb3J0IHsgUHJvdmlkZXIgfSBmcm9tICdyZWFjdC1yZWR1eCc7XHJcbmltcG9ydCB7IGNvbmZpZ3VyZVN0b3JlIH0gZnJvbSAnQHJlZHV4anMvdG9vbGtpdCc7XHJcbmltcG9ydCB1c2VOZXR3b3JrIGZyb20gJ0Bob29rcy91c2VOZXR3b3JrJztcclxuaW1wb3J0IHJvb3RSZWR1Y2VyIGZyb20gJ0BzdG9yZS9yb290UmVkdWNlcic7XHJcblxyXG5jb25zdCBjcmVhdGVNb2NrU3RvcmUgPSAocHJlbG9hZGVkU3RhdGUgPSB7fSkgPT5cclxuICBjb25maWd1cmVTdG9yZSh7XHJcbiAgICByZWR1Y2VyOiByb290UmVkdWNlcixcclxuICAgIHByZWxvYWRlZFN0YXRlLFxyXG4gIH0pO1xyXG5cclxuY29uc3QgVGVzdENvbXBvbmVudCA9ICh7IG9uUmVzdWx0IH0pID0+IHtcclxuICBjb25zdCByZXN1bHQgPSB1c2VOZXR3b3JrKCk7XHJcblxyXG4gIFJlYWN0LnVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBvblJlc3VsdChyZXN1bHQpO1xyXG4gIH0pO1xyXG5cclxuICByZXR1cm4gbnVsbDtcclxufTtcclxuXHJcbmRlc2NyaWJlKCd1c2VOZXR3b3JrJywgKCkgPT4ge1xyXG4gIGl0KCdyZXR1cm5zIG9ubGluZSBzdGF0ZSBhbmQgZGVyaXZlZCBpc09mZmxpbmUgZmxhZycsIGFzeW5jICgpID0+IHtcclxuICAgIGNvbnN0IHN0b3JlID0gY3JlYXRlTW9ja1N0b3JlKHtcclxuICAgICAgbmV0d29yazogeyBpc09ubGluZTogdHJ1ZSwgaXNTeW5jaW5nOiBmYWxzZSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHJlc3VsdDtcclxuICAgIHJlbmRlcihcclxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XHJcbiAgICAgICAgPFRlc3RDb21wb25lbnQgb25SZXN1bHQ9eyh2YWx1ZSkgPT4gKHJlc3VsdCA9IHZhbHVlKX0gLz5cclxuICAgICAgPC9Qcm92aWRlcj5cclxuICAgICk7XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNPbmxpbmUpLnRvQmUodHJ1ZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNPZmZsaW5lKS50b0JlKGZhbHNlKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc1N5bmNpbmcpLnRvQmUoZmFsc2UpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZXR1cm5zIG9mZmxpbmUgc3RhdGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBzdG9yZSA9IGNyZWF0ZU1vY2tTdG9yZSh7XHJcbiAgICAgIG5ldHdvcms6IHsgaXNPbmxpbmU6IGZhbHNlLCBpc1N5bmNpbmc6IGZhbHNlIH0sXHJcbiAgICB9KTtcclxuXHJcbiAgICBsZXQgcmVzdWx0O1xyXG4gICAgcmVuZGVyKFxyXG4gICAgICA8UHJvdmlkZXIgc3RvcmU9e3N0b3JlfT5cclxuICAgICAgICA8VGVzdENvbXBvbmVudCBvblJlc3VsdD17KHZhbHVlKSA9PiAocmVzdWx0ID0gdmFsdWUpfSAvPlxyXG4gICAgICA8L1Byb3ZpZGVyPlxyXG4gICAgKTtcclxuXHJcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5pc09ubGluZSkudG9CZShmYWxzZSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuaXNPZmZsaW5lKS50b0JlKHRydWUpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZXR1cm5zIHN5bmNpbmcgc3RhdGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBjb25zdCBzdG9yZSA9IGNyZWF0ZU1vY2tTdG9yZSh7XHJcbiAgICAgIG5ldHdvcms6IHsgaXNPbmxpbmU6IHRydWUsIGlzU3luY2luZzogdHJ1ZSB9LFxyXG4gICAgfSk7XHJcblxyXG4gICAgbGV0IHJlc3VsdDtcclxuICAgIHJlbmRlcihcclxuICAgICAgPFByb3ZpZGVyIHN0b3JlPXtzdG9yZX0+XHJcbiAgICAgICAgPFRlc3RDb21wb25lbnQgb25SZXN1bHQ9eyh2YWx1ZSkgPT4gKHJlc3VsdCA9IHZhbHVlKX0gLz5cclxuICAgICAgPC9Qcm92aWRlcj5cclxuICAgICk7XHJcblxyXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiBleHBlY3QocmVzdWx0LmlzU3luY2luZykudG9CZSh0cnVlKSk7XHJcbiAgfSk7XHJcbn0p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