{"version":3,"names":["_getJestObj","mock","getQueue","jest","fn","handleError","logger","info","error","debug","warn","_interopRequireDefault","require","default","_asyncToGenerator2","_errors","_logging","_queue","_hydration","_require","describe","beforeEach","clearAllMocks","it","queue","id","url","mockResolvedValue","result","hydrate","expect","toEqual","toHaveBeenCalled","toHaveBeenCalledWith","count","not","resolves","mockRejectedValue","Error"],"sources":["hydration.test.js"],"sourcesContent":["/**\r\n * Hydration Tests\r\n * File: hydration.test.js\r\n */\r\nimport { handleError } from '@errors';\r\nimport { logger } from '@logging';\r\nimport { getQueue } from '@offline/queue';\r\nimport { hydrate } from '@offline/hydration';\r\n\r\njest.mock('@offline/queue', () => ({\r\n  getQueue: jest.fn(),\r\n}));\r\n\r\njest.mock('@errors', () => ({\r\n  handleError: jest.fn(),\r\n}));\r\n\r\njest.mock('@logging', () => ({\r\n  logger: { info: jest.fn(), error: jest.fn(), debug: jest.fn(), warn: jest.fn() },\r\n}));\r\n\r\ndescribe('Hydration', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('hydrate', () => {\r\n    it('hydrates queue from storage', async () => {\r\n      const queue = [\r\n        { id: '1', url: '/api/test1' },\r\n        { id: '2', url: '/api/test2' },\r\n      ];\r\n      getQueue.mockResolvedValue(queue);\r\n\r\n      const result = await hydrate();\r\n\r\n      expect(result).toEqual({ queue });\r\n      expect(getQueue).toHaveBeenCalled();\r\n      expect(logger.info).toHaveBeenCalledWith('Hydrated offline queue', { count: 2 });\r\n      expect(handleError).not.toHaveBeenCalled();\r\n    });\r\n\r\n    it('returns empty queue when no items exist', async () => {\r\n      getQueue.mockResolvedValue([]);\r\n      await expect(hydrate()).resolves.toEqual({ queue: [] });\r\n      expect(logger.info).toHaveBeenCalledWith('Hydrated offline queue', { count: 0 });\r\n    });\r\n\r\n    it('handles errors gracefully (returns empty queue + reports)', async () => {\r\n      getQueue.mockRejectedValue(new Error('Storage error'));\r\n\r\n      const result = await hydrate();\r\n\r\n      expect(result).toEqual({ queue: [] });\r\n      expect(handleError).toHaveBeenCalled();\r\n    });\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}