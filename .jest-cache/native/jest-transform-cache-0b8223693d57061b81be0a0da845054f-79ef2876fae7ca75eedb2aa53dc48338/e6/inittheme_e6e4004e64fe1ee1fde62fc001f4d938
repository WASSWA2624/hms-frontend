1ba948e5bc23a5506ff3d028246c3b25
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initTheme = initTheme;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _store = _interopRequireDefault(require("../store"));
var _ui = require("../store/slices/ui.slice");
var _storage = require("../services/storage");
var _logging = require("../logging");
function initTheme() {
  return _initTheme.apply(this, arguments);
}
function _initTheme() {
  _initTheme = (0, _asyncToGenerator2.default)(function* () {
    try {
      var savedTheme = 'light';
      try {
        var persistedTheme = yield _storage.async.getItem('theme_preference');
        if (persistedTheme && (persistedTheme === 'light' || persistedTheme === 'dark')) {
          savedTheme = persistedTheme;
        }
      } catch (error) {
        _logging.logger.debug('Could not load persisted theme, using default', {
          error: error.message
        });
      }
      _store.default.dispatch(_ui.actions.setTheme(savedTheme));
      _logging.logger.info('Theme initialized successfully', {
        theme: savedTheme
      });
    } catch (error) {
      _logging.logger.error('Theme initialization failed', {
        error: error.message
      });
    }
  });
  return _initTheme.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3RvcmUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl91aSIsIl9zdG9yYWdlIiwiX2xvZ2dpbmciLCJpbml0VGhlbWUiLCJfaW5pdFRoZW1lIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkZWZhdWx0Iiwic2F2ZWRUaGVtZSIsInBlcnNpc3RlZFRoZW1lIiwiYXN5bmMiLCJnZXRJdGVtIiwiZXJyb3IiLCJsb2dnZXIiLCJkZWJ1ZyIsIm1lc3NhZ2UiLCJzdG9yZSIsImRpc3BhdGNoIiwiYWN0aW9ucyIsInNldFRoZW1lIiwiaW5mbyIsInRoZW1lIl0sInNvdXJjZXMiOlsiaW5pdC50aGVtZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVGhlbWUgSW5pdGlhbGl6YXRpb25cclxuICogRmlsZTogaW5pdC50aGVtZS5qc1xyXG4gKi9cclxuaW1wb3J0IHN0b3JlIGZyb20gJ0BzdG9yZSc7XHJcbmltcG9ydCB7IGFjdGlvbnMgfSBmcm9tICdAc3RvcmUvc2xpY2VzL3VpLnNsaWNlJztcclxuaW1wb3J0IHsgYXN5bmMgfSBmcm9tICdAc2VydmljZXMvc3RvcmFnZSc7XHJcbmltcG9ydCB7IGxvZ2dlciB9IGZyb20gJ0Bsb2dnaW5nJztcclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0VGhlbWUoKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFRyeSB0byBsb2FkIHBlcnNpc3RlZCB0aGVtZSBwcmVmZXJlbmNlXHJcbiAgICBsZXQgc2F2ZWRUaGVtZSA9ICdsaWdodCc7IC8vIGRlZmF1bHRcclxuICAgIFxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3QgcGVyc2lzdGVkVGhlbWUgPSBhd2FpdCBhc3luYy5nZXRJdGVtKCd0aGVtZV9wcmVmZXJlbmNlJyk7XHJcbiAgICAgIGlmIChwZXJzaXN0ZWRUaGVtZSAmJiAocGVyc2lzdGVkVGhlbWUgPT09ICdsaWdodCcgfHwgcGVyc2lzdGVkVGhlbWUgPT09ICdkYXJrJykpIHtcclxuICAgICAgICBzYXZlZFRoZW1lID0gcGVyc2lzdGVkVGhlbWU7XHJcbiAgICAgIH1cclxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgIC8vIElmIHN0b3JhZ2UgcmVhZCBmYWlscywgdXNlIGRlZmF1bHRcclxuICAgICAgbG9nZ2VyLmRlYnVnKCdDb3VsZCBub3QgbG9hZCBwZXJzaXN0ZWQgdGhlbWUsIHVzaW5nIGRlZmF1bHQnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgfVxyXG4gICAgXHJcbiAgICAvLyBTZXQgdGhlbWUgaW4gc3RvcmVcclxuICAgIHN0b3JlLmRpc3BhdGNoKGFjdGlvbnMuc2V0VGhlbWUoc2F2ZWRUaGVtZSkpO1xyXG4gICAgXHJcbiAgICBsb2dnZXIuaW5mbygnVGhlbWUgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5JywgeyB0aGVtZTogc2F2ZWRUaGVtZSB9KTtcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgbG9nZ2VyLmVycm9yKCdUaGVtZSBpbml0aWFsaXphdGlvbiBmYWlsZWQnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgLy8gVGhlbWUgZmFpbHVyZSBpcyBub3QgZmF0YWwgLSB1c2UgZGVmYXVsdFxyXG4gIH1cclxufVxyXG5cclxuIl0sIm1hcHBpbmdzIjoiOzs7Ozs7QUFJQSxJQUFBQSxNQUFBLEdBQUFDLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBQyxHQUFBLEdBQUFELE9BQUE7QUFDQSxJQUFBRSxRQUFBLEdBQUFGLE9BQUE7QUFDQSxJQUFBRyxRQUFBLEdBQUFILE9BQUE7QUFBa0MsU0FFWkksU0FBU0EsQ0FBQTtFQUFBLE9BQUFDLFVBQUEsQ0FBQUMsS0FBQSxPQUFBQyxTQUFBO0FBQUE7QUFBQSxTQUFBRixXQUFBO0VBQUFBLFVBQUEsT0FBQUcsa0JBQUEsQ0FBQUMsT0FBQSxFQUF4QixhQUEyQjtJQUNoQyxJQUFJO01BRUYsSUFBSUMsVUFBVSxHQUFHLE9BQU87TUFFeEIsSUFBSTtRQUNGLElBQU1DLGNBQWMsU0FBU0MsY0FBSyxDQUFDQyxPQUFPLENBQUMsa0JBQWtCLENBQUM7UUFDOUQsSUFBSUYsY0FBYyxLQUFLQSxjQUFjLEtBQUssT0FBTyxJQUFJQSxjQUFjLEtBQUssTUFBTSxDQUFDLEVBQUU7VUFDL0VELFVBQVUsR0FBR0MsY0FBYztRQUM3QjtNQUNGLENBQUMsQ0FBQyxPQUFPRyxLQUFLLEVBQUU7UUFFZEMsZUFBTSxDQUFDQyxLQUFLLENBQUMsK0NBQStDLEVBQUU7VUFBRUYsS0FBSyxFQUFFQSxLQUFLLENBQUNHO1FBQVEsQ0FBQyxDQUFDO01BQ3pGO01BR0FDLGNBQUssQ0FBQ0MsUUFBUSxDQUFDQyxXQUFPLENBQUNDLFFBQVEsQ0FBQ1gsVUFBVSxDQUFDLENBQUM7TUFFNUNLLGVBQU0sQ0FBQ08sSUFBSSxDQUFDLGdDQUFnQyxFQUFFO1FBQUVDLEtBQUssRUFBRWI7TUFBVyxDQUFDLENBQUM7SUFDdEUsQ0FBQyxDQUFDLE9BQU9JLEtBQUssRUFBRTtNQUNkQyxlQUFNLENBQUNELEtBQUssQ0FBQyw2QkFBNkIsRUFBRTtRQUFFQSxLQUFLLEVBQUVBLEtBQUssQ0FBQ0c7TUFBUSxDQUFDLENBQUM7SUFFdkU7RUFDRixDQUFDO0VBQUEsT0FBQVosVUFBQSxDQUFBQyxLQUFBLE9BQUFDLFNBQUE7QUFBQSIsImlnbm9yZUxpc3QiOltdfQ==