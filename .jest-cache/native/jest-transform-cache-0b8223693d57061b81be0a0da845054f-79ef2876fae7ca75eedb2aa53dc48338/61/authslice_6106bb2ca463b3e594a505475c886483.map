{"version":3,"names":["_toolkit","require","_auth","initialState","user","isAuthenticated","isLoading","errorCode","lastUpdated","login","createAsyncThunk","_ref2","_asyncToGenerator2","default","payload","_ref","rejectWithValue","loginUseCase","error","code","_x","_x2","apply","arguments","register","_ref4","_ref3","registerUseCase","_x3","_x4","logout","_ref6","_","_ref5","logoutUseCase","_x5","_x6","refreshSession","_ref8","_ref7","tokens","refreshSessionUseCase","_x7","_x8","loadCurrentUser","_ref0","_ref9","loadCurrentUserUseCase","_x9","_x0","authSlice","createSlice","name","reducers","clearAuth","state","clearAuthError","extraReducers","builder","addCase","pending","fulfilled","action","Boolean","Date","now","rejected","actions","exports","Object","assign","reducer","_default"],"sources":["auth.slice.js"],"sourcesContent":["/**\r\n * Auth Slice\r\n * Global auth state (user, status, error codes)\r\n * File: auth.slice.js\r\n */\r\nimport { createAsyncThunk, createSlice } from '@reduxjs/toolkit';\r\nimport {\r\n  loadCurrentUserUseCase,\r\n  loginUseCase,\r\n  logoutUseCase,\r\n  refreshSessionUseCase,\r\n  registerUseCase,\r\n} from '@features/auth';\r\n\r\nconst initialState = {\r\n  user: null,\r\n  isAuthenticated: false,\r\n  isLoading: false,\r\n  errorCode: null,\r\n  lastUpdated: null,\r\n};\r\n\r\nconst login = createAsyncThunk('auth/login', async (payload, { rejectWithValue }) => {\r\n  try {\r\n    const user = await loginUseCase(payload);\r\n    return user || null;\r\n  } catch (error) {\r\n    return rejectWithValue(error?.code || 'UNKNOWN_ERROR');\r\n  }\r\n});\r\n\r\nconst register = createAsyncThunk('auth/register', async (payload, { rejectWithValue }) => {\r\n  try {\r\n    const user = await registerUseCase(payload);\r\n    return user || null;\r\n  } catch (error) {\r\n    return rejectWithValue(error?.code || 'UNKNOWN_ERROR');\r\n  }\r\n});\r\n\r\nconst logout = createAsyncThunk('auth/logout', async (_, { rejectWithValue }) => {\r\n  try {\r\n    await logoutUseCase();\r\n    return true;\r\n  } catch (error) {\r\n    return rejectWithValue(error?.code || 'UNKNOWN_ERROR');\r\n  }\r\n});\r\n\r\nconst refreshSession = createAsyncThunk('auth/refresh', async (_, { rejectWithValue }) => {\r\n  try {\r\n    const tokens = await refreshSessionUseCase();\r\n    return tokens || null;\r\n  } catch (error) {\r\n    return rejectWithValue(error?.code || 'UNKNOWN_ERROR');\r\n  }\r\n});\r\n\r\nconst loadCurrentUser = createAsyncThunk('auth/loadCurrentUser', async (_, { rejectWithValue }) => {\r\n  try {\r\n    const user = await loadCurrentUserUseCase();\r\n    return user || null;\r\n  } catch (error) {\r\n    return rejectWithValue(error?.code || 'UNKNOWN_ERROR');\r\n  }\r\n});\r\n\r\nconst authSlice = createSlice({\r\n  name: 'auth',\r\n  initialState,\r\n  reducers: {\r\n    clearAuth: (state) => {\r\n      state.user = null;\r\n      state.isAuthenticated = false;\r\n      state.errorCode = null;\r\n    },\r\n    clearAuthError: (state) => {\r\n      state.errorCode = null;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      .addCase(login.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.errorCode = null;\r\n      })\r\n      .addCase(login.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.user = action.payload;\r\n        state.isAuthenticated = Boolean(action.payload);\r\n        state.lastUpdated = Date.now();\r\n      })\r\n      .addCase(login.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.errorCode = action.payload || 'UNKNOWN_ERROR';\r\n      })\r\n      .addCase(register.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.errorCode = null;\r\n      })\r\n      .addCase(register.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.user = action.payload;\r\n        state.isAuthenticated = Boolean(action.payload);\r\n        state.lastUpdated = Date.now();\r\n      })\r\n      .addCase(register.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.errorCode = action.payload || 'UNKNOWN_ERROR';\r\n      })\r\n      .addCase(logout.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.errorCode = null;\r\n      })\r\n      .addCase(logout.fulfilled, (state) => {\r\n        state.isLoading = false;\r\n        state.user = null;\r\n        state.isAuthenticated = false;\r\n        state.lastUpdated = Date.now();\r\n      })\r\n      .addCase(logout.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.errorCode = action.payload || 'UNKNOWN_ERROR';\r\n      })\r\n      .addCase(refreshSession.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.errorCode = null;\r\n      })\r\n      .addCase(refreshSession.fulfilled, (state) => {\r\n        state.isLoading = false;\r\n        state.isAuthenticated = true;\r\n        state.lastUpdated = Date.now();\r\n      })\r\n      .addCase(refreshSession.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.errorCode = action.payload || 'UNKNOWN_ERROR';\r\n      })\r\n      .addCase(loadCurrentUser.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.errorCode = null;\r\n      })\r\n      .addCase(loadCurrentUser.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.user = action.payload;\r\n        state.isAuthenticated = Boolean(action.payload);\r\n        state.lastUpdated = Date.now();\r\n      })\r\n      .addCase(loadCurrentUser.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.errorCode = action.payload || 'UNKNOWN_ERROR';\r\n      });\r\n  },\r\n});\r\n\r\nconst actions = {\r\n  ...authSlice.actions,\r\n  login,\r\n  register,\r\n  logout,\r\n  refreshSession,\r\n  loadCurrentUser,\r\n};\r\nconst reducer = authSlice.reducer;\r\n\r\nexport { actions, reducer };\r\nexport default { actions, reducer };\r\n"],"mappings":"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","ignoreList":[]}