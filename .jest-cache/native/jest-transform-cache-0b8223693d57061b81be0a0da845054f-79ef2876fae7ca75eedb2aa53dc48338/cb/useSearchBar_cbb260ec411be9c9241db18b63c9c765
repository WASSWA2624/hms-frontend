62c05535682054b9e6280d96aec7dbf7
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _hooks = require("../../../hooks");
var useSearchBar = function useSearchBar(_ref) {
  var _ref$value = _ref.value,
    value = _ref$value === void 0 ? '' : _ref$value,
    onChange = _ref.onChange,
    onChangeText = _ref.onChangeText,
    onSearch = _ref.onSearch,
    _ref$debounceMs = _ref.debounceMs,
    debounceMs = _ref$debounceMs === void 0 ? 300 : _ref$debounceMs;
  var _useState = (0, _react.useState)(value),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    localValue = _useState2[0],
    setLocalValue = _useState2[1];
  var debouncedValue = (0, _hooks.useDebounce)(localValue, debounceMs);
  var hasValue = localValue.length > 0;
  (0, _react.useEffect)(function () {
    setLocalValue(value);
  }, [value]);
  (0, _react.useEffect)(function () {
    if (onSearch && debouncedValue !== undefined && debouncedValue !== value) {
      onSearch(debouncedValue);
    }
  }, [debouncedValue, onSearch, value]);
  var handleChange = function handleChange(e) {
    var _ref2, _e$target$value, _e$target;
    var newValue = (_ref2 = (_e$target$value = e == null || (_e$target = e.target) == null ? void 0 : _e$target.value) != null ? _e$target$value : e) != null ? _ref2 : '';
    setLocalValue(newValue);
    if (onChange) {
      if (e && typeof e === 'object' && 'target' in e) {
        onChange(e);
      } else if (typeof e === 'string') {
        onChange(e);
      } else {
        onChange({
          target: {
            value: newValue
          }
        });
      }
    }
    if (onChangeText && typeof newValue === 'string') {
      onChangeText(newValue);
    }
  };
  var handleChangeText = function handleChangeText(newValue) {
    setLocalValue(newValue);
    if (onChangeText) {
      onChangeText(newValue);
    }
    if (onChange) {
      onChange({
        target: {
          value: newValue
        }
      });
    }
  };
  var handleClear = function handleClear() {
    setLocalValue('');
    if (onChange) {
      onChange({
        target: {
          value: ''
        }
      });
    }
    if (onChangeText) {
      onChangeText('');
    }
    if (onSearch) {
      onSearch('');
    }
  };
  var handleSubmit = function handleSubmit() {
    var currentValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : localValue;
    if (onSearch) {
      onSearch(currentValue);
    }
  };
  return {
    localValue: localValue,
    hasValue: hasValue,
    handleChange: handleChange,
    handleChangeText: handleChangeText,
    handleClear: handleClear,
    handleSubmit: handleSubmit
  };
};
var _default = exports.default = useSearchBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2hvb2tzIiwidXNlU2VhcmNoQmFyIiwiX3JlZiIsIl9yZWYkdmFsdWUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwib25DaGFuZ2VUZXh0Iiwib25TZWFyY2giLCJfcmVmJGRlYm91bmNlTXMiLCJkZWJvdW5jZU1zIiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsImxvY2FsVmFsdWUiLCJzZXRMb2NhbFZhbHVlIiwiZGVib3VuY2VkVmFsdWUiLCJ1c2VEZWJvdW5jZSIsImhhc1ZhbHVlIiwibGVuZ3RoIiwidXNlRWZmZWN0IiwidW5kZWZpbmVkIiwiaGFuZGxlQ2hhbmdlIiwiZSIsIl9yZWYyIiwiX2UkdGFyZ2V0JHZhbHVlIiwiX2UkdGFyZ2V0IiwibmV3VmFsdWUiLCJ0YXJnZXQiLCJoYW5kbGVDaGFuZ2VUZXh0IiwiaGFuZGxlQ2xlYXIiLCJoYW5kbGVTdWJtaXQiLCJjdXJyZW50VmFsdWUiLCJhcmd1bWVudHMiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ1c2VTZWFyY2hCYXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIHVzZVNlYXJjaEJhciBIb29rXHJcbiAqIFNoYXJlZCBsb2dpYyBmb3IgU2VhcmNoQmFyIHBhdHRlcm4gYWNyb3NzIGFsbCBwbGF0Zm9ybXNcclxuICogRmlsZTogdXNlU2VhcmNoQmFyLmpzXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlRGVib3VuY2UgfSBmcm9tICdAaG9va3MnO1xyXG5cclxuLyoqXHJcbiAqIEhvb2sgZm9yIFNlYXJjaEJhciBjb21wb25lbnQgbG9naWNcclxuICogQHBhcmFtIHtPYmplY3R9IHBhcmFtcyAtIEhvb2sgcGFyYW1ldGVyc1xyXG4gKiBAcGFyYW0ge3N0cmluZ30gcGFyYW1zLnZhbHVlIC0gSW5pdGlhbCBzZWFyY2ggdmFsdWVcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGFyYW1zLm9uQ2hhbmdlIC0gQ2hhbmdlIGhhbmRsZXIgKHdlYilcclxuICogQHBhcmFtIHtGdW5jdGlvbn0gcGFyYW1zLm9uQ2hhbmdlVGV4dCAtIENoYW5nZSBoYW5kbGVyIChuYXRpdmUpXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBhcmFtcy5vblNlYXJjaCAtIFNlYXJjaCBoYW5kbGVyIChjYWxsZWQgb24gZGVib3VuY2VkIHZhbHVlIGNoYW5nZSlcclxuICogQHBhcmFtIHtudW1iZXJ9IHBhcmFtcy5kZWJvdW5jZU1zIC0gRGVib3VuY2UgZGVsYXkgaW4gbWlsbGlzZWNvbmRzXHJcbiAqIEByZXR1cm5zIHtPYmplY3R9IFNlYXJjaEJhciBzdGF0ZSBhbmQgaGFuZGxlcnNcclxuICovXHJcbmNvbnN0IHVzZVNlYXJjaEJhciA9ICh7XHJcbiAgdmFsdWUgPSAnJyxcclxuICBvbkNoYW5nZSxcclxuICBvbkNoYW5nZVRleHQsXHJcbiAgb25TZWFyY2gsXHJcbiAgZGVib3VuY2VNcyA9IDMwMCxcclxufSkgPT4ge1xyXG4gIGNvbnN0IFtsb2NhbFZhbHVlLCBzZXRMb2NhbFZhbHVlXSA9IHVzZVN0YXRlKHZhbHVlKTtcclxuICBjb25zdCBkZWJvdW5jZWRWYWx1ZSA9IHVzZURlYm91bmNlKGxvY2FsVmFsdWUsIGRlYm91bmNlTXMpO1xyXG4gIGNvbnN0IGhhc1ZhbHVlID0gbG9jYWxWYWx1ZS5sZW5ndGggPiAwO1xyXG5cclxuICAvLyBTeW5jIGxvY2FsIHZhbHVlIHdpdGggcHJvcCB2YWx1ZVxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICBzZXRMb2NhbFZhbHVlKHZhbHVlKTtcclxuICB9LCBbdmFsdWVdKTtcclxuXHJcbiAgLy8gVHJpZ2dlciBvblNlYXJjaCB3aGVuIGRlYm91bmNlZCB2YWx1ZSBjaGFuZ2VzXHJcbiAgLy8gQ2FsbCBvblNlYXJjaCB3aGVuIGRlYm91bmNlZCB2YWx1ZSBjaGFuZ2VzIGFuZCBkaWZmZXJzIGZyb20gaW5pdGlhbCBwcm9wIHZhbHVlXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIGlmIChvblNlYXJjaCAmJiBkZWJvdW5jZWRWYWx1ZSAhPT0gdW5kZWZpbmVkICYmIGRlYm91bmNlZFZhbHVlICE9PSB2YWx1ZSkge1xyXG4gICAgICBvblNlYXJjaChkZWJvdW5jZWRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfSwgW2RlYm91bmNlZFZhbHVlLCBvblNlYXJjaCwgdmFsdWVdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2hhbmdlID0gKGUpID0+IHtcclxuICAgIGNvbnN0IG5ld1ZhbHVlID0gZT8udGFyZ2V0Py52YWx1ZSA/PyBlID8/ICcnO1xyXG4gICAgc2V0TG9jYWxWYWx1ZShuZXdWYWx1ZSk7XHJcbiAgICAvLyBBbHdheXMgY2FsbCBvbkNoYW5nZSBpZiBwcm92aWRlZCAod2ViKVxyXG4gICAgaWYgKG9uQ2hhbmdlKSB7XHJcbiAgICAgIC8vIElmIGUgaXMgYWxyZWFkeSBhbiBldmVudCBvYmplY3Qgd2l0aCB0YXJnZXQsIHBhc3MgaXQgdGhyb3VnaFxyXG4gICAgICAvLyBPdGhlcndpc2UsIGlmIGl0J3MgYSBzdHJpbmcsIHBhc3MgdGhlIHN0cmluZyBkaXJlY3RseSAodGVzdCBleHBlY3RhdGlvbilcclxuICAgICAgLy8gT3RoZXJ3aXNlLCBjcmVhdGUgYW4gZXZlbnQgb2JqZWN0XHJcbiAgICAgIGlmIChlICYmIHR5cGVvZiBlID09PSAnb2JqZWN0JyAmJiAndGFyZ2V0JyBpbiBlKSB7XHJcbiAgICAgICAgb25DaGFuZ2UoZSk7XHJcbiAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgb25DaGFuZ2UoZSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb25DaGFuZ2UoeyB0YXJnZXQ6IHsgdmFsdWU6IG5ld1ZhbHVlIH0gfSk7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIC8vIEFsd2F5cyBjYWxsIG9uQ2hhbmdlVGV4dCBpZiBwcm92aWRlZCAobmF0aXZlKVxyXG4gICAgaWYgKG9uQ2hhbmdlVGV4dCAmJiB0eXBlb2YgbmV3VmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgIG9uQ2hhbmdlVGV4dChuZXdWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2hhbmdlVGV4dCA9IChuZXdWYWx1ZSkgPT4ge1xyXG4gICAgc2V0TG9jYWxWYWx1ZShuZXdWYWx1ZSk7XHJcbiAgICBpZiAob25DaGFuZ2VUZXh0KSB7XHJcbiAgICAgIG9uQ2hhbmdlVGV4dChuZXdWYWx1ZSk7XHJcbiAgICB9XHJcbiAgICBpZiAob25DaGFuZ2UpIHtcclxuICAgICAgb25DaGFuZ2UoeyB0YXJnZXQ6IHsgdmFsdWU6IG5ld1ZhbHVlIH0gfSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlQ2xlYXIgPSAoKSA9PiB7XHJcbiAgICBzZXRMb2NhbFZhbHVlKCcnKTtcclxuICAgIGlmIChvbkNoYW5nZSkge1xyXG4gICAgICBvbkNoYW5nZSh7IHRhcmdldDogeyB2YWx1ZTogJycgfSB9KTtcclxuICAgIH1cclxuICAgIGlmIChvbkNoYW5nZVRleHQpIHtcclxuICAgICAgb25DaGFuZ2VUZXh0KCcnKTtcclxuICAgIH1cclxuICAgIGlmIChvblNlYXJjaCkge1xyXG4gICAgICBvblNlYXJjaCgnJyk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgY29uc3QgaGFuZGxlU3VibWl0ID0gKGN1cnJlbnRWYWx1ZSA9IGxvY2FsVmFsdWUpID0+IHtcclxuICAgIGlmIChvblNlYXJjaCkge1xyXG4gICAgICBvblNlYXJjaChjdXJyZW50VmFsdWUpO1xyXG4gICAgfVxyXG4gIH07XHJcblxyXG4gIHJldHVybiB7XHJcbiAgICBsb2NhbFZhbHVlLFxyXG4gICAgaGFzVmFsdWUsXHJcbiAgICBoYW5kbGVDaGFuZ2UsXHJcbiAgICBoYW5kbGVDaGFuZ2VUZXh0LFxyXG4gICAgaGFuZGxlQ2xlYXIsXHJcbiAgICBoYW5kbGVTdWJtaXQsXHJcbiAgfTtcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IHVzZVNlYXJjaEJhcjtcclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBTUEsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRCxPQUFBO0FBWUEsSUFBTUUsWUFBWSxHQUFHLFNBQWZBLFlBQVlBLENBQUFDLElBQUEsRUFNWjtFQUFBLElBQUFDLFVBQUEsR0FBQUQsSUFBQSxDQUxKRSxLQUFLO0lBQUxBLEtBQUssR0FBQUQsVUFBQSxjQUFHLEVBQUUsR0FBQUEsVUFBQTtJQUNWRSxRQUFRLEdBQUFILElBQUEsQ0FBUkcsUUFBUTtJQUNSQyxZQUFZLEdBQUFKLElBQUEsQ0FBWkksWUFBWTtJQUNaQyxRQUFRLEdBQUFMLElBQUEsQ0FBUkssUUFBUTtJQUFBQyxlQUFBLEdBQUFOLElBQUEsQ0FDUk8sVUFBVTtJQUFWQSxVQUFVLEdBQUFELGVBQUEsY0FBRyxHQUFHLEdBQUFBLGVBQUE7RUFFaEIsSUFBQUUsU0FBQSxHQUFvQyxJQUFBQyxlQUFRLEVBQUNQLEtBQUssQ0FBQztJQUFBUSxVQUFBLE9BQUFDLGVBQUEsQ0FBQUMsT0FBQSxFQUFBSixTQUFBO0lBQTVDSyxVQUFVLEdBQUFILFVBQUE7SUFBRUksYUFBYSxHQUFBSixVQUFBO0VBQ2hDLElBQU1LLGNBQWMsR0FBRyxJQUFBQyxrQkFBVyxFQUFDSCxVQUFVLEVBQUVOLFVBQVUsQ0FBQztFQUMxRCxJQUFNVSxRQUFRLEdBQUdKLFVBQVUsQ0FBQ0ssTUFBTSxHQUFHLENBQUM7RUFHdEMsSUFBQUMsZ0JBQVMsRUFBQyxZQUFNO0lBQ2RMLGFBQWEsQ0FBQ1osS0FBSyxDQUFDO0VBQ3RCLENBQUMsRUFBRSxDQUFDQSxLQUFLLENBQUMsQ0FBQztFQUlYLElBQUFpQixnQkFBUyxFQUFDLFlBQU07SUFDZCxJQUFJZCxRQUFRLElBQUlVLGNBQWMsS0FBS0ssU0FBUyxJQUFJTCxjQUFjLEtBQUtiLEtBQUssRUFB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