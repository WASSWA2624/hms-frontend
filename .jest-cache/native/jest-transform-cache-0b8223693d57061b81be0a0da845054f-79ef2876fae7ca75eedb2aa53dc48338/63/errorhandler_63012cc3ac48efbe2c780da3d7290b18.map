{"version":3,"names":["en","logger","cov_11u53ja5ic","s","getNestedValue","obj","path","f","String","split","reduce","current","key","b","undefined","getSafeMessageForCode","code","extractErrorCode","message","startsWith","parts","lastPart","length","toUpperCase","replace","messageLower","toLowerCase","includes","normalizeError","error","_error$message","safeMessage","severity","name","status","statusCode","extractedCode","rawMessage","trim","handleError","context","arguments","normalized"],"sources":["error.handler.js"],"sourcesContent":["/**\r\n * Error Handler\r\n * Normalizes errors to domain-safe objects\r\n * File: error.handler.js\r\n */\r\nimport en from '@i18n/locales/en.json';\r\nimport { logger } from '@logging';\r\n\r\nconst getNestedValue = (obj, path) => {\r\n  return String(path)\r\n    .split('.')\r\n    .reduce((current, key) => (current && current[key] !== undefined ? current[key] : undefined), obj);\r\n};\r\n\r\nconst getSafeMessageForCode = (code) => {\r\n  return (\r\n    getNestedValue(en, `errors.codes.${code}`) ||\r\n    getNestedValue(en, 'errors.codes.UNKNOWN_ERROR') ||\r\n    'UNKNOWN_ERROR'\r\n  );\r\n};\r\n\r\n/**\r\n * Extract error code from backend message\r\n * Backend may send translation keys like \"errors.auth.invalid_credentials\"\r\n * or already translated messages like \"Invalid credentials\"\r\n */\r\nconst extractErrorCode = (message) => {\r\n  if (!message || typeof message !== 'string') {\r\n    return 'UNKNOWN_ERROR';\r\n  }\r\n\r\n  // If message is a translation key (starts with \"errors.\")\r\n  if (message.startsWith('errors.')) {\r\n    // Extract the last part as code\r\n    // \"errors.auth.invalid_credentials\" -> \"INVALID_CREDENTIALS\"\r\n    // \"errors.auth.multiple_tenants\" -> \"MULTIPLE_TENANTS\"\r\n    const parts = message.split('.');\r\n    const lastPart = parts[parts.length - 1];\r\n    // Convert snake_case to UPPER_SNAKE_CASE\r\n    return lastPart.toUpperCase().replace(/-/g, '_');\r\n  }\r\n\r\n  // Map common translated messages to codes\r\n  const messageLower = message.toLowerCase();\r\n  if (messageLower.includes('invalid credential')) {\r\n    return 'INVALID_CREDENTIALS';\r\n  }\r\n  if (messageLower.includes('authentication required') || messageLower.includes('unauthorized')) {\r\n    return 'UNAUTHORIZED';\r\n  }\r\n  if (messageLower.includes('access denied') || messageLower.includes('forbidden') || messageLower.includes('insufficient permission')) {\r\n    return 'FORBIDDEN';\r\n  }\r\n  if (messageLower.includes('multiple tenant') || messageLower.includes('tenant selection')) {\r\n    return 'MULTIPLE_TENANTS';\r\n  }\r\n\r\n  return 'UNKNOWN_ERROR';\r\n};\r\n\r\nconst normalizeError = (error) => {\r\n  if (!error) {\r\n    const safeMessage = getSafeMessageForCode('UNKNOWN_ERROR');\r\n    return {\r\n      code: 'UNKNOWN_ERROR',\r\n      message: safeMessage,\r\n      safeMessage,\r\n      severity: 'error',\r\n    };\r\n  }\r\n\r\n  // If error is already normalized (has code property), return as-is\r\n  if (error.code && typeof error.code === 'string' && error.code !== 'UNKNOWN_ERROR') {\r\n    return error;\r\n  }\r\n\r\n  // Network errors (browser often throws TypeError with \"Failed to fetch\")\r\n  if (\r\n    error.name === 'NetworkError' ||\r\n    error.message?.includes('network') ||\r\n    (typeof error.message === 'string' && error.message.toLowerCase().includes('failed to fetch'))\r\n  ) {\r\n    const safeMessage = getSafeMessageForCode('NETWORK_ERROR');\r\n    return {\r\n      code: 'NETWORK_ERROR',\r\n      message: safeMessage,\r\n      safeMessage,\r\n      severity: 'warning',\r\n    };\r\n  }\r\n\r\n  // API errors\r\n  if (error.status || error.statusCode) {\r\n    const status = error.status || error.statusCode;\r\n    \r\n    // Extract error code from backend message if available\r\n    const extractedCode = error.message ? extractErrorCode(error.message) : null;\r\n    \r\n    if (status === 401) {\r\n      // Prefer INVALID_CREDENTIALS for login errors, UNAUTHORIZED for general auth errors\r\n      const code = extractedCode || 'UNAUTHORIZED';\r\n      const safeMessage = getSafeMessageForCode(code);\r\n      const rawMessage = error.message || safeMessage;\r\n      return {\r\n        code,\r\n        message: rawMessage,\r\n        safeMessage,\r\n        severity: 'error',\r\n      };\r\n    }\r\n    if (status === 403) {\r\n      const code = extractedCode || 'FORBIDDEN';\r\n      const safeMessage = getSafeMessageForCode(code);\r\n      const rawMessage = error.message || safeMessage;\r\n      return {\r\n        code,\r\n        message: rawMessage,\r\n        safeMessage,\r\n        severity: 'error',\r\n      };\r\n    }\r\n    if (status >= 500) {\r\n      const code = extractedCode || 'SERVER_ERROR';\r\n      const safeMessage = getSafeMessageForCode(code);\r\n      const rawMessage = error.message || safeMessage;\r\n      return {\r\n        code,\r\n        message: rawMessage,\r\n        safeMessage,\r\n        severity: 'error',\r\n      };\r\n    }\r\n    \r\n    // For other status codes, use extracted code or default\r\n    if (extractedCode && extractedCode !== 'UNKNOWN_ERROR') {\r\n      const safeMessage = getSafeMessageForCode(extractedCode);\r\n      const rawMessage = error.message || safeMessage;\r\n      return {\r\n        code: extractedCode,\r\n        message: rawMessage,\r\n        safeMessage,\r\n        severity: 'error',\r\n      };\r\n    }\r\n  }\r\n\r\n  // Extract code from message if no explicit code provided\r\n  const code = error.code || (error.message ? extractErrorCode(error.message) : 'UNKNOWN_ERROR');\r\n  const safeMessage = getSafeMessageForCode(code);\r\n  const rawMessage =\r\n    typeof error.message === 'string' && error.message.trim()\r\n      ? error.message.trim()\r\n      : safeMessage;\r\n\r\n  // Default\r\n  return {\r\n    code,\r\n    message: rawMessage,\r\n    safeMessage,\r\n    severity: error.severity || 'error',\r\n  };\r\n};\r\n\r\nconst handleError = (error, context = {}) => {\r\n  const normalized = normalizeError(error);\r\n  logger.error('Handled error', {\r\n    code: normalized.code,\r\n    severity: normalized.severity,\r\n    context: context && typeof context === 'object' ? context : {},\r\n  });\r\n  return normalized;\r\n};\r\n\r\nexport { normalizeError, handleError };\r\n\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAKA,OAAOA,EAAE;AACT,SAASC,MAAM;AAAmBC,cAAA,GAAAC,CAAA;AAElC,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,GAAG,EAAEC,IAAI,EAAK;EAAAJ,cAAA,GAAAK,CAAA;EAAAL,cAAA,GAAAC,CAAA;EACpC,OAAOK,MAAM,CAACF,IAAI,CAAC,CAChBG,KAAK,CAAC,GAAG,CAAC,CACVC,MAAM,CAAC,UAACC,OAAO,EAAEC,GAAG,EAAM;IAAAV,cAAA,GAAAK,CAAA;IAAAL,cAAA,GAAAC,CAAA;IAAA,QAAAD,cAAA,GAAAW,CAAA,UAAAF,OAAO,MAAAT,cAAA,GAAAW,CAAA,UAAIF,OAAO,CAACC,GAAG,CAAC,KAAKE,SAAS,KAAAZ,cAAA,GAAAW,CAAA,UAAGF,OAAO,CAACC,GAAG,CAAC,KAAAV,cAAA,GAAAW,CAAA,UAAGC,SAAS;EAAD,CAAE,EAAET,GAAG,CAAC;AACtG,CAAC;AAACH,cAAA,GAAAC,CAAA;AAEF,IAAMY,qBAAqB,GAAG,SAAxBA,qBAAqBA,CAAIC,IAAI,EAAK;EAAAd,cAAA,GAAAK,CAAA;EAAAL,cAAA,GAAAC,CAAA;EACtC,OACE,CAAAD,cAAA,GAAAW,CAAA,UAAAT,cAAc,CAACJ,EAAE,EAAE,gBAAgBgB,IAAI,EAAE,CAAC,MAAAd,cAAA,GAAAW,CAAA,UAC1CT,cAAc,CAACJ,EAAE,EAAE,4BAA4B,CAAC,MAAAE,cAAA,GAAAW,CAAA,UAChD,eAAe;AAEnB,CAAC;AAACX,cAAA,GAAAC,CAAA;AAOF,IAAMc,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAIC,OAAO,EAAK;EAAAhB,cAAA,GAAAK,CAAA;EAAAL,cAAA,GAAAC,CAAA;EACpC,IAAI,CAAAD,cAAA,GAAAW,CAAA,WAACK,OAAO,MAAAhB,cAAA,GAAAW,CAAA,UAAI,OAAOK,OAAO,KAAK,QAAQ,GAAE;IAAAhB,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAC,CAAA;IAC3C,OAAO,eAAe;EACxB,CAAC;IAAAD,cAAA,GAAAW,CAAA;EAAA;EAAAX,cAAA,GAAAC,CAAA;EAGD,IAAIe,OAAO,CAACC,UAAU,CAAC,SAAS,CAAC,EAAE;IAAAjB,cAAA,GAAAW,CAAA;IAIjC,IAAMO,KAAK,IAAAlB,cAAA,GAAAC,CAAA,OAAGe,OAAO,CAACT,KAAK,CAAC,GAAG,CAAC;IAChC,IAAMY,QAAQ,IAAAnB,cAAA,GAAAC,CAAA,QAAGiB,KAAK,CAACA,KAAK,CAACE,MAAM,GAAG,CAAC,CAAC;IAACpB,cAAA,GAAAC,CAAA;IAEzC,OAAOkB,QAAQ,CAACE,WAAW,CAAC,CAAC,CAACC,OAAO,CAAC,IAAI,EAAE,GAAG,CAAC;EAClD,CAAC;IAAAtB,cAAA,GAAAW,CAAA;EAAA;EAGD,IAAMY,YAAY,IAAAvB,cAAA,GAAAC,CAAA,QAAGe,OAAO,CAACQ,WAAW,CAAC,CAAC;EAACxB,cAAA,GAAAC,CAAA;EAC3C,IAAIsB,YAAY,CAACE,QAAQ,CAAC,oBAAoB,CAAC,EAAE;IAAAzB,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAC,CAAA;IAC/C,OAAO,qBAAqB;EAC9B,CAAC;IAAAD,cAAA,GAAAW,CAAA;EAAA;EAAAX,cAAA,GAAAC,CAAA;EACD,IAAI,CAAAD,cAAA,GAAAW,CAAA,UAAAY,YAAY,CAACE,QAAQ,CAAC,yBAAyB,CAAC,MAAAzB,cAAA,GAAAW,CAAA,UAAIY,YAAY,CAACE,QAAQ,CAAC,cAAc,CAAC,GAAE;IAAAzB,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAC,CAAA;IAC7F,OAAO,cAAc;EACvB,CAAC;IAAAD,cAAA,GAAAW,CAAA;EAAA;EAAAX,cAAA,GAAAC,CAAA;EACD,IAAI,CAAAD,cAAA,GAAAW,CAAA,WAAAY,YAAY,CAACE,QAAQ,CAAC,eAAe,CAAC,MAAAzB,cAAA,GAAAW,CAAA,WAAIY,YAAY,CAACE,QAAQ,CAAC,WAAW,CAAC,MAAAzB,cAAA,GAAAW,CAAA,WAAIY,YAAY,CAACE,QAAQ,CAAC,yBAAyB,CAAC,GAAE;IAAAzB,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAC,CAAA;IACpI,OAAO,WAAW;EACpB,CAAC;IAAAD,cAAA,GAAAW,CAAA;EAAA;EAAAX,cAAA,GAAAC,CAAA;EACD,IAAI,CAAAD,cAAA,GAAAW,CAAA,WAAAY,YAAY,CAACE,QAAQ,CAAC,iBAAiB,CAAC,MAAAzB,cAAA,GAAAW,CAAA,WAAIY,YAAY,CAACE,QAAQ,CAAC,kBAAkB,CAAC,GAAE;IAAAzB,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAC,CAAA;IACzF,OAAO,kBAAkB;EAC3B,CAAC;IAAAD,cAAA,GAAAW,CAAA;EAAA;EAAAX,cAAA,GAAAC,CAAA;EAED,OAAO,eAAe;AACxB,CAAC;AAACD,cAAA,GAAAC,CAAA;AAEF,IAAMyB,cAAc,GAAG,SAAjBA,cAAcA,CAAIC,KAAK,EAAK;EAAA,IAAAC,cAAA;EAAA5B,cAAA,GAAAK,CAAA;EAAAL,cAAA,GAAAC,CAAA;EAChC,IAAI,CAAC0B,KAAK,EAAE;IAAA3B,cAAA,GAAAW,CAAA;IACV,IAAMkB,YAAW,IAAA7B,cAAA,GAAAC,CAAA,QAAGY,qBAAqB,CAAC,eAAe,CAAC;IAACb,cAAA,GAAAC,CAAA;IAC3D,OAAO;MACLa,IAAI,EAAE,eAAe;MACrBE,OAAO,EAAEa,YAAW;MACpBA,WAAW,EAAXA,YAAW;MACXC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;IAAA9B,cAAA,GAAAW,CAAA;EAAA;EAAAX,cAAA,GAAAC,CAAA;EAGD,IAAI,CAAAD,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACb,IAAI,MAAAd,cAAA,GAAAW,CAAA,WAAI,OAAOgB,KAAK,CAACb,IAAI,KAAK,QAAQ,MAAAd,cAAA,GAAAW,CAAA,WAAIgB,KAAK,CAACb,IAAI,KAAK,eAAe,GAAE;IAAAd,cAAA,GAAAW,CAAA;IAAAX,cAAA,GAAAC,CAAA;IAClF,OAAO0B,KAAK;EACd,CAAC;IAAA3B,cAAA,GAAAW,CAAA;EAAA;EAAAX,cAAA,GAAAC,CAAA;EAGD,IACE,CAAAD,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACI,IAAI,KAAK,cAAc,MAAA/B,cAAA,GAAAW,CAAA,YAAAiB,cAAA,GAC7BD,KAAK,CAACX,OAAO,aAAbY,cAAA,CAAeH,QAAQ,CAAC,SAAS,CAAC,KACjC,CAAAzB,cAAA,GAAAW,CAAA,kBAAOgB,KAAK,CAACX,OAAO,KAAK,QAAQ,MAAAhB,cAAA,GAAAW,CAAA,WAAIgB,KAAK,CAACX,OAAO,CAACQ,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,iBAAiB,CAAC,CAAC,EAC9F;IAAAzB,cAAA,GAAAW,CAAA;IACA,IAAMkB,aAAW,IAAA7B,cAAA,GAAAC,CAAA,QAAGY,qBAAqB,CAAC,eAAe,CAAC;IAACb,cAAA,GAAAC,CAAA;IAC3D,OAAO;MACLa,IAAI,EAAE,eAAe;MACrBE,OAAO,EAAEa,aAAW;MACpBA,WAAW,EAAXA,aAAW;MACXC,QAAQ,EAAE;IACZ,CAAC;EACH,CAAC;IAAA9B,cAAA,GAAAW,CAAA;EAAA;EAAAX,cAAA,GAAAC,CAAA;EAGD,IAAI,CAAAD,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACK,MAAM,MAAAhC,cAAA,GAAAW,CAAA,WAAIgB,KAAK,CAACM,UAAU,GAAE;IAAAjC,cAAA,GAAAW,CAAA;IACpC,IAAMqB,MAAM,IAAAhC,cAAA,GAAAC,CAAA,QAAG,CAAAD,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACK,MAAM,MAAAhC,cAAA,GAAAW,CAAA,WAAIgB,KAAK,CAACM,UAAU;IAG/C,IAAMC,aAAa,IAAAlC,cAAA,GAAAC,CAAA,QAAG0B,KAAK,CAACX,OAAO,IAAAhB,cAAA,GAAAW,CAAA,WAAGI,gBAAgB,CAACY,KAAK,CAACX,OAAO,CAAC,KAAAhB,cAAA,GAAAW,CAAA,WAAG,IAAI;IAACX,cAAA,GAAAC,CAAA;IAE7E,IAAI+B,MAAM,KAAK,GAAG,EAAE;MAAAhC,cAAA,GAAAW,CAAA;MAElB,IAAMG,KAAI,IAAAd,cAAA,GAAAC,CAAA,QAAG,CAAAD,cAAA,GAAAW,CAAA,WAAAuB,aAAa,MAAAlC,cAAA,GAAAW,CAAA,WAAI,cAAc;MAC5C,IAAMkB,aAAW,IAAA7B,cAAA,GAAAC,CAAA,QAAGY,qBAAqB,CAACC,KAAI,CAAC;MAC/C,IAAMqB,WAAU,IAAAnC,cAAA,GAAAC,CAAA,QAAG,CAAAD,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACX,OAAO,MAAAhB,cAAA,GAAAW,CAAA,WAAIkB,aAAW;MAAC7B,cAAA,GAAAC,CAAA;MAChD,OAAO;QACLa,IAAI,EAAJA,KAAI;QACJE,OAAO,EAAEmB,WAAU;QACnBN,WAAW,EAAXA,aAAW;QACXC,QAAQ,EAAE;MACZ,CAAC;IACH,CAAC;MAAA9B,cAAA,GAAAW,CAAA;IAAA;IAAAX,cAAA,GAAAC,CAAA;IACD,IAAI+B,MAAM,KAAK,GAAG,EAAE;MAAAhC,cAAA,GAAAW,CAAA;MAClB,IAAMG,MAAI,IAAAd,cAAA,GAAAC,CAAA,QAAG,CAAAD,cAAA,GAAAW,CAAA,WAAAuB,aAAa,MAAAlC,cAAA,GAAAW,CAAA,WAAI,WAAW;MACzC,IAAMkB,aAAW,IAAA7B,cAAA,GAAAC,CAAA,QAAGY,qBAAqB,CAACC,MAAI,CAAC;MAC/C,IAAMqB,YAAU,IAAAnC,cAAA,GAAAC,CAAA,QAAG,CAAAD,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACX,OAAO,MAAAhB,cAAA,GAAAW,CAAA,WAAIkB,aAAW;MAAC7B,cAAA,GAAAC,CAAA;MAChD,OAAO;QACLa,IAAI,EAAJA,MAAI;QACJE,OAAO,EAAEmB,YAAU;QACnBN,WAAW,EAAXA,aAAW;QACXC,QAAQ,EAAE;MACZ,CAAC;IACH,CAAC;MAAA9B,cAAA,GAAAW,CAAA;IAAA;IAAAX,cAAA,GAAAC,CAAA;IACD,IAAI+B,MAAM,IAAI,GAAG,EAAE;MAAAhC,cAAA,GAAAW,CAAA;MACjB,IAAMG,MAAI,IAAAd,cAAA,GAAAC,CAAA,QAAG,CAAAD,cAAA,GAAAW,CAAA,WAAAuB,aAAa,MAAAlC,cAAA,GAAAW,CAAA,WAAI,cAAc;MAC5C,IAAMkB,aAAW,IAAA7B,cAAA,GAAAC,CAAA,QAAGY,qBAAqB,CAACC,MAAI,CAAC;MAC/C,IAAMqB,YAAU,IAAAnC,cAAA,GAAAC,CAAA,QAAG,CAAAD,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACX,OAAO,MAAAhB,cAAA,GAAAW,CAAA,WAAIkB,aAAW;MAAC7B,cAAA,GAAAC,CAAA;MAChD,OAAO;QACLa,IAAI,EAAJA,MAAI;QACJE,OAAO,EAAEmB,YAAU;QACnBN,WAAW,EAAXA,aAAW;QACXC,QAAQ,EAAE;MACZ,CAAC;IACH,CAAC;MAAA9B,cAAA,GAAAW,CAAA;IAAA;IAAAX,cAAA,GAAAC,CAAA;IAGD,IAAI,CAAAD,cAAA,GAAAW,CAAA,WAAAuB,aAAa,MAAAlC,cAAA,GAAAW,CAAA,WAAIuB,aAAa,KAAK,eAAe,GAAE;MAAAlC,cAAA,GAAAW,CAAA;MACtD,IAAMkB,aAAW,IAAA7B,cAAA,GAAAC,CAAA,QAAGY,qBAAqB,CAACqB,aAAa,CAAC;MACxD,IAAMC,YAAU,IAAAnC,cAAA,GAAAC,CAAA,QAAG,CAAAD,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACX,OAAO,MAAAhB,cAAA,GAAAW,CAAA,WAAIkB,aAAW;MAAC7B,cAAA,GAAAC,CAAA;MAChD,OAAO;QACLa,IAAI,EAAEoB,aAAa;QACnBlB,OAAO,EAAEmB,YAAU;QACnBN,WAAW,EAAXA,aAAW;QACXC,QAAQ,EAAE;MACZ,CAAC;IACH,CAAC;MAAA9B,cAAA,GAAAW,CAAA;IAAA;EACH,CAAC;IAAAX,cAAA,GAAAW,CAAA;EAAA;EAGD,IAAMG,IAAI,IAAAd,cAAA,GAAAC,CAAA,QAAG,CAAAD,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACb,IAAI,MAAAd,cAAA,GAAAW,CAAA,WAAKgB,KAAK,CAACX,OAAO,IAAAhB,cAAA,GAAAW,CAAA,WAAGI,gBAAgB,CAACY,KAAK,CAACX,OAAO,CAAC,KAAAhB,cAAA,GAAAW,CAAA,WAAG,eAAe,EAAC;EAC9F,IAAMkB,WAAW,IAAA7B,cAAA,GAAAC,CAAA,QAAGY,qBAAqB,CAACC,IAAI,CAAC;EAC/C,IAAMqB,UAAU,IAAAnC,cAAA,GAAAC,CAAA,QACd,CAAAD,cAAA,GAAAW,CAAA,kBAAOgB,KAAK,CAACX,OAAO,KAAK,QAAQ,MAAAhB,cAAA,GAAAW,CAAA,WAAIgB,KAAK,CAACX,OAAO,CAACoB,IAAI,CAAC,CAAC,KAAApC,cAAA,GAAAW,CAAA,WACrDgB,KAAK,CAACX,OAAO,CAACoB,IAAI,CAAC,CAAC,KAAApC,cAAA,GAAAW,CAAA,WACpBkB,WAAW;EAAC7B,cAAA,GAAAC,CAAA;EAGlB,OAAO;IACLa,IAAI,EAAJA,IAAI;IACJE,OAAO,EAAEmB,UAAU;IACnBN,WAAW,EAAXA,WAAW;IACXC,QAAQ,EAAE,CAAA9B,cAAA,GAAAW,CAAA,WAAAgB,KAAK,CAACG,QAAQ,MAAA9B,cAAA,GAAAW,CAAA,WAAI,OAAO;EACrC,CAAC;AACH,CAAC;AAACX,cAAA,GAAAC,CAAA;AAEF,IAAMoC,WAAW,GAAG,SAAdA,WAAWA,CAAIV,KAAK,EAAmB;EAAA,IAAjBW,OAAO,GAAAC,SAAA,CAAAnB,MAAA,QAAAmB,SAAA,QAAA3B,SAAA,GAAA2B,SAAA,OAAAvC,cAAA,GAAAW,CAAA,WAAG,CAAC,CAAC;EAAAX,cAAA,GAAAK,CAAA;EACtC,IAAMmC,UAAU,IAAAxC,cAAA,GAAAC,CAAA,QAAGyB,cAAc,CAACC,KAAK,CAAC;EAAC3B,cAAA,GAAAC,CAAA;EACzCF,MAAM,CAAC4B,KAAK,CAAC,eAAe,EAAE;IAC5Bb,IAAI,EAAE0B,UAAU,CAAC1B,IAAI;IACrBgB,QAAQ,EAAEU,UAAU,CAACV,QAAQ;IAC7BQ,OAAO,EAAE,CAAAtC,cAAA,GAAAW,CAAA,WAAA2B,OAAO,MAAAtC,cAAA,GAAAW,CAAA,WAAI,OAAO2B,OAAO,KAAK,QAAQ,KAAAtC,cAAA,GAAAW,CAAA,WAAG2B,OAAO,KAAAtC,cAAA,GAAAW,CAAA,WAAG,CAAC,CAAC;EAChE,CAAC,CAAC;EAACX,cAAA,GAAAC,CAAA;EACH,OAAOuC,UAAU;AACnB,CAAC;AAED,SAASd,cAAc,EAAEW,WAAW","ignoreList":[]}