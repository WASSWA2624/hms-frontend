e5cd6b88e2ae1f4978bb7bf675a19f5d
var _errors = require("../../errors");
describe('Error Handling Layer', function () {
  beforeEach(function () {
    jest.spyOn(console, 'error').mockImplementation(function () {});
    jest.spyOn(console, 'warn').mockImplementation(function () {});
    jest.spyOn(console, 'info').mockImplementation(function () {});
    jest.spyOn(console, 'debug').mockImplementation(function () {});
  });
  afterEach(function () {
    console.error.mockRestore();
    console.warn.mockRestore();
    console.info.mockRestore();
    console.debug.mockRestore();
  });
  describe('normalizeError', function () {
    it('should handle null/undefined errors', function () {
      var result = (0, _errors.normalizeError)(null);
      expect(result).toMatchObject({
        code: 'UNKNOWN_ERROR',
        message: 'An unknown error occurred',
        severity: 'error'
      });
      expect(result.safeMessage).toBe('An unknown error occurred');
    });
    it('should normalize network errors', function () {
      var networkError = {
        name: 'NetworkError',
        message: 'Network request failed'
      };
      var result = (0, _errors.normalizeError)(networkError);
      expect(result).toMatchObject({
        code: 'NETWORK_ERROR',
        message: 'Network connection failed',
        severity: 'warning'
      });
      expect(result.safeMessage).toBe('Network connection failed');
    });
    it('should normalize network errors by message', function () {
      var networkError = {
        message: 'network connection timeout'
      };
      var result = (0, _errors.normalizeError)(networkError);
      expect(result.code).toBe('NETWORK_ERROR');
      expect(result.severity).toBe('warning');
    });
    it('should normalize 401 unauthorized errors', function () {
      var error = {
        status: 401,
        message: 'Unauthorized'
      };
      var result = (0, _errors.normalizeError)(error);
      expect(result).toMatchObject({
        code: 'UNAUTHORIZED',
        message: 'Authentication required',
        severity: 'error'
      });
      expect(result.safeMessage).toBe('Authentication required');
    });
    it('should normalize 403 forbidden errors', function () {
      var error = {
        status: 403,
        message: 'Forbidden'
      };
      var result = (0, _errors.normalizeError)(error);
      expect(result).toMatchObject({
        code: 'FORBIDDEN',
        message: 'Access denied',
        severity: 'error'
      });
      expect(result.safeMessage).toBe('Access denied');
    });
    it('should normalize 500+ server errors', function () {
      var error = {
        status: 500,
        message: 'Internal Server Error'
      };
      var result = (0, _errors.normalizeError)(error);
      expect(result).toMatchObject({
        code: 'SERVER_ERROR',
        message: 'Server error occurred',
        severity: 'error'
      });
      expect(result.safeMessage).toBe('Server error occurred');
    });
    it('should handle statusCode instead of status', function () {
      var error = {
        statusCode: 401
      };
      var result = (0, _errors.normalizeError)(error);
      expect(result.code).toBe('UNAUTHORIZED');
    });
    it('should use error code and message when available', function () {
      var error = {
        code: 'CUSTOM_ERROR',
        message: 'Custom error message',
        severity: 'warning'
      };
      var result = (0, _errors.normalizeError)(error);
      expect(result).toMatchObject({
        code: 'CUSTOM_ERROR',
        message: 'Custom error message',
        severity: 'warning'
      });
      expect(result.safeMessage).toBe('An unknown error occurred');
    });
    it('should default to UNKNOWN_ERROR for unrecognized errors', function () {
      var error = {
        message: 'Some error'
      };
      var result = (0, _errors.normalizeError)(error);
      expect(result.code).toBe('UNKNOWN_ERROR');
      expect(result.message).toBe('Some error');
      expect(result.severity).toBe('error');
    });
  });
  describe('handleError', function () {
    it('should normalize and log errors', function () {
      var error = {
        message: 'Test error',
        code: 'TEST_ERROR'
      };
      var context = {
        userId: '123'
      };
      var result = (0, _errors.handleError)(error, context);
      expect(console.error).toHaveBeenCalled();
      expect(result).toHaveProperty('code');
      expect(result).toHaveProperty('message');
      expect(result).toHaveProperty('severity');
    });
    it('should handle errors without context', function () {
      var error = {
        message: 'Test error'
      };
      var result = (0, _errors.handleError)(error);
      expect(console.error).toHaveBeenCalled();
      expect(result).toBeDefined();
    });
    it('should handle null errors', function () {
      var result = (0, _errors.handleError)(null);
      expect(console.error).toHaveBeenCalled();
      expect(result.code).toBe('UNKNOWN_ERROR');
    });
  });
  describe('FallbackUI', function () {
    it('should be a React component', function () {
      expect(_errors.FallbackUI).toBeDefined();
      expect(typeof _errors.FallbackUI).toBe('function');
    });
    it('should accept error and onRetry props', function () {
      var error = {
        message: 'Test error'
      };
      var onRetry = jest.fn();
      expect(function () {
        expect(_errors.FallbackUI).toBeDefined();
      }).not.toThrow();
    });
  });
  describe('ErrorBoundary', function () {
    it('should be a React component class', function () {
      expect(_errors.ErrorBoundary).toBeDefined();
      expect(typeof _errors.ErrorBoundary).toBe('function');
    });
    it('should have getDerivedStateFromError static method', function () {
      expect(_errors.ErrorBoundary.getDerivedStateFromError).toBeDefined();
      expect(typeof _errors.ErrorBoundary.getDerivedStateFromError).toBe('function');
    });
    it('should handle errors via getDerivedStateFromError', function () {
      var error = new Error('Test error');
      var state = _errors.ErrorBoundary.getDerivedStateFromError(error);
      expect(state).toEqual({
        hasError: true,
        error: error
      });
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXJyb3JzIiwicmVxdWlyZSIsImRlc2NyaWJlIiwiYmVmb3JlRWFjaCIsImplc3QiLCJzcHlPbiIsImNvbnNvbGUiLCJtb2NrSW1wbGVtZW50YXRpb24iLCJhZnRlckVhY2giLCJlcnJvciIsIm1vY2tSZXN0b3JlIiwid2FybiIsImluZm8iLCJkZWJ1ZyIsIml0IiwicmVzdWx0Iiwibm9ybWFsaXplRXJyb3IiLCJleHBlY3QiLCJ0b01hdGNoT2JqZWN0IiwiY29kZSIsIm1lc3NhZ2UiLCJzZXZlcml0eSIsInNhZmVNZXNzYWdlIiwidG9CZSIsIm5ldHdvcmtFcnJvciIsIm5hbWUiLCJzdGF0dXMiLCJzdGF0dXNDb2RlIiwiY29udGV4dCIsInVzZXJJZCIsImhhbmRsZUVycm9yIiwidG9IYXZlQmVlbkNhbGxlZCIsInRvSGF2ZVByb3BlcnR5IiwidG9CZURlZmluZWQiLCJGYWxsYmFja1VJIiwib25SZXRyeSIsImZuIiwibm90IiwidG9UaHJvdyIsIkVycm9yQm91bmRhcnkiLCJnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IiLCJFcnJvciIsInN0YXRlIiwidG9FcXVhbCIsImhhc0Vycm9yIl0sInNvdXJjZXMiOlsiZXJyb3JzLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEVycm9yIEhhbmRsaW5nIFRlc3RzXHJcbiAqIEZpbGU6IGVycm9ycy50ZXN0LmpzXHJcbiAqL1xyXG5pbXBvcnQgeyBub3JtYWxpemVFcnJvciwgaGFuZGxlRXJyb3IsIEVycm9yQm91bmRhcnksIEZhbGxiYWNrVUkgfSBmcm9tICdAZXJyb3JzJztcclxuXHJcbmRlc2NyaWJlKCdFcnJvciBIYW5kbGluZyBMYXllcicsICgpID0+IHtcclxuICBiZWZvcmVFYWNoKCgpID0+IHtcclxuICAgIGplc3Quc3B5T24oY29uc29sZSwgJ2Vycm9yJykubW9ja0ltcGxlbWVudGF0aW9uKCgpID0+IHt9KTtcclxuICAgIGplc3Quc3B5T24oY29uc29sZSwgJ3dhcm4nKS5tb2NrSW1wbGVtZW50YXRpb24oKCkgPT4ge30pO1xyXG4gICAgamVzdC5zcHlPbihjb25zb2xlLCAnaW5mbycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XHJcbiAgICBqZXN0LnNweU9uKGNvbnNvbGUsICdkZWJ1ZycpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yLm1vY2tSZXN0b3JlKCk7XHJcbiAgICBjb25zb2xlLndhcm4ubW9ja1Jlc3RvcmUoKTtcclxuICAgIGNvbnNvbGUuaW5mby5tb2NrUmVzdG9yZSgpO1xyXG4gICAgY29uc29sZS5kZWJ1Zy5tb2NrUmVzdG9yZSgpO1xyXG4gIH0pO1xyXG5cclxuICBkZXNjcmliZSgnbm9ybWFsaXplRXJyb3InLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBudWxsL3VuZGVmaW5lZCBlcnJvcnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5vcm1hbGl6ZUVycm9yKG51bGwpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b01hdGNoT2JqZWN0KHtcclxuICAgICAgICBjb2RlOiAnVU5LTk9XTl9FUlJPUicsXHJcbiAgICAgICAgbWVzc2FnZTogJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnLFxyXG4gICAgICAgIHNldmVyaXR5OiAnZXJyb3InLFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zYWZlTWVzc2FnZSkudG9CZSgnQW4gdW5rbm93biBlcnJvciBvY2N1cnJlZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBub3JtYWxpemUgbmV0d29yayBlcnJvcnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ldHdvcmtFcnJvciA9IHtcclxuICAgICAgICBuYW1lOiAnTmV0d29ya0Vycm9yJyxcclxuICAgICAgICBtZXNzYWdlOiAnTmV0d29yayByZXF1ZXN0IGZhaWxlZCcsXHJcbiAgICAgIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5vcm1hbGl6ZUVycm9yKG5ldHdvcmtFcnJvcik7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgIGNvZGU6ICdORVRXT1JLX0VSUk9SJyxcclxuICAgICAgICBtZXNzYWdlOiAnTmV0d29yayBjb25uZWN0aW9uIGZhaWxlZCcsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc2FmZU1lc3NhZ2UpLnRvQmUoJ05ldHdvcmsgY29ubmVjdGlvbiBmYWlsZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbm9ybWFsaXplIG5ldHdvcmsgZXJyb3JzIGJ5IG1lc3NhZ2UnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IG5ldHdvcmtFcnJvciA9IHtcclxuICAgICAgICBtZXNzYWdlOiAnbmV0d29yayBjb25uZWN0aW9uIHRpbWVvdXQnLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBub3JtYWxpemVFcnJvcihuZXR3b3JrRXJyb3IpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvZGUpLnRvQmUoJ05FVFdPUktfRVJST1InKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zZXZlcml0eSkudG9CZSgnd2FybmluZycpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBub3JtYWxpemUgNDAxIHVuYXV0aG9yaXplZCBlcnJvcnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0geyBzdGF0dXM6IDQwMSwgbWVzc2FnZTogJ1VuYXV0aG9yaXplZCcgfTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gbm9ybWFsaXplRXJyb3IoZXJyb3IpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b01hdGNoT2JqZWN0KHtcclxuICAgICAgICBjb2RlOiAnVU5BVVRIT1JJWkVEJyxcclxuICAgICAgICBtZXNzYWdlOiAnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnLFxyXG4gICAgICAgIHNldmVyaXR5OiAnZXJyb3InLFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zYWZlTWVzc2FnZSkudG9CZSgnQXV0aGVudGljYXRpb24gcmVxdWlyZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgbm9ybWFsaXplIDQwMyBmb3JiaWRkZW4gZXJyb3JzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvciA9IHsgc3RhdHVzOiA0MDMsIG1lc3NhZ2U6ICdGb3JiaWRkZW4nIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5vcm1hbGl6ZUVycm9yKGVycm9yKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9NYXRjaE9iamVjdCh7XHJcbiAgICAgICAgY29kZTogJ0ZPUkJJRERFTicsXHJcbiAgICAgICAgbWVzc2FnZTogJ0FjY2VzcyBkZW5pZWQnLFxyXG4gICAgICAgIHNldmVyaXR5OiAnZXJyb3InLFxyXG4gICAgICB9KTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5zYWZlTWVzc2FnZSkudG9CZSgnQWNjZXNzIGRlbmllZCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBub3JtYWxpemUgNTAwKyBzZXJ2ZXIgZXJyb3JzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvciA9IHsgc3RhdHVzOiA1MDAsIG1lc3NhZ2U6ICdJbnRlcm5hbCBTZXJ2ZXIgRXJyb3InIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5vcm1hbGl6ZUVycm9yKGVycm9yKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9NYXRjaE9iamVjdCh7XHJcbiAgICAgICAgY29kZTogJ1NFUlZFUl9FUlJPUicsXHJcbiAgICAgICAgbWVzc2FnZTogJ1NlcnZlciBlcnJvciBvY2N1cnJlZCcsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICdlcnJvcicsXHJcbiAgICAgIH0pO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnNhZmVNZXNzYWdlKS50b0JlKCdTZXJ2ZXIgZXJyb3Igb2NjdXJyZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGFuZGxlIHN0YXR1c0NvZGUgaW5zdGVhZCBvZiBzdGF0dXMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0geyBzdGF0dXNDb2RlOiA0MDEgfTtcclxuICAgICAgY29uc3QgcmVzdWx0ID0gbm9ybWFsaXplRXJyb3IoZXJyb3IpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LmNvZGUpLnRvQmUoJ1VOQVVUSE9SSVpFRCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB1c2UgZXJyb3IgY29kZSBhbmQgbWVzc2FnZSB3aGVuIGF2YWlsYWJsZScsICgpID0+IHtcclxuICAgICAgY29uc3QgZXJyb3IgPSB7XHJcbiAgICAgICAgY29kZTogJ0NVU1RPTV9FUlJPUicsXHJcbiAgICAgICAgbWVzc2FnZTogJ0N1c3RvbSBlcnJvciBtZXNzYWdlJyxcclxuICAgICAgICBzZXZlcml0eTogJ3dhcm5pbmcnLFxyXG4gICAgICB9O1xyXG4gICAgICBjb25zdCByZXN1bHQgPSBub3JtYWxpemVFcnJvcihlcnJvcik7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQpLnRvTWF0Y2hPYmplY3Qoe1xyXG4gICAgICAgIGNvZGU6ICdDVVNUT01fRVJST1InLFxyXG4gICAgICAgIG1lc3NhZ2U6ICdDdXN0b20gZXJyb3IgbWVzc2FnZScsXHJcbiAgICAgICAgc2V2ZXJpdHk6ICd3YXJuaW5nJyxcclxuICAgICAgfSk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQuc2FmZU1lc3NhZ2UpLnRvQmUoJ0FuIHVua25vd24gZXJyb3Igb2NjdXJyZWQnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgZGVmYXVsdCB0byBVTktOT1dOX0VSUk9SIGZvciB1bnJlY29nbml6ZWQgZXJyb3JzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvciA9IHsgbWVzc2FnZTogJ1NvbWUgZXJyb3InIH07XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IG5vcm1hbGl6ZUVycm9yKGVycm9yKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb2RlKS50b0JlKCdVTktOT1dOX0VSUk9SJyk7XHJcbiAgICAgIGV4cGVjdChyZXN1bHQubWVzc2FnZSkudG9CZSgnU29tZSBlcnJvcicpO1xyXG4gICAgICBleHBlY3QocmVzdWx0LnNldmVyaXR5KS50b0JlKCdlcnJvcicpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdoYW5kbGVFcnJvcicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgbm9ybWFsaXplIGFuZCBsb2cgZXJyb3JzJywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvciA9IHsgbWVzc2FnZTogJ1Rlc3QgZXJyb3InLCBjb2RlOiAnVEVTVF9FUlJPUicgfTtcclxuICAgICAgY29uc3QgY29udGV4dCA9IHsgdXNlcklkOiAnMTIzJyB9O1xyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzdWx0ID0gaGFuZGxlRXJyb3IoZXJyb3IsIGNvbnRleHQpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGNvbnNvbGUuZXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ2NvZGUnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ21lc3NhZ2UnKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdCkudG9IYXZlUHJvcGVydHkoJ3NldmVyaXR5Jyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIGhhbmRsZSBlcnJvcnMgd2l0aG91dCBjb250ZXh0JywgKCkgPT4ge1xyXG4gICAgICBjb25zdCBlcnJvciA9IHsgbWVzc2FnZTogJ1Rlc3QgZXJyb3InIH07XHJcbiAgICAgIFxyXG4gICAgICBjb25zdCByZXN1bHQgPSBoYW5kbGVFcnJvcihlcnJvcik7XHJcbiAgICAgIFxyXG4gICAgICBleHBlY3QoY29uc29sZS5lcnJvcikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgICBleHBlY3QocmVzdWx0KS50b0JlRGVmaW5lZCgpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgbnVsbCBlcnJvcnMnLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IHJlc3VsdCA9IGhhbmRsZUVycm9yKG51bGwpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KGNvbnNvbGUuZXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICAgICAgZXhwZWN0KHJlc3VsdC5jb2RlKS50b0JlKCdVTktOT1dOX0VSUk9SJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxuXHJcbiAgZGVzY3JpYmUoJ0ZhbGxiYWNrVUknLCAoKSA9PiB7XHJcbiAgICBpdCgnc2hvdWxkIGJlIGEgUmVhY3QgY29tcG9uZW50JywgKCkgPT4ge1xyXG4gICAgICBleHBlY3QoRmFsbGJhY2tVSSkudG9CZURlZmluZWQoKTtcclxuICAgICAgZXhwZWN0KHR5cGVvZiBGYWxsYmFja1VJKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBhY2NlcHQgZXJyb3IgYW5kIG9uUmV0cnkgcHJvcHMnLCAoKSA9PiB7XHJcbiAgICAgIC8vIENvbXBvbmVudCBzdHJ1Y3R1cmUgdGVzdCAtIHZlcmlmeSBpdCBjYW4gYmUgaW5zdGFudGlhdGVkXHJcbiAgICAgIGNvbnN0IGVycm9yID0geyBtZXNzYWdlOiAnVGVzdCBlcnJvcicgfTtcclxuICAgICAgY29uc3Qgb25SZXRyeSA9IGplc3QuZm4oKTtcclxuICAgICAgXHJcbiAgICAgIC8vIEp1c3QgdmVyaWZ5IHRoZSBjb21wb25lbnQgZXhpc3RzIGFuZCBhY2NlcHRzIHByb3BzXHJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgLy8gSW4gYSByZWFsIHRlc3QgZW52aXJvbm1lbnQsIHdlIHdvdWxkIHJlbmRlciB0aGlzXHJcbiAgICAgICAgLy8gRm9yIG5vdywganVzdCB2ZXJpZnkgaXQncyBpbXBvcnRhYmxlIGFuZCBoYXMgdGhlIHJpZ2h0IHN0cnVjdHVyZVxyXG4gICAgICAgIGV4cGVjdChGYWxsYmFja1VJKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdFcnJvckJvdW5kYXJ5JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBiZSBhIFJlYWN0IGNvbXBvbmVudCBjbGFzcycsICgpID0+IHtcclxuICAgICAgZXhwZWN0KEVycm9yQm91bmRhcnkpLnRvQmVEZWZpbmVkKCk7XHJcbiAgICAgIGV4cGVjdCh0eXBlb2YgRXJyb3JCb3VuZGFyeSkudG9CZSgnZnVuY3Rpb24nKTtcclxuICAgIH0pO1xyXG5cclxuICAgIGl0KCdzaG91bGQgaGF2ZSBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3Igc3RhdGljIG1ldGhvZCcsICgpID0+IHtcclxuICAgICAgZXhwZWN0KEVycm9yQm91bmRhcnkuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKS50b0JlRGVmaW5lZCgpO1xyXG4gICAgICBleHBlY3QodHlwZW9mIEVycm9yQm91bmRhcnkuZ2V0RGVyaXZlZFN0YXRlRnJvbUVycm9yKS50b0JlKCdmdW5jdGlvbicpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZXJyb3JzIHZpYSBnZXREZXJpdmVkU3RhdGVGcm9tRXJyb3InLCAoKSA9PiB7XHJcbiAgICAgIGNvbnN0IGVycm9yID0gbmV3IEVycm9yKCdUZXN0IGVycm9yJyk7XHJcbiAgICAgIGNvbnN0IHN0YXRlID0gRXJyb3JCb3VuZGFyeS5nZXREZXJpdmVkU3RhdGVGcm9tRXJyb3IoZXJyb3IpO1xyXG4gICAgICBcclxuICAgICAgZXhwZWN0KHN0YXRlKS50b0VxdWFsKHtcclxuICAgICAgICBoYXNFcnJvcjogdHJ1ZSxcclxuICAgICAgICBlcnJvcjogZXJyb3IsXHJcbiAgICAgIH0pO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiQUFJQSxJQUFBQSxPQUFBLEdBQUFDLE9BQUE7QUFFQUMsUUFBUSxDQUFDLHNCQUFzQixFQUFFLFlBQU07RUFDckNDLFVBQVUsQ0FBQyxZQUFNO0lBQ2ZDLElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUNDLGtCQUFrQixDQUFDLFlBQU0sQ0FBQyxDQUFDLENBQUM7SUFDekRILElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUNDLGtCQUFrQixDQUFDLFlBQU0sQ0FBQyxDQUFDLENBQUM7SUFDeERILElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLEVBQUUsTUFBTSxDQUFDLENBQUNDLGtCQUFrQixDQUFDLFlBQU0sQ0FBQyxDQUFDLENBQUM7SUFDeERILElBQUksQ0FBQ0MsS0FBSyxDQUFDQyxPQUFPLEVBQUUsT0FBTyxDQUFDLENBQUNDLGtCQUFrQixDQUFDLFlBQU0sQ0FBQyxDQUFDLENBQUM7RUFDM0QsQ0FBQyxDQUFDO0VBRUZDLFNBQVMsQ0FBQyxZQUFNO0lBQ2RGLE9BQU8sQ0FBQ0csS0FBSyxDQUFDQyxXQUFXLENBQUMsQ0FBQztJQUMzQkosT0FBTyxDQUFDSyxJQUFJLENBQUNELFdBQVcsQ0FBQyxDQUFDO0lBQzFCSixPQUFPLENBQUNNLElBQUksQ0FBQ0YsV0FBVyxDQUFDLENBQUM7SUFDMUJKLE9BQU8sQ0FBQ08sS0FBSyxDQUFDSCxXQUFXLENBQUMsQ0FBQztFQUM3QixDQUFDLENBQUM7RUFFRlIsUUFBUSxDQUFDLGdCQUFnQixFQUFFLFlBQU07SUFDL0JZLEVBQUUsQ0FBQyxxQ0FBcUMsRUFBRSxZQUFNO01BQzlDLElBQU1DLE1BQU0sR0FBRyxJQUFBQyxzQkFBYyxFQUFDLElBQUksQ0FBQztNQUNuQ0MsTUFBTSxDQUFD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