75edb9283238e0151f5b78251cead221
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("@testing-library/react-native");
var _fallback = _interopRequireDefault(require("../../errors/fallback.ui"));
var _native = require("styled-components/native");
var _theme = require("../../theme");
var _jsxRuntime = require("react/jsx-runtime");
describe('errors/fallback.ui.jsx', function () {
  var theme = (0, _theme.getTheme)('light');
  var renderWithTheme = function renderWithTheme(component) {
    return (0, _reactNative.render)((0, _jsxRuntime.jsx)(_native.ThemeProvider, {
      theme: theme,
      children: component
    }));
  };
  test('should render component', function () {
    var _renderWithTheme = renderWithTheme((0, _jsxRuntime.jsx)(_fallback.default, {})),
      getByText = _renderWithTheme.getByText;
    expect(getByText('Something went wrong')).toBeTruthy();
  });
  test('should display error message', function () {
    var error = {
      safeMessage: 'Custom error message'
    };
    var _renderWithTheme2 = renderWithTheme((0, _jsxRuntime.jsx)(_fallback.default, {
        error: error
      })),
      getByText = _renderWithTheme2.getByText;
    expect(getByText('Custom error message')).toBeTruthy();
  });
  test('should display default message when no error', function () {
    var _renderWithTheme3 = renderWithTheme((0, _jsxRuntime.jsx)(_fallback.default, {})),
      getByText = _renderWithTheme3.getByText;
    expect(getByText('An unexpected error occurred')).toBeTruthy();
  });
  test('should render retry button when onRetry provided', function () {
    var onRetry = jest.fn();
    var _renderWithTheme4 = renderWithTheme((0, _jsxRuntime.jsx)(_fallback.default, {
        onRetry: onRetry
      })),
      getByText = _renderWithTheme4.getByText;
    var retryButton = getByText('Retry');
    expect(retryButton).toBeTruthy();
  });
  test('should not render retry button when onRetry not provided', function () {
    var _renderWithTheme5 = renderWithTheme((0, _jsxRuntime.jsx)(_fallback.default, {})),
      queryByText = _renderWithTheme5.queryByText;
    expect(queryByText('Retry')).toBeNull();
  });
  test('should call onRetry when retry button pressed', function () {
    var onRetry = jest.fn();
    var _renderWithTheme6 = renderWithTheme((0, _jsxRuntime.jsx)(_fallback.default, {
        onRetry: onRetry
      })),
      getByLabelText = _renderWithTheme6.getByLabelText;
    var retryButton = getByLabelText('Retry');
    _reactNative.fireEvent.press(retryButton);
    expect(onRetry).toHaveBeenCalled();
  });
  test('should use i18n text', function () {
    var _renderWithTheme7 = renderWithTheme((0, _jsxRuntime.jsx)(_fallback.default, {})),
      getByText = _renderWithTheme7.getByText;
    expect(getByText('Something went wrong')).toBeTruthy();
    expect(getByText('An unexpected error occurred')).toBeTruthy();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9yZWFjdE5hdGl2ZSIsIl9mYWxsYmFjayIsIl9uYXRpdmUiLCJfdGhlbWUiLCJfanN4UnVudGltZSIsImRlc2NyaWJlIiwidGhlbWUiLCJnZXRUaGVtZSIsInJlbmRlcldpdGhUaGVtZSIsImNvbXBvbmVudCIsInJlbmRlciIsImpzeCIsIlRoZW1lUHJvdmlkZXIiLCJjaGlsZHJlbiIsInRlc3QiLCJfcmVuZGVyV2l0aFRoZW1lIiwiZGVmYXVsdCIsImdldEJ5VGV4dCIsImV4cGVjdCIsInRvQmVUcnV0aHkiLCJlcnJvciIsInNhZmVNZXNzYWdlIiwiX3JlbmRlcldpdGhUaGVtZTIiLCJfcmVuZGVyV2l0aFRoZW1lMyIsIm9uUmV0cnkiLCJqZXN0IiwiZm4iLCJfcmVuZGVyV2l0aFRoZW1lNCIsInJldHJ5QnV0dG9uIiwiX3JlbmRlcldpdGhUaGVtZTUiLCJxdWVyeUJ5VGV4dCIsInRvQmVOdWxsIiwiX3JlbmRlcldpdGhUaGVtZTYiLCJnZXRCeUxhYmVsVGV4dCIsImZpcmVFdmVudCIsInByZXNzIiwidG9IYXZlQmVlbkNhbGxlZCIsIl9yZW5kZXJXaXRoVGhlbWU3Il0sInNvdXJjZXMiOlsiZmFsbGJhY2sudWkudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogRmFsbGJhY2sgVUkgQ29tcG9uZW50IFRlc3RzXHJcbiAqIEZpbGU6IGZhbGxiYWNrLnVpLnRlc3QuanNcclxuICovXHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHJlbmRlciwgZmlyZUV2ZW50IH0gZnJvbSAnQHRlc3RpbmctbGlicmFyeS9yZWFjdC1uYXRpdmUnO1xyXG5pbXBvcnQgRmFsbGJhY2tVSSBmcm9tICdAZXJyb3JzL2ZhbGxiYWNrLnVpJztcclxuaW1wb3J0IHsgVGhlbWVQcm92aWRlciB9IGZyb20gJ3N0eWxlZC1jb21wb25lbnRzL25hdGl2ZSc7XHJcbmltcG9ydCB7IGdldFRoZW1lIH0gZnJvbSAnQHRoZW1lJztcclxuXHJcbmRlc2NyaWJlKCdlcnJvcnMvZmFsbGJhY2sudWkuanN4JywgKCkgPT4ge1xyXG4gIGNvbnN0IHRoZW1lID0gZ2V0VGhlbWUoJ2xpZ2h0Jyk7XHJcblxyXG4gIGNvbnN0IHJlbmRlcldpdGhUaGVtZSA9IChjb21wb25lbnQpID0+IHtcclxuICAgIHJldHVybiByZW5kZXIoPFRoZW1lUHJvdmlkZXIgdGhlbWU9e3RoZW1lfT57Y29tcG9uZW50fTwvVGhlbWVQcm92aWRlcj4pO1xyXG4gIH07XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCByZW5kZXIgY29tcG9uZW50JywgKCkgPT4ge1xyXG4gICAgY29uc3QgeyBnZXRCeVRleHQgfSA9IHJlbmRlcldpdGhUaGVtZSg8RmFsbGJhY2tVSSAvPik7XHJcbiAgICBleHBlY3QoZ2V0QnlUZXh0KCdTb21ldGhpbmcgd2VudCB3cm9uZycpKS50b0JlVHJ1dGh5KCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBkaXNwbGF5IGVycm9yIG1lc3NhZ2UnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBlcnJvciA9IHsgc2FmZU1lc3NhZ2U6ICdDdXN0b20gZXJyb3IgbWVzc2FnZScgfTtcclxuICAgIGNvbnN0IHsgZ2V0QnlUZXh0IH0gPSByZW5kZXJXaXRoVGhlbWUoPEZhbGxiYWNrVUkgZXJyb3I9e2Vycm9yfSAvPik7XHJcbiAgICBleHBlY3QoZ2V0QnlUZXh0KCdDdXN0b20gZXJyb3IgbWVzc2FnZScpKS50b0JlVHJ1dGh5KCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBkaXNwbGF5IGRlZmF1bHQgbWVzc2FnZSB3aGVuIG5vIGVycm9yJywgKCkgPT4ge1xyXG4gICAgY29uc3QgeyBnZXRCeVRleHQgfSA9IHJlbmRlcldpdGhUaGVtZSg8RmFsbGJhY2tVSSAvPik7XHJcbiAgICBleHBlY3QoZ2V0QnlUZXh0KCdBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkJykpLnRvQmVUcnV0aHkoKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIHJlbmRlciByZXRyeSBidXR0b24gd2hlbiBvblJldHJ5IHByb3ZpZGVkJywgKCkgPT4ge1xyXG4gICAgY29uc3Qgb25SZXRyeSA9IGplc3QuZm4oKTtcclxuICAgIGNvbnN0IHsgZ2V0QnlUZXh0IH0gPSByZW5kZXJXaXRoVGhlbWUoPEZhbGxiYWNrVUkgb25SZXRyeT17b25SZXRyeX0gLz4pO1xyXG4gICAgY29uc3QgcmV0cnlCdXR0b24gPSBnZXRCeVRleHQoJ1JldHJ5Jyk7XHJcbiAgICBleHBlY3QocmV0cnlCdXR0b24pLnRvQmVUcnV0aHkoKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIG5vdCByZW5kZXIgcmV0cnkgYnV0dG9uIHdoZW4gb25SZXRyeSBub3QgcHJvdmlkZWQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB7IHF1ZXJ5QnlUZXh0IH0gPSByZW5kZXJXaXRoVGhlbWUoPEZhbGxiYWNrVUkgLz4pO1xyXG4gICAgZXhwZWN0KHF1ZXJ5QnlUZXh0KCdSZXRyeScpKS50b0JlTnVsbCgpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgY2FsbCBvblJldHJ5IHdoZW4gcmV0cnkgYnV0dG9uIHByZXNzZWQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBvblJldHJ5ID0gamVzdC5mbigpO1xyXG4gICAgY29uc3QgeyBnZXRCeUxhYmVsVGV4dCB9ID0gcmVuZGVyV2l0aFRoZW1lKDxGYWxsYmFja1VJIG9uUmV0cnk9e29uUmV0cnl9IC8+KTtcclxuICAgIGNvbnN0IHJldHJ5QnV0dG9uID0gZ2V0QnlMYWJlbFRleHQoJ1JldHJ5Jyk7XHJcbiAgICBmaXJlRXZlbnQucHJlc3MocmV0cnlCdXR0b24pO1xyXG4gICAgZXhwZWN0KG9uUmV0cnkpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcclxuICB9KTtcclxuXHJcbiAgdGVzdCgnc2hvdWxkIHVzZSBpMThuIHRleHQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCB7IGdldEJ5VGV4dCB9ID0gcmVuZGVyV2l0aFRoZW1lKDxGYWxsYmFja1VJIC8+KTtcclxuICAgIC8vIFRoZXNlIHNob3VsZCBjb21lIGZyb20gZW4uanNvblxyXG4gICAgZXhwZWN0KGdldEJ5VGV4dCgnU29tZXRoaW5nIHdlbnQgd3JvbmcnKSkudG9CZVRydXRoeSgpO1xyXG4gICAgZXhwZWN0KGdldEJ5VGV4dCgnQW4gdW5leHBlY3RlZCBlcnJvciBvY2N1cnJlZCcpKS50b0JlVHJ1dGh5KCk7XHJcbiAgfSk7XHJcbn0pO1xyXG5cclxuIl0sIm1hcHBpbmdzIjoiO0FBSUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsU0FBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUcsT0FBQSxHQUFBSCxPQUFBO0FBQ0EsSUFBQUksTUFBQSxHQUFBSixPQUFBO0FBQWtDLElBQUFLLFdBQUEsR0FBQUwsT0FBQTtBQUVsQ00sUUFBUSxDQUFDLHdCQUF3QixFQUFFLFlBQU07RUFDdkMsSUFBTUMsS0FBSyxHQUFHLElBQUFDLGVBQVEsRUFBQyxPQUFPLENBQUM7RUFFL0IsSUFBTUMsZUFBZSxHQUFHLFNBQWxCQSxlQUFlQSxDQUFJQyxTQUFTLEVBQUs7SUFDckMsT0FBTyxJQUFBQyxtQkFBTSxFQUFDLElBQUFOLFdBQUEsQ0FBQU8sR0FBQSxFQUFDVCxPQUFBLENBQUFVLGFBQWE7TUFBQ04sS0FBSyxFQUFFQSxLQUFNO01BQUFPLFFBQUEsRUFBRUo7SUFBUyxDQUFnQixDQUFDLENBQUM7RUFDekUsQ0FBQztFQUVESyxJQUFJLENBQUMseUJBQXlCLEVBQUUsWUFBTTtJQUNwQyxJQUFBQyxnQkFBQSxHQUFzQlAsZUFBZSxDQUFDLElBQUFKLFdBQUEsQ0FBQU8sR0FBQSxFQUFDVixTQUFBLENBQUFlLE9BQVUsSUFBRSxDQUFDLENBQUM7TUFBN0NDLFNBQVMsR0FBQUYsZ0JBQUEsQ0FBVEUsU0FBUztJQUNqQkMsTUFBTSxD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