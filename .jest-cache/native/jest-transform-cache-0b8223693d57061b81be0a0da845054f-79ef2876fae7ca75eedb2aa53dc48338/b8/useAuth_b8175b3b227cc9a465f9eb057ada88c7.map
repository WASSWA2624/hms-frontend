{"version":3,"names":["useCallback","useMemo","useDispatch","useSelector","selectIsAuthenticated","selectUser","actions","authActions","cov_1zcoum6aca","s","normalizeRole","role","f","b","String","trim","toLowerCase","normalizeRoles","roles","list","Array","isArray","map","filter","Boolean","useAuth","dispatch","isAuthenticated","user","userRoles","login","payload","register","logout","refreshSession","loadCurrentUser"],"sources":["useAuth.js"],"sourcesContent":["/**\r\n * useAuth Hook\r\n * Provides minimal auth state from Redux for UI guards/navigation.\r\n * File: useAuth.js\r\n */\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { selectIsAuthenticated, selectUser } from '@store/selectors';\r\nimport { actions as authActions } from '@store/slices/auth.slice';\r\n\r\nconst normalizeRole = (role) => {\r\n  if (!role) return null;\r\n  return String(role).trim().toLowerCase();\r\n};\r\n\r\nconst normalizeRoles = (roles) => {\r\n  if (!roles) return [];\r\n  const list = Array.isArray(roles) ? roles : [roles];\r\n  return list.map(normalizeRole).filter(Boolean);\r\n};\r\n\r\n/**\r\n * useAuth hook\r\n * @returns {Object} auth state and normalized roles\r\n */\r\nconst useAuth = () => {\r\n  const dispatch = useDispatch();\r\n  const isAuthenticated = useSelector(selectIsAuthenticated);\r\n  const user = useSelector(selectUser);\r\n\r\n  const roles = useMemo(() => {\r\n    const userRoles = user?.roles || user?.role || [];\r\n    return normalizeRoles(userRoles);\r\n  }, [user]);\r\n\r\n  return {\r\n    isAuthenticated: Boolean(isAuthenticated),\r\n    user: user || null,\r\n    roles,\r\n    role: roles[0] || null,\r\n    login: useCallback((payload) => dispatch(authActions.login(payload)), [dispatch]),\r\n    register: useCallback((payload) => dispatch(authActions.register(payload)), [dispatch]),\r\n    logout: useCallback(() => dispatch(authActions.logout()), [dispatch]),\r\n    refreshSession: useCallback(() => dispatch(authActions.refreshSession()), [dispatch]),\r\n    loadCurrentUser: useCallback(() => dispatch(authActions.loadCurrentUser()), [dispatch]),\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":"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","ignoreList":[]}