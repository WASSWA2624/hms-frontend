{"version":3,"names":["_getJestObj","mock","useI18n","jest","fn","t","k","useNetwork","isOffline","useTenant","useRouter","push","mockPush","_interopRequireDefault","require","default","_asyncToGenerator2","_require2","_require","renderHook","act","useTenantListScreen","describe","mockList","mockRemove","mockReset","beforeEach","clearAllMocks","mockReturnValue","list","remove","data","items","pagination","isLoading","errorCode","reset","it","_renderHook","result","expect","current","toEqual","onRetry","toBe","onTenantPress","onDelete","toHaveBeenCalled","toHaveBeenCalledWith","page","limit","_renderHook2","mockClear","_renderHook3","_renderHook4","hasError","errorMessage","toBeDefined","mockResolvedValue","undefined","_renderHook5","stopPropagation","_renderHook6","mockRejectedValue","Error","_renderHook7","not","id","name","_renderHook8","_renderHook9"],"sources":["useTenantListScreen.test.js"],"sourcesContent":["/**\r\n * useTenantListScreen Hook Tests\r\n */\r\nconst { renderHook, act } = require('@testing-library/react-native');\r\nconst useTenantListScreen = require('@platform/screens/settings/TenantListScreen/useTenantListScreen').default;\r\n\r\nconst mockPush = jest.fn();\r\njest.mock('@hooks', () => ({\r\n  useI18n: jest.fn(() => ({ t: (k) => k })),\r\n  useNetwork: jest.fn(() => ({ isOffline: false })),\r\n  useTenant: jest.fn(),\r\n}));\r\n\r\njest.mock('expo-router', () => ({\r\n  useRouter: () => ({ push: mockPush }),\r\n}));\r\n\r\nconst useTenant = require('@hooks').useTenant;\r\n\r\ndescribe('useTenantListScreen', () => {\r\n  const mockList = jest.fn();\r\n  const mockRemove = jest.fn();\r\n  const mockReset = jest.fn();\r\n\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    useTenant.mockReturnValue({\r\n      list: mockList,\r\n      remove: mockRemove,\r\n      data: { items: [], pagination: {} },\r\n      isLoading: false,\r\n      errorCode: null,\r\n      reset: mockReset,\r\n    });\r\n  });\r\n\r\n  it('returns items, handlers, and state', () => {\r\n    const { result } = renderHook(() => useTenantListScreen());\r\n    expect(result.current.items).toEqual([]);\r\n    expect(typeof result.current.onRetry).toBe('function');\r\n    expect(typeof result.current.onTenantPress).toBe('function');\r\n    expect(typeof result.current.onDelete).toBe('function');\r\n  });\r\n\r\n  it('calls list on mount', () => {\r\n    renderHook(() => useTenantListScreen());\r\n    expect(mockReset).toHaveBeenCalled();\r\n    expect(mockList).toHaveBeenCalledWith({ page: 1, limit: 20 });\r\n  });\r\n\r\n  it('onRetry calls fetchList', () => {\r\n    const { result } = renderHook(() => useTenantListScreen());\r\n    mockReset.mockClear();\r\n    mockList.mockClear();\r\n    result.current.onRetry();\r\n    expect(mockReset).toHaveBeenCalled();\r\n    expect(mockList).toHaveBeenCalledWith({ page: 1, limit: 20 });\r\n  });\r\n\r\n  it('onTenantPress pushes route with id', () => {\r\n    mockPush.mockClear();\r\n    const { result } = renderHook(() => useTenantListScreen());\r\n    result.current.onTenantPress('tid-1');\r\n    expect(mockPush).toHaveBeenCalledWith('/settings/tenants/tid-1');\r\n  });\r\n\r\n  it('exposes errorMessage when errorCode set', () => {\r\n    useTenant.mockReturnValue({\r\n      list: mockList,\r\n      remove: mockRemove,\r\n      data: { items: [] },\r\n      isLoading: false,\r\n      errorCode: 'TENANT_NOT_FOUND',\r\n      reset: mockReset,\r\n    });\r\n    const { result } = renderHook(() => useTenantListScreen());\r\n    expect(result.current.hasError).toBe(true);\r\n    expect(result.current.errorMessage).toBeDefined();\r\n  });\r\n\r\n  it('onDelete calls remove then fetchList', async () => {\r\n    mockRemove.mockResolvedValue(undefined);\r\n    mockReset.mockClear();\r\n    mockList.mockClear();\r\n    const { result } = renderHook(() => useTenantListScreen());\r\n    await act(async () => {\r\n      await result.current.onDelete('tid-1');\r\n    });\r\n    expect(mockRemove).toHaveBeenCalledWith('tid-1');\r\n    expect(mockReset).toHaveBeenCalled();\r\n    expect(mockList).toHaveBeenCalledWith({ page: 1, limit: 20 });\r\n  });\r\n\r\n  it('onDelete calls stopPropagation when event provided', async () => {\r\n    const stopPropagation = jest.fn();\r\n    mockRemove.mockResolvedValue(undefined);\r\n    const { result } = renderHook(() => useTenantListScreen());\r\n    await act(async () => {\r\n      await result.current.onDelete('tid-1', { stopPropagation });\r\n    });\r\n    expect(stopPropagation).toHaveBeenCalled();\r\n  });\r\n\r\n  it('onDelete does not throw or refetch when remove rejects', async () => {\r\n    mockRemove.mockRejectedValue(new Error('remove failed'));\r\n    const { result } = renderHook(() => useTenantListScreen());\r\n    mockList.mockClear();\r\n    await act(async () => {\r\n      await result.current.onDelete('tid-1');\r\n    });\r\n    expect(mockRemove).toHaveBeenCalledWith('tid-1');\r\n    expect(mockList).not.toHaveBeenCalled();\r\n  });\r\n\r\n  it('handles items from data', () => {\r\n    useTenant.mockReturnValue({\r\n      list: mockList,\r\n      remove: mockRemove,\r\n      data: { items: [{ id: 't1', name: 'Tenant 1' }] },\r\n      isLoading: false,\r\n      errorCode: null,\r\n      reset: mockReset,\r\n    });\r\n    const { result } = renderHook(() => useTenantListScreen());\r\n    expect(result.current.items).toEqual([{ id: 't1', name: 'Tenant 1' }]);\r\n  });\r\n\r\n  it('handles empty items array', () => {\r\n    useTenant.mockReturnValue({\r\n      list: mockList,\r\n      remove: mockRemove,\r\n      data: null,\r\n      isLoading: false,\r\n      errorCode: null,\r\n      reset: mockReset,\r\n    });\r\n    const { result } = renderHook(() => useTenantListScreen());\r\n    expect(result.current.items).toEqual([]);\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}