9d0bc6e0d740da1143c464bc3784bd80
_getJestObj().mock("../../config", function () {
  return {
    featureFlags: {
      ANALYTICS_ENABLED: true
    }
  };
});
_getJestObj().mock("../../logging", function () {
  return {
    logger: {
      debug: jest.fn()
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
function _getJestObj() {
  var _require3 = require("@jest/globals"),
    jest = _require3.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
var _require = require("../../services/analytics"),
  trackEvent = _require.trackEvent,
  trackScreen = _require.trackScreen;
describe('Analytics Service', function () {
  beforeEach(function () {
    jest.clearAllMocks();
  });
  describe('trackEvent', function () {
    it('should not throw when analytics is enabled', (0, _asyncToGenerator2.default)(function* () {
      expect(function () {
        return trackEvent('test_event', {
          key: 'value'
        });
      }).not.toThrow();
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 0);
      });
    }));
    it('should no-op when analytics is disabled', (0, _asyncToGenerator2.default)(function* () {
      jest.resetModules();
      jest.doMock("../../config", function () {
        return {
          featureFlags: {
            ANALYTICS_ENABLED: false
          }
        };
      });
      var _require2 = require("../../services/analytics"),
        trackEventDisabled = _require2.trackEvent;
      trackEventDisabled('test_event', {
        key: 'value'
      });
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 0);
      });
    }));
    it('should handle events without properties', (0, _asyncToGenerator2.default)(function* () {
      expect(function () {
        return trackEvent('simple_event');
      }).not.toThrow();
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 0);
      });
    }));
    it('should silently fail on errors', (0, _asyncToGenerator2.default)(function* () {
      expect(function () {
        trackEvent('test_event');
      }).not.toThrow();
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 0);
      });
    }));
  });
  describe('trackScreen', function () {
    it('should track screen view event', (0, _asyncToGenerator2.default)(function* () {
      expect(function () {
        return trackScreen('HomeScreen', {
          userId: '123'
        });
      }).not.toThrow();
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 0);
      });
    }));
    it('should track screen view without additional properties', (0, _asyncToGenerator2.default)(function* () {
      expect(function () {
        return trackScreen('ProfileScreen');
      }).not.toThrow();
      yield new Promise(function (resolve) {
        return setTimeout(resolve, 0);
      });
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJmZWF0dXJlRmxhZ3MiLCJBTkFMWVRJQ1NfRU5BQkxFRCIsImxvZ2dlciIsImRlYnVnIiwiamVzdCIsImZuIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJkZWZhdWx0IiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiX3JlcXVpcmUzIiwiX3JlcXVpcmUiLCJ0cmFja0V2ZW50IiwidHJhY2tTY3JlZW4iLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJjbGVhckFsbE1vY2tzIiwiaXQiLCJleHBlY3QiLCJrZXkiLCJub3QiLCJ0b1Rocm93IiwiUHJvbWlzZSIsInJlc29sdmUiLCJzZXRUaW1lb3V0IiwicmVzZXRNb2R1bGVzIiwiZG9Nb2NrIiwiX3JlcXVpcmUyIiwidHJhY2tFdmVudERpc2FibGVkIiwidXNlcklkIl0sInNvdXJjZXMiOlsiYW5hbHl0aWNzLnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEFuYWx5dGljcyBTZXJ2aWNlIFRlc3RzXHJcbiAqIEZpbGU6IGFuYWx5dGljcy50ZXN0LmpzXHJcbiAqL1xyXG4vLyBNb2NrIGNvbmZpZyAoZmVhdHVyZUZsYWdzIGlzIG5hbWVzcGFjZSBmcm9tIEBjb25maWcpXHJcbmplc3QubW9jaygnQGNvbmZpZycsICgpID0+ICh7XHJcbiAgZmVhdHVyZUZsYWdzOiB7XHJcbiAgICBBTkFMWVRJQ1NfRU5BQkxFRDogdHJ1ZSxcclxuICB9LFxyXG59KSk7XHJcblxyXG5qZXN0Lm1vY2soJ0Bsb2dnaW5nJywgKCkgPT4gKHtcclxuICBsb2dnZXI6IHtcclxuICAgIGRlYnVnOiBqZXN0LmZuKCksXHJcbiAgfSxcclxufSkpO1xyXG5cclxuY29uc3QgeyB0cmFja0V2ZW50LCB0cmFja1NjcmVlbiB9ID0gcmVxdWlyZSgnQHNlcnZpY2VzL2FuYWx5dGljcycpO1xyXG5cclxuZGVzY3JpYmUoJ0FuYWx5dGljcyBTZXJ2aWNlJywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgamVzdC5jbGVhckFsbE1vY2tzKCk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCd0cmFja0V2ZW50JywgKCkgPT4ge1xyXG4gICAgaXQoJ3Nob3VsZCBub3QgdGhyb3cgd2hlbiBhbmFseXRpY3MgaXMgZW5hYmxlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHRyYWNrRXZlbnQoJ3Rlc3RfZXZlbnQnLCB7IGtleTogJ3ZhbHVlJyB9KSkubm90LnRvVGhyb3coKTtcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBuby1vcCB3aGVuIGFuYWx5dGljcyBpcyBkaXNhYmxlZCcsIGFzeW5jICgpID0+IHtcclxuICAgICAgamVzdC5yZXNldE1vZHVsZXMoKTtcclxuICAgICAgamVzdC5kb01vY2soJ0Bjb25maWcnLCAoKSA9PiAoe1xyXG4gICAgICAgIGZlYXR1cmVGbGFnczoge1xyXG4gICAgICAgICAgQU5BTFlUSUNTX0VOQUJMRUQ6IGZhbHNlLFxyXG4gICAgICAgIH0sXHJcbiAgICAgIH0pKTtcclxuXHJcbiAgICAgIGNvbnN0IHsgdHJhY2tFdmVudDogdHJhY2tFdmVudERpc2FibGVkIH0gPSByZXF1aXJlKCdAc2VydmljZXMvYW5hbHl0aWNzJyk7XHJcbiAgICAgIHRyYWNrRXZlbnREaXNhYmxlZCgndGVzdF9ldmVudCcsIHsga2V5OiAndmFsdWUnIH0pO1xyXG5cclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCBoYW5kbGUgZXZlbnRzIHdpdGhvdXQgcHJvcGVydGllcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHRyYWNrRXZlbnQoJ3NpbXBsZV9ldmVudCcpKS5ub3QudG9UaHJvdygpO1xyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZSgocmVzb2x2ZSkgPT4gc2V0VGltZW91dChyZXNvbHZlLCAwKSk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBpdCgnc2hvdWxkIHNpbGVudGx5IGZhaWwgb24gZXJyb3JzJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICAvLyBTaG91bGQgbm90IHRocm93XHJcbiAgICAgIGV4cGVjdCgoKSA9PiB7XHJcbiAgICAgICAgdHJhY2tFdmVudCgndGVzdF9ldmVudCcpO1xyXG4gICAgICB9KS5ub3QudG9UaHJvdygpO1xyXG5cclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCd0cmFja1NjcmVlbicsICgpID0+IHtcclxuICAgIGl0KCdzaG91bGQgdHJhY2sgc2NyZWVuIHZpZXcgZXZlbnQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGV4cGVjdCgoKSA9PiB0cmFja1NjcmVlbignSG9tZVNjcmVlbicsIHsgdXNlcklkOiAnMTIzJyB9KSkubm90LnRvVGhyb3coKTtcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UoKHJlc29sdmUpID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMCkpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgaXQoJ3Nob3VsZCB0cmFjayBzY3JlZW4gdmlldyB3aXRob3V0IGFkZGl0aW9uYWwgcHJvcGVydGllcycsIGFzeW5jICgpID0+IHtcclxuICAgICAgZXhwZWN0KCgpID0+IHRyYWNrU2NyZWVuKCdQcm9maWxlU2NyZWVuJykpLm5vdC50b1Rocm93KCk7XHJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKChyZXNvbHZlKSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDApKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6IkFBS0FB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