{"version":3,"names":["runCrudUsecaseTests","exports","_ref","_ref2","list","get","create","update","remove","_ref$extraActions","extraActions","queueRequestIfOffline","_ref2$payload","payload","name","_ref2$id","id","_ref2$listParams","listParams","page","it","_asyncToGenerator2","default","mockResolvedValue","expect","resolves","toBeDefined","action","fn","apply","_toConsumableArray2","args","toEqual","Object","assign","rejects"],"sources":["crud-usecase-runner.js"],"sourcesContent":["/**\r\n * CRUD Usecase Test Helpers\r\n * File: crud-usecase-runner.js\r\n */\r\nconst runCrudUsecaseTests = (\r\n  {\r\n    list,\r\n    get,\r\n    create,\r\n    update,\r\n    remove,\r\n    extraActions = [],\r\n  },\r\n  {\r\n    queueRequestIfOffline,\r\n    payload = { name: 'value' },\r\n    id = '1',\r\n    listParams = { page: 1 },\r\n  }\r\n) => {\r\n  it('runs online usecases', async () => {\r\n    queueRequestIfOffline.mockResolvedValue(false);\r\n\r\n    if (list) {\r\n      await expect(list(listParams)).resolves.toBeDefined();\r\n    }\r\n    if (get) {\r\n      await expect(get(id)).resolves.toBeDefined();\r\n    }\r\n    if (create) {\r\n      await expect(create(payload)).resolves.toBeDefined();\r\n    }\r\n    if (update) {\r\n      await expect(update(id, payload)).resolves.toBeDefined();\r\n    }\r\n    if (remove) {\r\n      await expect(remove(id)).resolves.toBeDefined();\r\n    }\r\n\r\n    for (const action of extraActions) {\r\n      await expect(action.fn(...(action.args || []))).resolves.toBeDefined();\r\n    }\r\n  });\r\n\r\n  it('queues offline writes', async () => {\r\n    queueRequestIfOffline.mockResolvedValue(true);\r\n\r\n    if (create) {\r\n      await expect(create(payload)).resolves.toEqual(payload);\r\n    }\r\n    if (update) {\r\n      await expect(update(id, payload)).resolves.toEqual({ id, ...payload });\r\n    }\r\n    if (remove) {\r\n      await expect(remove(id)).resolves.toEqual({ id });\r\n    }\r\n  });\r\n\r\n  if (get) {\r\n    it('rejects invalid ids', async () => {\r\n      await expect(get(null)).rejects.toBeDefined();\r\n    });\r\n  }\r\n};\r\n\r\nexport { runCrudUsecaseTests };\r\n"],"mappings":"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","ignoreList":[]}