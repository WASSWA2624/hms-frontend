{"version":3,"names":["_getJestObj","mock","dispatch","jest","fn","actions","setTheme","theme","type","payload","async","getItem","logger","info","error","debug","warn","_interopRequireDefault","require","default","_asyncToGenerator2","_init","_store","_ui","_storage","_logging","_require","describe","beforeEach","clearAllMocks","it","asyncStorage","mockResolvedValue","initTheme","expect","toHaveBeenCalledWith","store","Error","mockRejectedValue","resolves","not","toThrow","mockImplementation"],"sources":["init.theme.test.js"],"sourcesContent":["/**\r\n * Theme Initialization Tests\r\n * File: init.theme.test.js\r\n */\r\nimport { initTheme } from '@bootstrap/init.theme';\r\nimport store from '@store';\r\nimport { actions } from '@store/slices/ui.slice';\r\nimport { async as asyncStorage } from '@services/storage';\r\nimport { logger } from '@logging';\r\n\r\njest.mock('@store', () => ({\r\n  dispatch: jest.fn(),\r\n}));\r\n\r\njest.mock('@store/slices/ui.slice', () => ({\r\n  actions: {\r\n    setTheme: jest.fn((theme) => ({ type: 'ui/setTheme', payload: theme })),\r\n  },\r\n}));\r\n\r\njest.mock('@services/storage', () => ({\r\n  async: {\r\n    getItem: jest.fn(),\r\n  },\r\n}));\r\n\r\njest.mock('@logging', () => ({\r\n  logger: {\r\n    info: jest.fn(),\r\n    error: jest.fn(),\r\n    debug: jest.fn(),\r\n    warn: jest.fn(),\r\n  },\r\n}));\r\n\r\ndescribe('Theme Initialization', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  it('initializes with default light theme when no persisted theme exists', async () => {\r\n    asyncStorage.getItem.mockResolvedValue(null);\r\n\r\n    await initTheme();\r\n\r\n    expect(asyncStorage.getItem).toHaveBeenCalledWith('theme_preference');\r\n    expect(store.dispatch).toHaveBeenCalledWith(actions.setTheme('light'));\r\n    expect(logger.info).toHaveBeenCalledWith('Theme initialized successfully', { theme: 'light' });\r\n  });\r\n\r\n  it('loads persisted light theme', async () => {\r\n    asyncStorage.getItem.mockResolvedValue('light');\r\n\r\n    await initTheme();\r\n\r\n    expect(store.dispatch).toHaveBeenCalledWith(actions.setTheme('light'));\r\n    expect(logger.info).toHaveBeenCalledWith('Theme initialized successfully', { theme: 'light' });\r\n  });\r\n\r\n  it('loads persisted dark theme', async () => {\r\n    asyncStorage.getItem.mockResolvedValue('dark');\r\n\r\n    await initTheme();\r\n\r\n    expect(store.dispatch).toHaveBeenCalledWith(actions.setTheme('dark'));\r\n    expect(logger.info).toHaveBeenCalledWith('Theme initialized successfully', { theme: 'dark' });\r\n  });\r\n\r\n  it('loads persisted high-contrast theme', async () => {\r\n    asyncStorage.getItem.mockResolvedValue('high-contrast');\r\n\r\n    await initTheme();\r\n\r\n    expect(store.dispatch).toHaveBeenCalledWith(actions.setTheme('high-contrast'));\r\n    expect(logger.info).toHaveBeenCalledWith('Theme initialized successfully', {\r\n      theme: 'high-contrast',\r\n    });\r\n  });\r\n\r\n  it('uses default theme when persisted theme is invalid', async () => {\r\n    asyncStorage.getItem.mockResolvedValue('invalid-theme');\r\n\r\n    await initTheme();\r\n\r\n    expect(store.dispatch).toHaveBeenCalledWith(actions.setTheme('light'));\r\n    expect(logger.info).toHaveBeenCalledWith('Theme initialized successfully', { theme: 'light' });\r\n  });\r\n\r\n  it('handles storage read errors gracefully', async () => {\r\n    const error = new Error('Storage error');\r\n    asyncStorage.getItem.mockRejectedValue(error);\r\n\r\n    await expect(initTheme()).resolves.not.toThrow();\r\n\r\n    expect(logger.debug).toHaveBeenCalledWith('Could not load persisted theme, using default', {\r\n      error: 'Storage error',\r\n    });\r\n    expect(store.dispatch).toHaveBeenCalledWith(actions.setTheme('light'));\r\n    expect(logger.info).toHaveBeenCalledWith('Theme initialized successfully', { theme: 'light' });\r\n  });\r\n\r\n  it('handles initialization errors gracefully without throwing', async () => {\r\n    store.dispatch.mockImplementation(() => {\r\n      throw new Error('Dispatch error');\r\n    });\r\n\r\n    await expect(initTheme()).resolves.not.toThrow();\r\n\r\n    expect(logger.error).toHaveBeenCalledWith('Theme initialization failed', {\r\n      error: 'Dispatch error',\r\n    });\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}