{"version":3,"names":["_getJestObj","mock","useAuth","jest","fn","useI18n","useNetwork","useRouter","_interopRequireDefault","require","default","_asyncToGenerator2","_require3","React","TestRenderer","_require","_require2","useResetPasswordScreen","act","renderHook","hook","result","renderer","HookHarness","hookResult","Object","assign","create","createElement","current","unmount","describe","resetPassword","Promise","resolve","clearError","push","t","key","beforeEach","clearAllMocks","mockReturnValue","isLoading","errorCode","isOffline","it","_renderHook","handleChangePassword","handleChangeConfirmPassword","expect","passwordMismatch","toBe","_renderHook2","handleChangeToken","handleSubmit","toHaveBeenCalled","toHaveBeenCalledWith","token","new_password","confirm_password","_renderHook3","errorMessage","_renderHook4","handleGoToLogin"],"sources":["useResetPasswordScreen.test.js"],"sourcesContent":["/**\r\n * useResetPasswordScreen Hook Tests\r\n * File: useResetPasswordScreen.test.js\r\n */\r\nconst React = require('react');\r\nconst TestRenderer = require('react-test-renderer');\r\nconst { useAuth, useI18n, useNetwork } = require('@hooks');\r\nconst { useRouter } = require('expo-router');\r\n\r\nconst useResetPasswordScreen = require('@platform/screens/auth/ResetPasswordScreen/useResetPasswordScreen').default;\r\n\r\njest.mock('@hooks', () => ({\r\n  useAuth: jest.fn(),\r\n  useI18n: jest.fn(),\r\n  useNetwork: jest.fn(),\r\n}));\r\n\r\njest.mock('expo-router', () => ({\r\n  useRouter: jest.fn(),\r\n}));\r\n\r\nconst act = TestRenderer.act;\r\nconst renderHook = (hook) => {\r\n  const result = {};\r\n  let renderer;\r\n\r\n  const HookHarness = () => {\r\n    const hookResult = hook();\r\n    Object.assign(result, hookResult);\r\n    return null;\r\n  };\r\n\r\n  act(() => {\r\n    renderer = TestRenderer.create(React.createElement(HookHarness));\r\n  });\r\n\r\n  return {\r\n    result: { current: result },\r\n    unmount: () => {\r\n      act(() => {\r\n        renderer.unmount();\r\n      });\r\n    },\r\n  };\r\n};\r\n\r\ndescribe('useResetPasswordScreen Hook', () => {\r\n  const resetPassword = jest.fn(() => Promise.resolve({}));\r\n  const clearError = jest.fn();\r\n  const push = jest.fn();\r\n  const t = jest.fn((key) => {\r\n    if (key === 'errors.codes.UNKNOWN_ERROR') return 'Unknown error';\r\n    if (key === 'errors.codes.BAD_REQUEST') return 'Bad request';\r\n    return key;\r\n  });\r\n\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    useAuth.mockReturnValue({\r\n      resetPassword,\r\n      clearError,\r\n      isLoading: false,\r\n      errorCode: null,\r\n    });\r\n    useI18n.mockReturnValue({ t });\r\n    useNetwork.mockReturnValue({ isOffline: false });\r\n    useRouter.mockReturnValue({ push });\r\n  });\r\n\r\n  it('flags password mismatch', () => {\r\n    const { result } = renderHook(() => useResetPasswordScreen());\r\n    act(() => {\r\n      result.current.handleChangePassword('Pass123!');\r\n      result.current.handleChangeConfirmPassword('Mismatch');\r\n    });\r\n    expect(result.current.passwordMismatch).toBe(true);\r\n  });\r\n\r\n  it('submits reset password payload', async () => {\r\n    const { result } = renderHook(() => useResetPasswordScreen());\r\n    act(() => {\r\n      result.current.handleChangeToken('token');\r\n      result.current.handleChangePassword('Pass123!');\r\n      result.current.handleChangeConfirmPassword('Pass123!');\r\n    });\r\n    await act(async () => {\r\n      await result.current.handleSubmit();\r\n    });\r\n    expect(clearError).toHaveBeenCalled();\r\n    expect(resetPassword).toHaveBeenCalledWith({\r\n      token: 'token',\r\n      new_password: 'Pass123!',\r\n      confirm_password: 'Pass123!',\r\n    });\r\n  });\r\n\r\n  it('maps error codes to i18n messages', () => {\r\n    useAuth.mockReturnValue({\r\n      resetPassword,\r\n      clearError,\r\n      isLoading: false,\r\n      errorCode: 'BAD_REQUEST',\r\n    });\r\n    const { result } = renderHook(() => useResetPasswordScreen());\r\n    expect(result.current.errorMessage).toBe('Bad request');\r\n  });\r\n\r\n  it('handles navigation actions', () => {\r\n    const { result } = renderHook(() => useResetPasswordScreen());\r\n    act(() => {\r\n      result.current.handleGoToLogin();\r\n    });\r\n    expect(push).toHaveBeenCalledWith('/login');\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}