{"version":3,"names":["useCallback","useMemo","useAsyncState","cov_18kc2ir1fi","s","useCrud","actions","arguments","length","undefined","b","f","_ref","isLoading","errorCode","data","start","succeed","fail","reset","run","_ref2","_asyncToGenerator","action","_len","args","Array","_key","result","apply","error","code","_x","boundActions","Object","entries","reduce","acc","_ref3","_ref4","_slicedToArray","key","_len2","_key2","concat","assign"],"sources":["useCrud.js"],"sourcesContent":["/**\r\n * useCrud Hook\r\n * Standard async CRUD wrapper for feature usecases\r\n * File: useCrud.js\r\n */\r\nimport { useCallback, useMemo } from 'react';\r\nimport useAsyncState from '@hooks/useAsyncState';\r\n\r\nconst useCrud = (actions = {}) => {\r\n  const { isLoading, errorCode, data, start, succeed, fail, reset } = useAsyncState();\r\n\r\n  const run = useCallback(\r\n    async (action, ...args) => {\r\n      start();\r\n      try {\r\n        const result = await action(...args);\r\n        succeed(result);\r\n        return result;\r\n      } catch (error) {\r\n        fail(error?.code);\r\n        throw error;\r\n      }\r\n    },\r\n    [start, succeed, fail]\r\n  );\r\n\r\n  const boundActions = useMemo(() => {\r\n    return Object.entries(actions || {}).reduce((acc, [key, action]) => {\r\n      if (typeof action !== 'function') return acc;\r\n      acc[key] = (...args) => run(action, ...args);\r\n      return acc;\r\n    }, {});\r\n  }, [actions, run]);\r\n\r\n  return {\r\n    isLoading,\r\n    errorCode,\r\n    data,\r\n    reset,\r\n    ...boundActions,\r\n  };\r\n};\r\n\r\nexport default useCrud;\r\n"],"mappings":"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","ignoreList":[]}