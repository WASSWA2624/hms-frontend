d02f6bc26257cb40b553ed21fe3aac59
_getJestObj().mock("../../logging", function () {
  return {
    logger: {
      error: jest.fn()
    }
  };
});
_getJestObj().mock("../../errors/error.handler", function () {
  return {
    handleError: jest.fn(function (error) {
      return {
        code: 'TEST_ERROR',
        message: 'Test error',
        safeMessage: 'Test error',
        severity: 'error'
      };
    })
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _react = _interopRequireDefault(require("react"));
var _reactNative = require("react-native");
var _reactNative2 = require("@testing-library/react-native");
var _ErrorBoundary = _interopRequireDefault(require("../../errors/ErrorBoundary"));
var _logging = require("../../logging");
var _error = require("../../errors/error.handler");
var _jsxRuntime = require("react/jsx-runtime");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('errors/ErrorBoundary.jsx', function () {
  beforeEach(function () {
    jest.clearAllMocks();
    jest.spyOn(console, 'error').mockImplementation(function () {});
  });
  afterEach(function () {
    console.error.mockRestore();
  });
  test('should render children when no error', function () {
    var _render = (0, _reactNative2.render)((0, _jsxRuntime.jsx)(_ErrorBoundary.default, {
        children: (0, _jsxRuntime.jsx)(_reactNative.Text, {
          children: "Test Content"
        })
      })),
      getByText = _render.getByText;
    expect(getByText('Test Content')).toBeTruthy();
  });
  test('should catch errors and display fallback UI', function () {
    var ThrowError = function ThrowError() {
      throw new Error('Test error');
    };
    var _render2 = (0, _reactNative2.render)((0, _jsxRuntime.jsx)(_ErrorBoundary.default, {
        children: (0, _jsxRuntime.jsx)(ThrowError, {})
      })),
      getByText = _render2.getByText;
    expect(getByText('Something went wrong')).toBeTruthy();
  });
  test('should log error when caught', function () {
    var ThrowError = function ThrowError() {
      throw new Error('Test error');
    };
    (0, _reactNative2.render)((0, _jsxRuntime.jsx)(_ErrorBoundary.default, {
      children: (0, _jsxRuntime.jsx)(ThrowError, {})
    }));
    expect(_error.handleError).toHaveBeenCalled();
    expect(_logging.logger.error).toHaveBeenCalled();
  });
  test('should allow retry after error', function () {
    var ThrowError = function ThrowError() {
      throw new Error('Test error');
    };
    var _render3 = (0, _reactNative2.render)((0, _jsxRuntime.jsx)(_ErrorBoundary.default, {
        children: (0, _jsxRuntime.jsx)(ThrowError, {})
      })),
      getByText = _render3.getByText,
      getByLabelText = _render3.getByLabelText;
    expect(getByText('Something went wrong')).toBeTruthy();
    var retryButton = getByLabelText('Retry');
    expect(retryButton).toBeTruthy();
    _reactNative2.fireEvent.press(retryButton);
    expect(retryButton).toBeTruthy();
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJsb2dnZXIiLCJlcnJvciIsImplc3QiLCJmbiIsImhhbmRsZUVycm9yIiwiY29kZSIsIm1lc3NhZ2UiLCJzYWZlTWVzc2FnZSIsInNldmVyaXR5IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJkZWZhdWx0IiwiX3JlYWN0IiwiX3JlYWN0TmF0aXZlIiwiX3JlYWN0TmF0aXZlMiIsIl9FcnJvckJvdW5kYXJ5IiwiX2xvZ2dpbmciLCJfZXJyb3IiLCJfanN4UnVudGltZSIsIl9yZXF1aXJlIiwiZGVzY3JpYmUiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInNweU9uIiwiY29uc29sZSIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsImFmdGVyRWFjaCIsIm1vY2tSZXN0b3JlIiwidGVzdCIsIl9yZW5kZXIiLCJyZW5kZXIiLCJqc3giLCJjaGlsZHJlbiIsIlRleHQiLCJnZXRCeVRleHQiLCJleHBlY3QiLCJ0b0JlVHJ1dGh5IiwiVGhyb3dFcnJvciIsIkVycm9yIiwiX3JlbmRlcjIiLCJ0b0hhdmVCZWVuQ2FsbGVkIiwiX3JlbmRlcjMiLCJnZXRCeUxhYmVsVGV4dCIsInJldHJ5QnV0dG9uIiwiZmlyZUV2ZW50IiwicHJlc3MiXSwic291cmNlcyI6WyJFcnJvckJvdW5kYXJ5LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIEVycm9yIEJvdW5kYXJ5IENvbXBvbmVudCBUZXN0c1xyXG4gKiBGaWxlOiBFcnJvckJvdW5kYXJ5LnRlc3QuanNcclxuICovXHJcbmltcG9ydCBSZWFjdCBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IFRleHQgfSBmcm9tICdyZWFjdC1uYXRpdmUnO1xyXG5pbXBvcnQgeyByZW5kZXIsIGZpcmVFdmVudCB9IGZyb20gJ0B0ZXN0aW5nLWxpYnJhcnkvcmVhY3QtbmF0aXZlJztcclxuaW1wb3J0IEVycm9yQm91bmRhcnkgZnJvbSAnQGVycm9ycy9FcnJvckJvdW5kYXJ5JztcclxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQGxvZ2dpbmcnO1xyXG5pbXBvcnQgeyBoYW5kbGVFcnJvciB9IGZyb20gJ0BlcnJvcnMvZXJyb3IuaGFuZGxlcic7XHJcblxyXG5qZXN0Lm1vY2soJ0Bsb2dnaW5nJywgKCkgPT4gKHtcclxuICBsb2dnZXI6IHtcclxuICAgIGVycm9yOiBqZXN0LmZuKCksXHJcbiAgfSxcclxufSkpO1xyXG5cclxuamVzdC5tb2NrKCdAZXJyb3JzL2Vycm9yLmhhbmRsZXInLCAoKSA9PiAoe1xyXG4gIGhhbmRsZUVycm9yOiBqZXN0LmZuKChlcnJvcikgPT4gKHtcclxuICAgIGNvZGU6ICdURVNUX0VSUk9SJyxcclxuICAgIG1lc3NhZ2U6ICdUZXN0IGVycm9yJyxcclxuICAgIHNhZmVNZXNzYWdlOiAnVGVzdCBlcnJvcicsXHJcbiAgICBzZXZlcml0eTogJ2Vycm9yJyxcclxuICB9KSksXHJcbn0pKTtcclxuXHJcbmRlc2NyaWJlKCdlcnJvcnMvRXJyb3JCb3VuZGFyeS5qc3gnLCAoKSA9PiB7XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcclxuICAgIC8vIFN1cHByZXNzIGNvbnNvbGUuZXJyb3IgZm9yIGVycm9yIGJvdW5kYXJ5IHRlc3RzXHJcbiAgICBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigoKSA9PiB7fSk7XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyRWFjaCgoKSA9PiB7XHJcbiAgICBjb25zb2xlLmVycm9yLm1vY2tSZXN0b3JlKCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCByZW5kZXIgY2hpbGRyZW4gd2hlbiBubyBlcnJvcicsICgpID0+IHtcclxuICAgIGNvbnN0IHsgZ2V0QnlUZXh0IH0gPSByZW5kZXIoXHJcbiAgICAgIDxFcnJvckJvdW5kYXJ5PlxyXG4gICAgICAgIDxUZXh0PlRlc3QgQ29udGVudDwvVGV4dD5cclxuICAgICAgPC9FcnJvckJvdW5kYXJ5PlxyXG4gICAgKTtcclxuICAgIGV4cGVjdChnZXRCeVRleHQoJ1Rlc3QgQ29udGVudCcpKS50b0JlVHJ1dGh5KCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBjYXRjaCBlcnJvcnMgYW5kIGRpc3BsYXkgZmFsbGJhY2sgVUknLCAoKSA9PiB7XHJcbiAgICBjb25zdCBUaHJvd0Vycm9yID0gKCkgPT4ge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgeyBnZXRCeVRleHQgfSA9IHJlbmRlcihcclxuICAgICAgPEVycm9yQm91bmRhcnk+XHJcbiAgICAgICAgPFRocm93RXJyb3IgLz5cclxuICAgICAgPC9FcnJvckJvdW5kYXJ5PlxyXG4gICAgKTtcclxuXHJcbiAgICBleHBlY3QoZ2V0QnlUZXh0KCdTb21ldGhpbmcgd2VudCB3cm9uZycpKS50b0JlVHJ1dGh5KCk7XHJcbiAgfSk7XHJcblxyXG4gIHRlc3QoJ3Nob3VsZCBsb2cgZXJyb3Igd2hlbiBjYXVnaHQnLCAoKSA9PiB7XHJcbiAgICBjb25zdCBUaHJvd0Vycm9yID0gKCkgPT4ge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKTtcclxuICAgIH07XHJcblxyXG4gICAgcmVuZGVyKFxyXG4gICAgICA8RXJyb3JCb3VuZGFyeT5cclxuICAgICAgICA8VGhyb3dFcnJvciAvPlxyXG4gICAgICA8L0Vycm9yQm91bmRhcnk+XHJcbiAgICApO1xyXG5cclxuICAgIGV4cGVjdChoYW5kbGVFcnJvcikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gICAgZXhwZWN0KGxvZ2dlci5lcnJvcikudG9IYXZlQmVlbkNhbGxlZCgpO1xyXG4gIH0pO1xyXG5cclxuICB0ZXN0KCdzaG91bGQgYWxsb3cgcmV0cnkgYWZ0ZXIgZXJyb3InLCAoKSA9PiB7XHJcbiAgICBjb25zdCBUaHJvd0Vycm9yID0gKCkgPT4ge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1Rlc3QgZXJyb3InKTtcclxuICAgIH07XHJcblxyXG4gICAgY29uc3QgeyBnZXRCeVRleHQsIGdldEJ5TGFiZWxUZXh0IH0gPSByZW5kZXIoXHJcbiAgICAgIDxFcnJvckJvdW5kYXJ5PlxyXG4gICAgICAgIDxUaHJvd0Vycm9yIC8+XHJcbiAgICAgIDwvRXJyb3JCb3VuZGFyeT5cclxuICAgICk7XHJcblxyXG4gICAgLy8gVmVyaWZ5IGVycm9yIGlzIGNhdWdodCBhbmQgZmFsbGJhY2sgVUkgaXMgc2hvd25cclxuICAgIGV4cGVjdChnZXRCeVRleHQoJ1NvbWV0aGluZyB3ZW50IHdyb25nJykpLnRvQmVUcnV0aHkoKTtcclxuXHJcbiAgICAvLyBWZXJpZnkgcmV0cnkgYnV0dG9uIGV4aXN0cyBhbmQgY2FuIGJlIHByZXNzZWRcclxuICAgIGNvbnN0IHJldHJ5QnV0dG9uID0gZ2V0QnlMYWJlbFRleHQoJ1JldHJ5Jyk7XHJcbiAgICBleHBlY3QocmV0cnlCdXR0b24pLnRvQmVUcnV0aHkoKTtcclxuICAgIFxyXG4gICAgLy8gUHJlc3MgcmV0cnkgYnV0dG9uIC0gdGhpcyBzaG91bGQgcmVzZXQgdGhlIGVycm9yIHN0YXRlXHJcbiAgICAvLyBOb3RlOiBGdWxsIHJlc2V0IGJlaGF2aW9yIGlzIGNvbXBsZXggdG8gdGVzdCBkdWUgdG8gUmVhY3QgZXJyb3IgYm91bmRhcnkgbGlmZWN5Y2xlXHJcbiAgICAvLyBUaGlzIHRlc3QgdmVyaWZpZXMgdGhlIHJldHJ5IG1lY2hhbmlzbSBleGlzdHMgYW5kIGlzIGFjY2Vzc2libGVcclxuICAgIGZpcmVFdmVudC5wcmVzcyhyZXRyeUJ1dHRvbik7XHJcbiAgICBcclxuICAgIC8vIEFmdGVyIHByZXNzaW5nIHJldHJ5LCBFcnJvckJvdW5kYXJ5J3MgaW50ZXJuYWwgc3RhdGUgc2hvdWxkIGJlIHJlc2V0XHJcbiAgICAvLyBUaGUgY29tcG9uZW50IHNob3VsZCBiZSByZWFkeSB0byByZW5kZXIgY2hpbGRyZW4gYWdhaW4gb24gbmV4dCByZW5kZXIgY3ljbGVcclxuICAgIGV4cGVjdChyZXRyeUJ1dHRvbikudG9CZVRydXRoeSgpO1xyXG4gIH0pO1xyXG59KTtcclxuXHJcbiJdLCJtYXBwaW5ncyI6IkFBV0FBLFdBQUEsR0FBS0MsSUFBSSxrQkFBYTtFQUFBLE9BQU87SUFDM0JDLE1BQU0sRUFBRTtNQUNOQyxLQUFLLEVBQUVDLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0lBQ2pCO0VBQ0YsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUVITCxXQUFBLEdBQUtDLElBQUksK0JBQTBCO0VBQUEsT0FBTztJQUN4Q0ssV0FBVyxFQUFFRixJQUFJLENBQUNDLEVBQUUsQ0FBQyxVQUFDRixLQUFLO01BQUEsT0FBTTtRQUMvQkksSUFBSSxFQUFFLFlBQVk7UUFDbEJDLE9BQU8sRUFBRSxZQUFZO1FBQ3JCQyxXQUFXLEVBQUUsWUFBWTtRQUN6QkMsUUFBUSxFQUFFO01BQ1osQ0FBQztJQUFBLENBQUM7RUFDSixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBQUMsSUFBQUMsc0JBQUEsR0FBQUMsT0FBQSxpREFBQUMsT0FBQTtBQXBCSixJQUFBQyxNQUFBLEdBQUFILHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBRyxZQUFBLEdBQUFILE9BQUE7QUFDQSxJQUFBSSxhQUFBLEdBQUFKLE9BQUE7QUFDQSxJQUFBSyxjQUFBLEdBQUFOLHNCQUFBLENBQUFDLE9BQUE7QUFDQSxJQUFBTSxRQUFBLEdBQUFOLE9BQUE7QUFDQSxJQUFBTyxNQUFBLEdBQUFQLE9BQUE7QUFBb0QsSUFBQVEsV0FBQSxHQUFBUixPQUFBO0FBQUEsU0FBQVosWUFBQTtFQUFBLElBQUFxQixRQUFBLEdBQUFULE9BQUE7SUFBQVIsSUFBQSxHQUFBaUIsUUFBQSxDQUFBakIsSUFBQTtFQUFBSixXQUFBLFlBQUFBLFlBQUE7SUFBQSxPQUFBSSxJQUFBO0VBQUE7RUFBQSxPQUFBQSxJQUFBO0FBQUE7QUFpQnBEa0IsUUFBUSxDQUFDLDBCQUEwQixFQUFFLFlBQU07RUFDekNDLFVBQVUsQ0FBQyxZQUFNO0lBQ2ZuQixJQUFJLENBQUNvQixhQUFhLENBQUMsQ0FBQztJQUVwQnBCLElBQUksQ0FBQ3FCLEtBQUssQ0FBQ0MsT0FBTyxFQUFFLE9BQU8sQ0FBQyxDQUFDQyxrQkFBa0IsQ0FBQyxZQUFNLENBQUMsQ0FBQyxDQUFDO0VBQzNELENBQUMsQ0FBQztFQUVGQyxTQUFTLENBQUMsWUFBTTtJQUNkRixPQUFPLENBQUN2QixLQUFLLENBQUMwQixXQUFXLENBQUMsQ0FBQztFQUM3QixDQUFDLENBQUM7RUFFRkMsSUFBSSxDQUFDLHNDQUFzQyxFQUFFLFlBQU07SUFDakQsSUFBQUMsT0FBQSxHQUFzQixJQUFBQyxvQkFBTSxFQUMxQixJQUFBWixXQUFBLENBQUFhLEdBQUEsRUFBQ2hCLGNBQUEsQ0FBQUosT0FBYTtRQUFBcUIsUUFBQSxFQUNaLElBQUFkLFdBQUEsQ0FBQWEsR0FBQSxFQUFDbEIsWUFBQSxDQUFBb0IsSUFBSTtVQUFBRCxRQUFBLEVBQUM7UUFBWSxDQUFNO01BQUMsQ0FDWixDQUNqQixDQUFDO01BSk9FLFNBQVMsR0FBQUwsT0FBQSxDQUFUSyxTQUFTO0lBS2pCQyxNQUFNLENBQUNELFNBQVMsQ0FBQyxjQUFjLENBQUMsQ0FBQyxDQUFDRSxVQUFVLENBQUMsQ0FBQztFQUNoRCxDQUFDLENBQUM7RUFFRlIsSUFBSSxDQUFDLDZDQUE2QyxFQUFFLFlBQU07SUFDeEQsSUFBTVMsVUFBVSxHQUFHLFNBQWJBLFVBQVVBLENBQUEsRUFBUztNQUN2QixNQUFNLElBQUlDLEtBQUssQ0FBQyxZQUFZLENBQUM7SUFDL0IsQ0FBQztJQUVELElBQUFDLFFBQUEsR0FBc0IsSUFBQVQsb0JBQU0sRUFDMUIsSUFBQVosV0FBQSxDQUFBYSxHQUFBLEVBQUNoQixjQUFBLENBQUFKLE9BQWE7UUFBQXFCLFFBQUEsRUFDWixJQUFBZCxXQUFBLENBQUFhLEdBQUEsRUFBQ00sVUFBVSxJQUFFO01BQUMsQ0FDRCxDQUNqQixDQUFDO01BSk9ILFNBQVMsR0FBQUssUUFBQSxDQUFUTCxTQUFTO0lBTWpCQyxNQUFNLENBQUNELFNBQVMsQ0FBQyxzQkFBc0IsQ0FBQyxDQUFDLENBQUNFLFVBQVUsQ0FBQyxDQUFDO0VBQ3hELENBQUMsQ0FBQztFQUVGUixJQUFJLENBQUMsOEJBQThCLEVBQUUsWUFBTTtJQUN6QyxJQUFNUyxVQUFVLEdBQUcsU0FBYkEsVUFBVUEsQ0FBQSxFQUFTO01BQ3ZCLE1BQU0sSUFBSUMsS0FBSyxDQUFDLFlBQVksQ0FBQztJQUMvQixDQUFDO0lBRUQsSUFBQVIsb0JBQU0sRUFDSixJQUFBWixXQUFBLENBQUFhLEdBQUEsRUFBQ2hCLGNBQUEsQ0FBQUosT0FBYTtNQUFBcUIsUUFBQSxFQUNaLElBQUFkLFdBQUEsQ0FBQWEsR0FBQSxFQUFDTSxVQUFVLElBQUU7SUFBQyxDQUNELENBQ2pCLENBQUM7SUFFREYsTUFBTSxDQUFDL0Isa0JBQVcsQ0FBQyxDQUFDb0MsZ0JBQWdCLENBQUMsQ0FBQztJQUN0Q0wsTUFBTSxDQUFDbkMsZUFBTSxDQUFDQyxLQUFLLENBQUMsQ0FBQ3VDLGdCQUFnQixDQUFDLENBQUM7RUFDekMsQ0FBQyxDQUFDO0VBRUZaLElBQUksQ0FBQyxnQ0FBZ0MsRUFBRSxZQUFNO0lBQzNDLElBQU1TLFVBQVUsR0FBRyxTQUFiQSxVQUFVQSxDQUFBLEVBQVM7TUFDdkIsTUFBTSxJQUFJQyxLQUFLLENBQUMsWUFBWSxDQUFDO0lBQy9CLENBQUM7SUFFRCxJQUFBRyxRQUFBLEdBQXNDLElBQUFYLG9CQUFNLEVBQzFDLElBQUFaLFdBQUEsQ0FBQWEsR0FBQSxFQUFDaEIsY0FBQSxDQUFBSixPQUFhO1FBQUFxQixRQUFBLEVBQ1osSUFBQWQsV0FBQSxDQUFBYSxHQUFBLEVBQUNNLFVBQVUsSUFBRTtNQUFDLENBQ0QsQ0FDakIsQ0FBQztNQUpPSCxTQUFTLEdBQUFPLFFBQUEsQ0FBVFAsU0FBUztNQUFFUSxjQUFjLEdBQUFELFFBQUEsQ0FBZEMsY0FBYztJQU9qQ1AsTUFBTSxDQUFDRCxTQUFTLENBQUMsc0JBQXNCLENBQUMsQ0FBQyxDQUFDRSxVQUFVLENBQUMsQ0FBQztJQUd0RCxJQUFNTyxXQUFXLEdBQUdELGNBQWMsQ0FBQyxPQUFPLENBQUM7SUFDM0NQLE1BQU0sQ0FBQ1EsV0FBVyxDQUFDLENBQUNQLFVBQVUsQ0FBQyxDQUFDO0lBS2hDUSx1QkFBUyxDQUFDQyxLQUFLLENBQUNGLFdBQVcsQ0FBQztJQUk1QlIsTUFBTSxDQUFDUSxXQUFXLENBQUMsQ0FBQ1AsVUFBVSxDQUFDLENBQUM7RUFDbEMsQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119