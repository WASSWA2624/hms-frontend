{"version":3,"names":["_security","require","_logging","initSecurity","_initSecurity","apply","arguments","_asyncToGenerator2","default","accessToken","tokenManager","getAccessToken","refreshToken","getRefreshToken","isExpired","isTokenExpired","logger","info","error","message"],"sources":["init.security.js"],"sourcesContent":["/**\r\n * Security Initialization\r\n * File: init.security.js\r\n */\r\nimport { tokenManager } from '@security';\r\nimport { logger } from '@logging';\r\n\r\nexport async function initSecurity() {\r\n  try {\r\n    // Check if tokens exist and are valid\r\n    const accessToken = await tokenManager.getAccessToken();\r\n    const refreshToken = await tokenManager.getRefreshToken();\r\n    \r\n    if (accessToken) {\r\n      const isExpired = tokenManager.isTokenExpired(accessToken);\r\n      if (isExpired && refreshToken) {\r\n        logger.info('Access token expired, refresh token available');\r\n      } else if (isExpired) {\r\n        logger.info('Tokens expired, user will need to re-authenticate');\r\n      } else {\r\n        logger.info('Valid session found on startup');\r\n      }\r\n    } else {\r\n      logger.info('No session found on startup');\r\n    }\r\n    \r\n    // Initialize encryption keys (if needed)\r\n    // Encryption keys are initialized lazily when needed\r\n    \r\n    logger.info('Security initialized successfully');\r\n  } catch (error) {\r\n    // Security failures must not crash app, but should be logged\r\n    logger.error('Security initialization failed', { error: error.message });\r\n    // Don't throw - allow app to continue, but security features may be limited\r\n  }\r\n}\r\n\r\n"],"mappings":";;;;;;AAIA,IAAAA,SAAA,GAAAC,OAAA;AACA,IAAAC,QAAA,GAAAD,OAAA;AAAkC,SAEZE,YAAYA,CAAA;EAAA,OAAAC,aAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA;AAAA,SAAAF,cAAA;EAAAA,aAAA,OAAAG,kBAAA,CAAAC,OAAA,EAA3B,aAA8B;IACnC,IAAI;MAEF,IAAMC,WAAW,SAASC,sBAAY,CAACC,cAAc,CAAC,CAAC;MACvD,IAAMC,YAAY,SAASF,sBAAY,CAACG,eAAe,CAAC,CAAC;MAEzD,IAAIJ,WAAW,EAAE;QACf,IAAMK,SAAS,GAAGJ,sBAAY,CAACK,cAAc,CAACN,WAAW,CAAC;QAC1D,IAAIK,SAAS,IAAIF,YAAY,EAAE;UAC7BI,eAAM,CAACC,IAAI,CAAC,+CAA+C,CAAC;QAC9D,CAAC,MAAM,IAAIH,SAAS,EAAE;UACpBE,eAAM,CAACC,IAAI,CAAC,mDAAmD,CAAC;QAClE,CAAC,MAAM;UACLD,eAAM,CAACC,IAAI,CAAC,gCAAgC,CAAC;QAC/C;MACF,CAAC,MAAM;QACLD,eAAM,CAACC,IAAI,CAAC,6BAA6B,CAAC;MAC5C;MAKAD,eAAM,CAACC,IAAI,CAAC,mCAAmC,CAAC;IAClD,CAAC,CAAC,OAAOC,KAAK,EAAE;MAEdF,eAAM,CAACE,KAAK,CAAC,gCAAgC,EAAE;QAAEA,KAAK,EAAEA,KAAK,CAACC;MAAQ,CAAC,CAAC;IAE1E;EACF,CAAC;EAAA,OAAAf,aAAA,CAAAC,KAAA,OAAAC,SAAA;AAAA","ignoreList":[]}