{"version":3,"names":["_getJestObj","mock","loginUseCase","jest","fn","registerUseCase","logoutUseCase","refreshSessionUseCase","loadCurrentUserUseCase","_interopRequireDefault","require","default","_asyncToGenerator2","_toolkit","_auth","_auth2","_require","createStore","configureStore","reducer","auth","describe","beforeEach","mockResolvedValue","id","accessToken","refreshToken","it","store","dispatch","actions","login","email","password","expect","getState","isAuthenticated","toBe","register","user","toEqual","logout","toBeNull","refreshSession","loadCurrentUser","mockRejectedValueOnce","code","errorCode","state","isLoading","lastUpdated","clearAuth","clearedError","clearAuthError"],"sources":["auth.slice.test.js"],"sourcesContent":["/**\r\n * Auth Slice Tests\r\n * File: auth.slice.test.js\r\n */\r\nimport { configureStore } from '@reduxjs/toolkit';\r\n\r\njest.mock('@features/auth', () => ({\r\n  loginUseCase: jest.fn(),\r\n  registerUseCase: jest.fn(),\r\n  logoutUseCase: jest.fn(),\r\n  refreshSessionUseCase: jest.fn(),\r\n  loadCurrentUserUseCase: jest.fn(),\r\n}));\r\n\r\nimport { actions, reducer } from '@store/slices/auth.slice';\r\nimport {\r\n  loginUseCase,\r\n  registerUseCase,\r\n  logoutUseCase,\r\n  refreshSessionUseCase,\r\n  loadCurrentUserUseCase,\r\n} from '@features/auth';\r\n\r\nconst createStore = () =>\r\n  configureStore({\r\n    reducer: {\r\n      auth: reducer,\r\n    },\r\n  });\r\n\r\ndescribe('auth.slice', () => {\r\n  beforeEach(() => {\r\n    loginUseCase.mockResolvedValue({ id: '1' });\r\n    registerUseCase.mockResolvedValue({ id: '2' });\r\n    logoutUseCase.mockResolvedValue(true);\r\n    refreshSessionUseCase.mockResolvedValue({ accessToken: 'a', refreshToken: 'b' });\r\n    loadCurrentUserUseCase.mockResolvedValue({ id: '3' });\r\n  });\r\n\r\n  it('handles login/register/logout flows', async () => {\r\n    const store = createStore();\r\n    await store.dispatch(actions.login({ email: 'user', password: 'pass' }));\r\n    expect(store.getState().auth.isAuthenticated).toBe(true);\r\n    await store.dispatch(actions.register({ email: 'user' }));\r\n    expect(store.getState().auth.user).toEqual({ id: '2' });\r\n    await store.dispatch(actions.logout());\r\n    expect(store.getState().auth.user).toBeNull();\r\n  });\r\n\r\n  it('handles refresh and load current user', async () => {\r\n    const store = createStore();\r\n    await store.dispatch(actions.refreshSession());\r\n    expect(store.getState().auth.isAuthenticated).toBe(true);\r\n    await store.dispatch(actions.loadCurrentUser());\r\n    expect(store.getState().auth.user).toEqual({ id: '3' });\r\n  });\r\n\r\n  it('stores error codes on failures', async () => {\r\n    const store = createStore();\r\n    loginUseCase.mockRejectedValueOnce({ code: 'UNAUTHORIZED' });\r\n    await store.dispatch(actions.login({ email: 'user', password: 'pass' }));\r\n    expect(store.getState().auth.errorCode).toBe('UNAUTHORIZED');\r\n  });\r\n\r\n  it('clears auth state', () => {\r\n    const state = reducer(\r\n      { user: { id: '1' }, isAuthenticated: true, isLoading: false, errorCode: 'ERROR', lastUpdated: null },\r\n      actions.clearAuth()\r\n    );\r\n    expect(state.user).toBeNull();\r\n    expect(state.isAuthenticated).toBe(false);\r\n    const clearedError = reducer(state, actions.clearAuthError());\r\n    expect(clearedError.errorCode).toBeNull();\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}