{"version":3,"names":["_react","require","_expoRouter","_types","useSettingsScreen","router","useRouter","pathname","usePathname","getCurrentTab","useCallback","_tabMap$lastPart","parts","split","filter","Boolean","lastPart","length","segmentToTab","SETTINGS_TABS","USER","USER_PROFILE","ROLE","PERMISSION","ROLE_PERMISSION","USER_ROLE","USER_SESSION","TENANT","FACILITY","BRANCH","DEPARTMENT","UNIT","ROOM","WARD","BED","ADDRESS","CONTACT","API_KEY","API_KEY_PERMISSION","USER_MFA","OAUTH_ACCOUNT","_segmentToTab$segment","segment","GENERAL","_segmentToTab$_segmen","tabMap","Object","assign","selectedTab","currentTabId","tabs","useMemo","SETTINGS_TAB_ORDER","map","tabKey","_SETTINGS_TAB_ICONS$t","id","label","testID","icon","SETTINGS_TAB_ICONS","groupedTabs","SETTINGS_SIDEBAR_GROUPS","group","labelKey","_SETTINGS_TAB_ICONS$t2","handleTabChange","tabId","_routeMap","routeMap","_defineProperty2","default","route","push","onTabChange","accessibilityLabel","_default","exports"],"sources":["useSettingsScreen.js"],"sourcesContent":["/**\r\n * useSettingsScreen Hook\r\n * File: useSettingsScreen.js\r\n *\r\n * Manages the Settings main screen logic including tab navigation\r\n * Per features-domain.mdc: Business logic separated from UI\r\n */\r\n\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useRouter, usePathname } from 'expo-router';\r\nimport { SETTINGS_TABS, SETTINGS_TAB_ORDER, SETTINGS_SIDEBAR_GROUPS, SETTINGS_TAB_ICONS } from './types';\r\n\r\n/**\r\n * useSettingsScreen hook\r\n * Manages Settings screen tab state and navigation\r\n * \r\n * @returns {Object} Settings screen state and handlers\r\n */\r\nconst useSettingsScreen = () => {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  \r\n  // Extract current tab from pathname\r\n  // E.g., /settings/users -> USER; /settings/tenants/create -> TENANT; /settings/facilities/[id]/edit -> FACILITY\r\n  const getCurrentTab = useCallback(() => {\r\n    const parts = pathname.split('/').filter(Boolean);\r\n    const lastPart = parts[parts.length - 1];\r\n\r\n    const segmentToTab = {\r\n      'users': SETTINGS_TABS.USER,\r\n      'user-profiles': SETTINGS_TABS.USER_PROFILE,\r\n      'roles': SETTINGS_TABS.ROLE,\r\n      'permissions': SETTINGS_TABS.PERMISSION,\r\n      'role-permissions': SETTINGS_TABS.ROLE_PERMISSION,\r\n      'user-roles': SETTINGS_TABS.USER_ROLE,\r\n      'user-sessions': SETTINGS_TABS.USER_SESSION,\r\n      'tenants': SETTINGS_TABS.TENANT,\r\n      'facilities': SETTINGS_TABS.FACILITY,\r\n      'branches': SETTINGS_TABS.BRANCH,\r\n      'departments': SETTINGS_TABS.DEPARTMENT,\r\n      'units': SETTINGS_TABS.UNIT,\r\n      'rooms': SETTINGS_TABS.ROOM,\r\n      'wards': SETTINGS_TABS.WARD,\r\n      'beds': SETTINGS_TABS.BED,\r\n      'addresses': SETTINGS_TABS.ADDRESS,\r\n      'contacts': SETTINGS_TABS.CONTACT,\r\n      'api-keys': SETTINGS_TABS.API_KEY,\r\n      'api-key-permissions': SETTINGS_TABS.API_KEY_PERMISSION,\r\n      'user-mfas': SETTINGS_TABS.USER_MFA,\r\n      'oauth-accounts': SETTINGS_TABS.OAUTH_ACCOUNT,\r\n    };\r\n\r\n    if (lastPart === 'create' && parts.length >= 2) {\r\n      const segment = parts[parts.length - 2];\r\n      return segmentToTab[segment] ?? SETTINGS_TABS.GENERAL;\r\n    }\r\n    if (lastPart === 'edit' && parts.length >= 3) {\r\n      const segment = parts[parts.length - 3];\r\n      return segmentToTab[segment] ?? SETTINGS_TABS.GENERAL;\r\n    }\r\n\r\n    const tabMap = {\r\n      '': SETTINGS_TABS.GENERAL,\r\n      'general': SETTINGS_TABS.GENERAL,\r\n      'settings': SETTINGS_TABS.GENERAL,\r\n      ...segmentToTab,\r\n    };\r\n    return tabMap[lastPart] ?? SETTINGS_TABS.GENERAL;\r\n  }, [pathname]);\r\n\r\n  const selectedTab = getCurrentTab();\r\n  const currentTabId = selectedTab;\r\n\r\n  const tabs = useMemo(() => SETTINGS_TAB_ORDER.map(tabKey => ({\r\n    id: tabKey,\r\n    label: `settings.tabs.${tabKey}`,\r\n    testID: `settings-tab-${tabKey}`,\r\n    icon: SETTINGS_TAB_ICONS[tabKey] ?? null,\r\n  })), []);\r\n\r\n  const groupedTabs = useMemo(() => SETTINGS_SIDEBAR_GROUPS.map(group => ({\r\n    id: group.id,\r\n    labelKey: group.labelKey,\r\n    tabs: group.tabs.map(tabKey => ({\r\n      id: tabKey,\r\n      label: `settings.tabs.${tabKey}`,\r\n      testID: `settings-tab-${tabKey}`,\r\n      icon: SETTINGS_TAB_ICONS[tabKey] ?? null,\r\n    })),\r\n  })), []);\r\n\r\n  const handleTabChange = useCallback((tabId) => {\r\n    // Map tab to route path; navigation updates pathname and currentTabId follows\r\n    const routeMap = {\r\n      [SETTINGS_TABS.GENERAL]: '/settings',\r\n      [SETTINGS_TABS.USER]: '/settings/users',\r\n      [SETTINGS_TABS.USER_PROFILE]: '/settings/user-profiles',\r\n      [SETTINGS_TABS.ROLE]: '/settings/roles',\r\n      [SETTINGS_TABS.PERMISSION]: '/settings/permissions',\r\n      [SETTINGS_TABS.ROLE_PERMISSION]: '/settings/role-permissions',\r\n      [SETTINGS_TABS.USER_ROLE]: '/settings/user-roles',\r\n      [SETTINGS_TABS.USER_SESSION]: '/settings/user-sessions',\r\n      [SETTINGS_TABS.TENANT]: '/settings/tenants',\r\n      [SETTINGS_TABS.FACILITY]: '/settings/facilities',\r\n      [SETTINGS_TABS.BRANCH]: '/settings/branches',\r\n      [SETTINGS_TABS.DEPARTMENT]: '/settings/departments',\r\n      [SETTINGS_TABS.UNIT]: '/settings/units',\r\n      [SETTINGS_TABS.ROOM]: '/settings/rooms',\r\n      [SETTINGS_TABS.WARD]: '/settings/wards',\r\n      [SETTINGS_TABS.BED]: '/settings/beds',\r\n      [SETTINGS_TABS.ADDRESS]: '/settings/addresses',\r\n      [SETTINGS_TABS.CONTACT]: '/settings/contacts',\r\n      [SETTINGS_TABS.API_KEY]: '/settings/api-keys',\r\n      [SETTINGS_TABS.API_KEY_PERMISSION]: '/settings/api-key-permissions',\r\n      [SETTINGS_TABS.USER_MFA]: '/settings/user-mfas',\r\n      [SETTINGS_TABS.OAUTH_ACCOUNT]: '/settings/oauth-accounts',\r\n    };\r\n    \r\n    const route = routeMap[tabId];\r\n    if (route) {\r\n      router.push(route);\r\n    }\r\n  }, [router]);\r\n\r\n  return {\r\n    selectedTab,\r\n    currentTabId,\r\n    tabs,\r\n    groupedTabs,\r\n    onTabChange: handleTabChange,\r\n    testID: 'settings-screen',\r\n    accessibilityLabel: 'settings.screen.label',\r\n  };\r\n};\r\n\r\nexport default useSettingsScreen;\r\n"],"mappings":"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","ignoreList":[]}