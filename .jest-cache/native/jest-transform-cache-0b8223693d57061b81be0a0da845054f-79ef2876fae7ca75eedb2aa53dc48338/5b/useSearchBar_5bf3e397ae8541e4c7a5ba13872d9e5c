3a3a63ad4919e0d880e727e3859b9984
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var _hooks = require("../../../../hooks");
var useSearchBar = function useSearchBar(_ref) {
  var _ref$value = _ref.value,
    value = _ref$value === void 0 ? '' : _ref$value,
    onChange = _ref.onChange,
    onChangeText = _ref.onChangeText,
    onSearch = _ref.onSearch,
    _ref$debounceMs = _ref.debounceMs,
    debounceMs = _ref$debounceMs === void 0 ? 300 : _ref$debounceMs;
  var _useState = (0, _react.useState)(value),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    localValue = _useState2[0],
    setLocalValue = _useState2[1];
  var debouncedValue = (0, _hooks.useDebounce)(localValue, debounceMs);
  var hasValue = localValue.length > 0;
  (0, _react.useEffect)(function () {
    setLocalValue(value);
  }, [value]);
  (0, _react.useEffect)(function () {
    if (onSearch && debouncedValue !== undefined && debouncedValue !== value) {
      onSearch(debouncedValue);
    }
  }, [debouncedValue, onSearch, value]);
  var handleChange = function handleChange(e) {
    var _ref2, _e$target$value, _e$target;
    var newValue = (_ref2 = (_e$target$value = e == null || (_e$target = e.target) == null ? void 0 : _e$target.value) != null ? _e$target$value : e) != null ? _ref2 : '';
    setLocalValue(newValue);
    if (onChange) {
      if (e && typeof e === 'object' && 'target' in e) {
        onChange(e);
      } else if (typeof e === 'string') {
        onChange(e);
      } else {
        onChange({
          target: {
            value: newValue
          }
        });
      }
    }
    if (onChangeText && typeof newValue === 'string') {
      onChangeText(newValue);
    }
  };
  var handleChangeText = function handleChangeText(newValue) {
    setLocalValue(newValue);
    if (onChangeText) {
      onChangeText(newValue);
    }
    if (onChange) {
      onChange({
        target: {
          value: newValue
        }
      });
    }
  };
  var handleClear = function handleClear() {
    setLocalValue('');
    if (onChange) {
      onChange({
        target: {
          value: ''
        }
      });
    }
    if (onChangeText) {
      onChangeText('');
    }
    if (onSearch) {
      onSearch('');
    }
  };
  var handleSubmit = function handleSubmit() {
    var currentValue = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : localValue;
    if (onSearch) {
      onSearch(currentValue);
    }
  };
  return {
    localValue: localValue,
    hasValue: hasValue,
    handleChange: handleChange,
    handleChangeText: handleChangeText,
    handleClear: handleClear,
    handleSubmit: handleSubmit
  };
};
var _default = exports.default = useSearchBar;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2hvb2tzIiwidXNlU2VhcmNoQmFyIiwiX3JlZiIsIl9yZWYkdmFsdWUiLCJ2YWx1ZSIsIm9uQ2hhbmdlIiwib25DaGFuZ2VUZXh0Iiwib25TZWFyY2giLCJfcmVmJGRlYm91bmNlTXMiLCJkZWJvdW5jZU1zIiwiX3VzZVN0YXRlIiwidXNlU3RhdGUiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsImxvY2FsVmFsdWUiLCJzZXRMb2NhbFZhbHVlIiwiZGVib3VuY2VkVmFsdWUiLCJ1c2VEZWJvdW5jZSIsImhhc1ZhbHVlIiwibGVuZ3RoIiwidXNlRWZmZWN0IiwidW5kZWZpbmVkIiwiaGFuZGxlQ2hhbmdlIiwiZSIsIl9yZWYyIiwiX2UkdGFyZ2V0JHZhbHVlIiwiX2UkdGFyZ2V0IiwibmV3VmFsdWUiLCJ0YXJnZXQiLCJoYW5kbGVDaGFuZ2VUZXh0IiwiaGFuZGxlQ2xlYXIiLCJoYW5kbGVTdWJtaXQiLCJjdXJyZW50VmFsdWUiLCJhcmd1bWVudHMiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ1c2VTZWFyY2hCYXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIHVzZVNlYXJjaEJhciBIb29rXHJcbiAqIFNoYXJlZCBsb2dpYyBmb3IgU2VhcmNoQmFyIGFjcm9zcyBhbGwgcGxhdGZvcm1zXHJcbiAqIEZpbGU6IHVzZVNlYXJjaEJhci5qc1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IHVzZVN0YXRlLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcbmltcG9ydCB7IHVzZURlYm91bmNlIH0gZnJvbSAnQGhvb2tzJztcclxuXHJcbi8qKlxyXG4gKiBIb29rIGZvciBTZWFyY2hCYXIgY29tcG9uZW50IGxvZ2ljXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBwYXJhbXMgLSBIb29rIHBhcmFtZXRlcnNcclxuICogQHBhcmFtIHtzdHJpbmd9IHBhcmFtcy52YWx1ZSAtIEluaXRpYWwgc2VhcmNoIHZhbHVlXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBhcmFtcy5vbkNoYW5nZSAtIENoYW5nZSBoYW5kbGVyICh3ZWIpXHJcbiAqIEBwYXJhbSB7RnVuY3Rpb259IHBhcmFtcy5vbkNoYW5nZVRleHQgLSBDaGFuZ2UgaGFuZGxlciAobmF0aXZlKVxyXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBwYXJhbXMub25TZWFyY2ggLSBTZWFyY2ggaGFuZGxlciAoY2FsbGVkIG9uIGRlYm91bmNlZCB2YWx1ZSBjaGFuZ2UpXHJcbiAqIEBwYXJhbSB7bnVtYmVyfSBwYXJhbXMuZGVib3VuY2VNcyAtIERlYm91bmNlIGRlbGF5IGluIG1pbGxpc2Vjb25kc1xyXG4gKiBAcmV0dXJucyB7T2JqZWN0fSBTZWFyY2hCYXIgc3RhdGUgYW5kIGhhbmRsZXJzXHJcbiAqL1xyXG5jb25zdCB1c2VTZWFyY2hCYXIgPSAoe1xyXG4gIHZhbHVlID0gJycsXHJcbiAgb25DaGFuZ2UsXHJcbiAgb25DaGFuZ2VUZXh0LFxyXG4gIG9uU2VhcmNoLFxyXG4gIGRlYm91bmNlTXMgPSAzMDAsXHJcbn0pID0+IHtcclxuICBjb25zdCBbbG9jYWxWYWx1ZSwgc2V0TG9jYWxWYWx1ZV0gPSB1c2VTdGF0ZSh2YWx1ZSk7XHJcbiAgY29uc3QgZGVib3VuY2VkVmFsdWUgPSB1c2VEZWJvdW5jZShsb2NhbFZhbHVlLCBkZWJvdW5jZU1zKTtcclxuICBjb25zdCBoYXNWYWx1ZSA9IGxvY2FsVmFsdWUubGVuZ3RoID4gMDtcclxuXHJcbiAgdXNlRWZmZWN0KCgpID0+IHtcclxuICAgIHNldExvY2FsVmFsdWUodmFsdWUpO1xyXG4gIH0sIFt2YWx1ZV0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgaWYgKG9uU2VhcmNoICYmIGRlYm91bmNlZFZhbHVlICE9PSB1bmRlZmluZWQgJiYgZGVib3VuY2VkVmFsdWUgIT09IHZhbHVlKSB7XHJcbiAgICAgIG9uU2VhcmNoKGRlYm91bmNlZFZhbHVlKTtcclxuICAgIH1cclxuICB9LCBbZGVib3VuY2VkVmFsdWUsIG9uU2VhcmNoLCB2YWx1ZV0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVDaGFuZ2UgPSAoZSkgPT4ge1xyXG4gICAgY29uc3QgbmV3VmFsdWUgPSBlPy50YXJnZXQ/LnZhbHVlID8/IGUgPz8gJyc7XHJcbiAgICBzZXRMb2NhbFZhbHVlKG5ld1ZhbHVlKTtcclxuICAgIGlmIChvbkNoYW5nZSkge1xyXG4gICAgICBpZiAoZSAmJiB0eXBlb2YgZSA9PT0gJ29iamVjdCcgJiYgJ3RhcmdldCcgaW4gZSkge1xyXG4gICAgICAgIG9uQ2hhbmdlKGUpO1xyXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBlID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIG9uQ2hhbmdlKGUpO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9uQ2hhbmdlKHsgdGFyZ2V0OiB7IHZhbHVlOiBuZXdWYWx1ZSB9IH0pO1xyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBpZiAob25DaGFuZ2VUZXh0ICYmIHR5cGVvZiBuZXdWYWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgb25DaGFuZ2VUZXh0KG5ld1ZhbHVlKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVDaGFuZ2VUZXh0ID0gKG5ld1ZhbHVlKSA9PiB7XHJcbiAgICBzZXRMb2NhbFZhbHVlKG5ld1ZhbHVlKTtcclxuICAgIGlmIChvbkNoYW5nZVRleHQpIHtcclxuICAgICAgb25DaGFuZ2VUZXh0KG5ld1ZhbHVlKTtcclxuICAgIH1cclxuICAgIGlmIChvbkNoYW5nZSkge1xyXG4gICAgICBvbkNoYW5nZSh7IHRhcmdldDogeyB2YWx1ZTogbmV3VmFsdWUgfSB9KTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVDbGVhciA9ICgpID0+IHtcclxuICAgIHNldExvY2FsVmFsdWUoJycpO1xyXG4gICAgaWYgKG9uQ2hhbmdlKSB7XHJcbiAgICAgIG9uQ2hhbmdlKHsgdGFyZ2V0OiB7IHZhbHVlOiAnJyB9IH0pO1xyXG4gICAgfVxyXG4gICAgaWYgKG9uQ2hhbmdlVGV4dCkge1xyXG4gICAgICBvbkNoYW5nZVRleHQoJycpO1xyXG4gICAgfVxyXG4gICAgaWYgKG9uU2VhcmNoKSB7XHJcbiAgICAgIG9uU2VhcmNoKCcnKTtcclxuICAgIH1cclxuICB9O1xyXG5cclxuICBjb25zdCBoYW5kbGVTdWJtaXQgPSAoY3VycmVudFZhbHVlID0gbG9jYWxWYWx1ZSkgPT4ge1xyXG4gICAgaWYgKG9uU2VhcmNoKSB7XHJcbiAgICAgIG9uU2VhcmNoKGN1cnJlbnRWYWx1ZSk7XHJcbiAgICB9XHJcbiAgfTtcclxuXHJcbiAgcmV0dXJuIHtcclxuICAgIGxvY2FsVmFsdWUsXHJcbiAgICBoYXNWYWx1ZSxcclxuICAgIGhhbmRsZUNoYW5nZSxcclxuICAgIGhhbmRsZUNoYW5nZVRleHQsXHJcbiAgICBoYW5kbGVDbGVhcixcclxuICAgIGhhbmRsZVN1Ym1pdCxcclxuICB9O1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgdXNlU2VhcmNoQmFyO1xyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQU1BLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUNBLElBQUFDLE1BQUEsR0FBQUQsT0FBQTtBQVlBLElBQU1FLFlBQVksR0FBRyxTQUFmQSxZQUFZQSxDQUFBQyxJQUFBLEVBTVo7RUFBQSxJQUFBQyxVQUFBLEdBQUFELElBQUEsQ0FMSkUsS0FBSztJQUFMQSxLQUFLLEdBQUFELFVBQUEsY0FBRyxFQUFFLEdBQUFBLFVBQUE7SUFDVkUsUUFBUSxHQUFBSCxJQUFBLENBQVJHLFFBQVE7SUFDUkMsWUFBWSxHQUFBSixJQUFBLENBQVpJLFlBQVk7SUFDWkMsUUFBUSxHQUFBTCxJQUFBLENBQVJLLFFBQVE7SUFBQUMsZUFBQSxHQUFBTixJQUFBLENBQ1JPLFVBQVU7SUFBVkEsVUFBVSxHQUFBRCxlQUFBLGNBQUcsR0FBRyxHQUFBQSxlQUFBO0VBRWhCLElBQUFFLFNBQUEsR0FBb0MsSUFBQUMsZUFBUSxFQUFDUCxLQUFLLENBQUM7SUFBQVEsVUFBQSxPQUFBQyxlQUFBLENBQUFDLE9BQUEsRUFBQUosU0FBQTtJQUE1Q0ssVUFBVSxHQUFBSCxVQUFBO0lBQUVJLGFBQWEsR0FBQUosVUFBQTtFQUNoQyxJQUFNSyxjQUFjLEdBQUcsSUFBQUMsa0JBQVcsRUFBQ0gsVUFBVSxFQUFFTixVQUFVLENBQUM7RUFDMUQsSUFBTVUsUUFBUSxHQUFHSixVQUFVLENBQUNLLE1BQU0sR0FBRyxDQUFDO0VBRXRDLElBQUFDLGdCQUFTLEVBQUMsWUFBTTtJQUNkTCxhQUFhLENBQUNaLEtBQUssQ0FBQztFQUN0QixDQUFDLEVBQUUsQ0FBQ0EsS0FBSyxDQUFDLENBQUM7RUFFWCxJQUFBaUIsZ0JBQVMsRUFBQyxZQUFNO0lBQ2QsSUFBSWQsUUFBUSxJQUFJVSxjQUFjLEtBQUtLLFNBQVMsSUFBSUwsY0FBYyxLQUFLYixLQUFLLEVBQUU7TUFDeEVHLFFBQVEsQ0FBQ1UsY0FBYyxDQUFDO0lBQzFCO0VBQ0YsQ0FBQyxFQUFFLENBQUNBLGNBQWMsRUFBRVYsUUFBUSxFQUFFSCxLQUFLLENBQUMsQ0FBQztFQUVyQyxJQUFNbUIsWUFBWSxHQUFHLFNBQWZBLFlBQVlBLENBQUlDLENBQUMsRUFBSztJQUFBLElBQUFDLEtBQUEsRUFBQUMsZUFBQSxFQUFBQyxTQUFBO0lBQzFCLElBQU1DLFFBQVEsSUFBQUgsS0FBQSxJQUFBQyxlQUFBLEdBQUdGLENBQUMsYUFBQUcsU0FBQSxHQUFESCxDQUFDLENBQUVLLE1BQU0scUJBQVRGLFNBQUEsQ0FBV3ZCLEtBQUssWUFBQXNCLGVBQUEsR0FBSUYsQ0FBQyxZQUFBQyxLQUFBLEdBQUksRUFBRTtJQUM1Q1QsYUFBYSxDQUFDWSxRQUFRLENBQUM7SUFDdkIsSUFBSXZCLFFBQVEsRUFBRTtNQUNaLElBQUltQixDQUFDLElBQUksT0FBT0EsQ0FBQyxLQUFLLFFBQVEsSUFBSSxRQUFRLElBQUlBLENBQUMsRUFBRTtRQUMvQ25CLFFBQVEsQ0FBQ21CLENBQUMsQ0FBQztNQUNiLENBQUMsTUFBTSxJQUFJLE9BQU9BLENBQUMsS0FBSyxRQUFRLEVBQUU7UUFDaENuQixRQUFRLENBQUNtQixDQUFDLENBQUM7TUFDYixDQUFDLE1BQU07UUFDTG5CLFFBQVEsQ0FBQztVQUFFd0IsTUFBTSxFQUFFO1lBQUV6QixLQUFLLEVBQUV3QjtVQUFTO1FBQUUsQ0FBQyxDQUFDO01BQzNDO0lBQ0Y7SUFDQSxJQUFJdEIsWUFBWSxJQUFJLE9BQU9zQixRQUFRLEtBQUssUUFBUSxFQUFFO01BQ2hEdEIsWUFBWSxDQUFDc0IsUUFBUSxDQUFDO0lBQ3hCO0VBQ0YsQ0FBQztFQUVELElBQU1FLGdCQUFnQixHQUFHLFNBQW5CQSxnQkFBZ0JBLENBQUlGLFFBQVEsRUFBSztJQUNyQ1osYUFBYSxDQUFDWSxRQUFRLENBQUM7SUFDdkIsSUFBSXRCLFlBQVksRUFBRTtNQUNoQkEsWUFBWSxDQUFDc0IsUUFBUSxDQUFDO0lBQ3hCO0lBQ0EsSUFBSXZCLFFBQVEsRUFBRTtNQUNaQSxRQUFRLENBQUM7UUFBRXdCLE1BQU0sRUFBRTtVQUFFekIsS0FBSyxFQUFFd0I7UUFBUztNQUFFLENBQUMsQ0FBQztJQUMzQztFQUNGLENBQUM7RUFFRCxJQUFNRyxXQUFXLEdBQUcsU0FBZEEsV0FBV0EsQ0FBQSxFQUFTO0lBQ3hCZixhQUFhLENBQUMsRUFBRSxDQUFDO0lBQ2pCLElBQUlYLFFBQVEsRUFBRTtNQUNaQSxRQUFRLENBQUM7UUFBRXdCLE1BQU0sRUFBRTtVQUFFekIsS0FBSyxFQUFFO1FBQUc7TUFBRSxDQUFDLENBQUM7SUFDckM7SUFDQSxJQUFJRSxZQUFZLEVBQUU7TUFDaEJBLFlBQVksQ0FBQyxFQUFFLENBQUM7SUFDbEI7SUFDQSxJQUFJQyxRQUFRLEVBQUU7TUFDWkEsUUFBUSxDQUFDLEVBQUUsQ0FBQztJQUNkO0VBQ0YsQ0FBQztFQUVELElBQU15QixZQUFZLEdBQUcsU0FBZkEsWUFBWUEsQ0FBQSxFQUFrQztJQUFBLElBQTlCQyxZQUFZLEdBQUFDLFNBQUEsQ0FBQWQsTUFBQSxRQUFBYyxTQUFBLFFBQUFaLFNBQUEsR0FBQVksU0FBQSxNQUFHbkIsVUFBVTtJQUM3QyxJQUFJUixRQUFRLEVBQUU7TUFDWkEsUUFBUSxDQUFDMEIsWUFBWSxDQUFDO0lBQ3hCO0VBQ0YsQ0FBQztFQUVELE9BQU87SUFDTGxCLFVBQVUsRUFBVkEsVUFBVTtJQUNWSSxRQUFRLEVBQVJBLFFBQVE7SUFDUkksWUFBWSxFQUFaQSxZQUFZO0lBQ1pPLGdCQUFnQixFQUFoQkEsZ0JBQWdCO0lBQ2hCQyxXQUFXLEVBQVhBLFdBQVc7SUFDWEMsWUFBWSxFQUFaQTtFQUNGLENBQUM7QUFDSCxDQUFDO0FBQUMsSUFBQUcsUUFBQSxHQUFBQyxPQUFBLENBQUF0QixPQUFBLEdBRWFiLFlBQVkiLCJpZ25vcmVMaXN0IjpbXX0=