{"version":3,"names":["useCallback","useEffect","useMemo","useRouter","useI18n","useNetwork","useDepartment","cov_10dil4s9be","s","resolveErrorMessage","t","errorCode","loadErrorKey","f","b","key","resolved","useDepartmentListScreen","_ref","router","_ref2","isOffline","_ref3","list","remove","data","isLoading","reset","items","_ref4","Array","isArray","errorMessage","fetchList","page","limit","handleRetry","handleDepartmentPress","id","push","handleDelete","_ref5","_asyncToGenerator","e","stopPropagation","_unused","_x","_x2","apply","arguments","handleAdd","hasError","Boolean","onRetry","onDepartmentPress","onDelete","onAdd"],"sources":["useDepartmentListScreen.js"],"sourcesContent":["/**\r\n * useDepartmentListScreen Hook\r\n * Shared logic for DepartmentListScreen across platforms.\r\n * File: useDepartmentListScreen.js\r\n */\r\nimport { useCallback, useEffect, useMemo } from 'react';\r\nimport { useRouter } from 'expo-router';\r\nimport { useI18n, useNetwork, useDepartment } from '@hooks';\r\n\r\nconst resolveErrorMessage = (t, errorCode, loadErrorKey) => {\r\n  if (!errorCode) return null;\r\n  if (errorCode === 'UNKNOWN_ERROR' || errorCode === 'NETWORK_ERROR') {\r\n    return t(loadErrorKey);\r\n  }\r\n  const key = `errors.codes.${errorCode}`;\r\n  const resolved = t(key);\r\n  return resolved === key ? t(loadErrorKey) : resolved;\r\n};\r\n\r\nconst useDepartmentListScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { isOffline } = useNetwork();\r\n  const {\r\n    list,\r\n    remove,\r\n    data,\r\n    isLoading,\r\n    errorCode,\r\n    reset,\r\n  } = useDepartment();\r\n\r\n  const items = useMemo(\r\n    () => (Array.isArray(data) ? data : (data?.items ?? [])),\r\n    [data]\r\n  );\r\n  const errorMessage = useMemo(\r\n    () => resolveErrorMessage(t, errorCode, 'department.list.loadError'),\r\n    [t, errorCode]\r\n  );\r\n\r\n  const fetchList = useCallback(() => {\r\n    reset();\r\n    list({ page: 1, limit: 20 });\r\n  }, [list, reset]);\r\n\r\n  useEffect(() => {\r\n    fetchList();\r\n  }, [fetchList]);\r\n\r\n  const handleRetry = useCallback(() => {\r\n    fetchList();\r\n  }, [fetchList]);\r\n\r\n  const handleDepartmentPress = useCallback(\r\n    (id) => {\r\n      router.push(`/settings/departments/${id}`);\r\n    },\r\n    [router]\r\n  );\r\n\r\n  const handleDelete = useCallback(\r\n    async (id, e) => {\r\n      if (e?.stopPropagation) e.stopPropagation();\r\n      try {\r\n        await remove(id);\r\n        fetchList();\r\n      } catch {\r\n        /* error handled by hook */\r\n      }\r\n    },\r\n    [remove, fetchList]\r\n  );\r\n\r\n  const handleAdd = useCallback(() => {\r\n    router.push('/settings/departments/create');\r\n  }, [router]);\r\n\r\n  return {\r\n    items,\r\n    isLoading,\r\n    hasError: Boolean(errorCode),\r\n    errorMessage,\r\n    isOffline,\r\n    onRetry: handleRetry,\r\n    onDepartmentPress: handleDepartmentPress,\r\n    onDelete: handleDelete,\r\n    onAdd: handleAdd,\r\n  };\r\n};\r\n\r\nexport default useDepartmentListScreen;\r\n"],"mappings":"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","ignoreList":[]}