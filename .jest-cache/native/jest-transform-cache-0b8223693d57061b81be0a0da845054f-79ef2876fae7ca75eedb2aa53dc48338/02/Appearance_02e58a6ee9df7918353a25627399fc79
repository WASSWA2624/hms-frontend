546406b23f03ac2da16fccc221d054c8
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.addChangeListener = addChangeListener;
exports.getColorScheme = getColorScheme;
exports.setColorScheme = setColorScheme;
var _NativeEventEmitter = _interopRequireDefault(require("../EventEmitter/NativeEventEmitter"));
var _EventEmitter = _interopRequireDefault(require("../vendor/emitter/EventEmitter"));
var _invariant = _interopRequireDefault(require("invariant"));
var lazyState;
function getState() {
  if (lazyState != null) {
    return lazyState;
  }
  var eventEmitter = new _EventEmitter.default();
  var NativeAppearance = require("./NativeAppearance").default;
  if (NativeAppearance == null) {
    lazyState = {
      NativeAppearance: null,
      appearance: null,
      eventEmitter: eventEmitter
    };
  } else {
    var state = {
      NativeAppearance: NativeAppearance,
      appearance: null,
      eventEmitter: eventEmitter
    };
    new _NativeEventEmitter.default(NativeAppearance).addListener('appearanceChanged', function (newAppearance) {
      state.appearance = {
        colorScheme: toColorScheme(newAppearance.colorScheme)
      };
      eventEmitter.emit('change', state.appearance);
    });
    lazyState = state;
  }
  return lazyState;
}
function getColorScheme() {
  var colorScheme = null;
  var state = getState();
  var NativeAppearance = state.NativeAppearance;
  if (NativeAppearance != null) {
    if (state.appearance == null) {
      state.appearance = {
        colorScheme: toColorScheme(NativeAppearance.getColorScheme())
      };
    }
    colorScheme = state.appearance.colorScheme;
  }
  return colorScheme;
}
function setColorScheme(colorScheme) {
  var state = getState();
  var NativeAppearance = state.NativeAppearance;
  if (NativeAppearance != null) {
    NativeAppearance.setColorScheme(colorScheme != null ? colorScheme : 'unspecified');
    state.appearance = {
      colorScheme: toColorScheme(NativeAppearance.getColorScheme())
    };
  }
}
function addChangeListener(listener) {
  var _getState = getState(),
    eventEmitter = _getState.eventEmitter;
  return eventEmitter.addListener('change', listener);
}
function toColorScheme(colorScheme) {
  (0, _invariant.default)(colorScheme === 'dark' || colorScheme === 'light' || colorScheme == null, "Unrecognized color scheme. Did you mean 'dark', 'light' or null?");
  return colorScheme;
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfTmF0aXZlRXZlbnRFbWl0dGVyIiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfRXZlbnRFbWl0dGVyIiwiX2ludmFyaWFudCIsImxhenlTdGF0ZSIsImdldFN0YXRlIiwiZXZlbnRFbWl0dGVyIiwiRXZlbnRFbWl0dGVyIiwiTmF0aXZlQXBwZWFyYW5jZSIsImRlZmF1bHQiLCJhcHBlYXJhbmNlIiwic3RhdGUiLCJOYXRpdmVFdmVudEVtaXR0ZXIiLCJhZGRMaXN0ZW5lciIsIm5ld0FwcGVhcmFuY2UiLCJjb2xvclNjaGVtZSIsInRvQ29sb3JTY2hlbWUiLCJlbWl0IiwiZ2V0Q29sb3JTY2hlbWUiLCJzZXRDb2xvclNjaGVtZSIsImFkZENoYW5nZUxpc3RlbmVyIiwibGlzdGVuZXIiLCJfZ2V0U3RhdGUiLCJpbnZhcmlhbnQiXSwic291cmNlcyI6WyJBcHBlYXJhbmNlLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ29weXJpZ2h0IChjKSBNZXRhIFBsYXRmb3JtcywgSW5jLiBhbmQgYWZmaWxpYXRlcy5cbiAqXG4gKiBUaGlzIHNvdXJjZSBjb2RlIGlzIGxpY2Vuc2VkIHVuZGVyIHRoZSBNSVQgbGljZW5zZSBmb3VuZCBpbiB0aGVcbiAqIExJQ0VOU0UgZmlsZSBpbiB0aGUgcm9vdCBkaXJlY3Rvcnkgb2YgdGhpcyBzb3VyY2UgdHJlZS5cbiAqXG4gKiBAZmxvdyBzdHJpY3QtbG9jYWxcbiAqIEBmb3JtYXRcbiAqL1xuXG5pbXBvcnQgdHlwZSB7RXZlbnRTdWJzY3JpcHRpb259IGZyb20gJy4uL3ZlbmRvci9lbWl0dGVyL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgdHlwZSB7QXBwZWFyYW5jZVByZWZlcmVuY2VzLCBDb2xvclNjaGVtZU5hbWV9IGZyb20gJy4vTmF0aXZlQXBwZWFyYW5jZSc7XG5pbXBvcnQgdHlwZW9mIElOYXRpdmVBcHBlYXJhbmNlIGZyb20gJy4vTmF0aXZlQXBwZWFyYW5jZSc7XG5cbmltcG9ydCBOYXRpdmVFdmVudEVtaXR0ZXIgZnJvbSAnLi4vRXZlbnRFbWl0dGVyL05hdGl2ZUV2ZW50RW1pdHRlcic7XG5pbXBvcnQgRXZlbnRFbWl0dGVyIGZyb20gJy4uL3ZlbmRvci9lbWl0dGVyL0V2ZW50RW1pdHRlcic7XG5pbXBvcnQgaW52YXJpYW50IGZyb20gJ2ludmFyaWFudCc7XG5cbmV4cG9ydCB0eXBlIHtBcHBlYXJhbmNlUHJlZmVyZW5jZXN9O1xuXG50eXBlIEFwcGVhcmFuY2UgPSB7XG4gIGNvbG9yU2NoZW1lOiA/Q29sb3JTY2hlbWVOYW1lLFxufTtcblxubGV0IGxhenlTdGF0ZTogP3tcbiAgK05hdGl2ZUFwcGVhcmFuY2U6IElOYXRpdmVBcHBlYXJhbmNlLFxuICAvLyBDYWNoZSB0aGUgY29sb3Igc2NoZW1lIHRvIHJlZHVjZSB0aGUgY29zdCBvZiByZWFkaW5nIGl0IGJldHdlZW4gY2hhbmdlcy5cbiAgLy8gTk9URTogSWYgYE5hdGl2ZUFwcGVhcmFuY2VgIGlzIG51bGwsIHRoaXMgd2lsbCBhbHdheXMgYmUgbnVsbC5cbiAgYXBwZWFyYW5jZTogP0FwcGVhcmFuY2UsXG4gIC8vIE5PVEU6IFRoaXMgaXMgbm9uLW51bGxhYmxlIHRvIG1ha2UgaXQgZWFzaWVyIGZvciBgb25DaGFuZ2VkTGlzdGVuZXJgIHRvXG4gIC8vIHJldHVybiBhIG5vbi1udWxsYWJsZSBgRXZlbnRTdWJzY3JpcHRpb25gIHZhbHVlLiBUaGlzIGlzIG5vdCB0aGUgY29tbW9uXG4gIC8vIHBhdGgsIHNvIHdlIGRvIG5vdCBoYXZlIHRvIG92ZXItb3B0aW1pemUgaXQuXG4gICtldmVudEVtaXR0ZXI6IEV2ZW50RW1pdHRlcjx7Y2hhbmdlOiBbQXBwZWFyYW5jZV19Pixcbn07XG5cbi8qKlxuICogRW5zdXJlcyB0aGF0IGFsbCBzdGF0ZSBhbmQgbGlzdGVuZXJzIGFyZSBsYXppbHkgaW5pdGlhbGl6ZWQgY29ycmVjdGx5LlxuICovXG5mdW5jdGlvbiBnZXRTdGF0ZSgpOiAkTm9uTWF5YmVUeXBlPHR5cGVvZiBsYXp5U3RhdGU+IHtcbiAgaWYgKGxhenlTdGF0ZSAhPSBudWxsKSB7XG4gICAgcmV0dXJuIGxhenlTdGF0ZTtcbiAgfVxuICBjb25zdCBldmVudEVtaXR0ZXIgPSBuZXcgRXZlbnRFbWl0dGVyPHtjaGFuZ2U6IFtBcHBlYXJhbmNlXX0+KCk7XG4gIC8vIE5PVEU6IEF2b2lkIGluaXRpYWxpemluZyBgTmF0aXZlQXBwZWFyYW5jZWAgdW50aWwgaXQgaXMgYWN0dWFsbHkgdXNlZC5cbiAgY29uc3QgTmF0aXZlQXBwZWFyYW5jZSA9IHJlcXVpcmUoJy4vTmF0aXZlQXBwZWFyYW5jZScpLmRlZmF1bHQ7XG4gIGlmIChOYXRpdmVBcHBlYXJhbmNlID09IG51bGwpIHtcbiAgICAvLyBBc3NpZ24gYG51bGxgIHRvIGF2b2lkIHJlLWluaXRpYWxpemluZyBvbiBzdWJzZXF1ZW50IGludm9jYXRpb25zLlxuICAgIGxhenlTdGF0ZSA9IHtcbiAgICAgIE5hdGl2ZUFwcGVhcmFuY2U6IG51bGwsXG4gICAgICBhcHBlYXJhbmNlOiBudWxsLFxuICAgICAgZXZlbnRFbWl0dGVyLFxuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgY29uc3Qgc3RhdGU6ICROb25NYXliZVR5cGU8dHlwZW9mIGxhenlTdGF0ZT4gPSB7XG4gICAgICBOYXRpdmVBcHBlYXJhbmNlLFxuICAgICAgYXBwZWFyYW5jZTogbnVsbCxcbiAgICAgIGV2ZW50RW1pdHRlcixcbiAgICB9O1xuICAgIG5ldyBOYXRpdmVFdmVudEVtaXR0ZXI8e1xuICAgICAgYXBwZWFyYW5jZUNoYW5nZWQ6IFtBcHBlYXJhbmNlUHJlZmVyZW5jZXNdLFxuICAgIH0+KE5hdGl2ZUFwcGVhcmFuY2UpLmFkZExpc3RlbmVyKCdhcHBlYXJhbmNlQ2hhbmdlZCcsIG5ld0FwcGVhcmFuY2UgPT4ge1xuICAgICAgc3RhdGUuYXBwZWFyYW5jZSA9IHtcbiAgICAgICAgY29sb3JTY2hlbWU6IHRvQ29sb3JTY2hlbWUobmV3QXBwZWFyYW5jZS5jb2xvclNjaGVtZSksXG4gICAgICB9O1xuICAgICAgZXZlbnRFbWl0dGVyLmVtaXQoJ2NoYW5nZScsIHN0YXRlLmFwcGVhcmFuY2UpO1xuICAgIH0pO1xuICAgIGxhenlTdGF0ZSA9IHN0YXRlO1xuICB9XG4gIHJldHVybiBsYXp5U3RhdGU7XG59XG5cbi8qKlxuICogUmV0dXJucyB0aGUgY3VycmVudCBjb2xvciBzY2hlbWUgcHJlZmVyZW5jZS4gVGhpcyB2YWx1ZSBtYXkgY2hhbmdlLCBzbyB0aGVcbiAqIHZhbHVlIHNob3VsZCBub3QgYmUgY2FjaGVkIHdpdGhvdXQgZWl0aGVyIGxpc3RlbmluZyB0byBjaGFuZ2VzIG9yIHVzaW5nXG4gKiB0aGUgYHVzZUNvbG9yU2NoZW1lYCBob29rLlxuICovXG5leHBvcnQgZnVuY3Rpb24gZ2V0Q29sb3JTY2hlbWUoKTogP0NvbG9yU2NoZW1lTmFtZSB7XG4gIGxldCBjb2xvclNjaGVtZSA9IG51bGw7XG4gIGNvbnN0IHN0YXRlID0gZ2V0U3RhdGUoKTtcbiAgY29uc3Qge05hdGl2ZUFwcGVhcmFuY2V9ID0gc3RhdGU7XG4gIGlmIChOYXRpdmVBcHBlYXJhbmNlICE9IG51bGwpIHtcbiAgICBpZiAoc3RhdGUuYXBwZWFyYW5jZSA9PSBudWxsKSB7XG4gICAgICAvLyBMYXppbHkgaW5pdGlhbGl6ZSBgc3RhdGUuYXBwZWFyYW5jZWAuIFRoaXMgc2hvdWxkIG9ubHlcbiAgICAgIC8vIGhhcHBlbiBvbmNlIGJlY2F1c2Ugd2UgbmV2ZXIgcmVhc3NpZ24gYSBudWxsIHZhbHVlIHRvIGl0LlxuICAgICAgc3RhdGUuYXBwZWFyYW5jZSA9IHtcbiAgICAgICAgY29sb3JTY2hlbWU6IHRvQ29sb3JTY2hlbWUoTmF0aXZlQXBwZWFyYW5jZS5nZXRDb2xvclNjaGVtZSgpKSxcbiAgICAgIH07XG4gICAgfVxuICAgIGNvbG9yU2NoZW1lID0gc3RhdGUuYXBwZWFyYW5jZS5jb2xvclNjaGVtZTtcbiAgfVxuICByZXR1cm4gY29sb3JTY2hlbWU7XG59XG5cbi8qKlxuICogVXBkYXRlcyB0aGUgY3VycmVudCBjb2xvciBzY2hlbWUgdG8gdGhlIHN1cHBsaWVkIHZhbHVlLlxuICovXG5leHBvcnQgZnVuY3Rpb24gc2V0Q29sb3JTY2hlbWUoY29sb3JTY2hlbWU6ID9Db2xvclNjaGVtZU5hbWUpOiB2b2lkIHtcbiAgY29uc3Qgc3RhdGUgPSBnZXRTdGF0ZSgpO1xuICBjb25zdCB7TmF0aXZlQXBwZWFyYW5jZX0gPSBzdGF0ZTtcbiAgaWYgKE5hdGl2ZUFwcGVhcmFuY2UgIT0gbnVsbCkge1xuICAgIE5hdGl2ZUFwcGVhcmFuY2Uuc2V0Q29sb3JTY2hlbWUoY29sb3JTY2hlbWUgPz8gJ3Vuc3BlY2lmaWVkJyk7XG4gICAgc3RhdGUuYXBwZWFyYW5jZSA9IHtcbiAgICAgIGNvbG9yU2NoZW1lOiB0b0NvbG9yU2NoZW1lKE5hdGl2ZUFwcGVhcmFuY2UuZ2V0Q29sb3JTY2hlbWUoKSksXG4gICAgfTtcbiAgfVxufVxuXG4vKipcbiAqIEFkZCBhbiBldmVudCBoYW5kbGVyIHRoYXQgaXMgZmlyZWQgd2hlbiBhcHBlYXJhbmNlIHByZWZlcmVuY2VzIGNoYW5nZS5cbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGFkZENoYW5nZUxpc3RlbmVyKFxuICBsaXN0ZW5lcjogKHtjb2xvclNjaGVtZTogP0NvbG9yU2NoZW1lTmFtZX0pID0+IHZvaWQsXG4pOiBFdmVudFN1YnNjcmlwdGlvbiB7XG4gIGNvbnN0IHtldmVudEVtaXR0ZXJ9ID0gZ2V0U3RhdGUoKTtcbiAgcmV0dXJuIGV2ZW50RW1pdHRlci5hZGRMaXN0ZW5lcignY2hhbmdlJywgbGlzdGVuZXIpO1xufVxuXG4vKipcbiAqIFRPRE86IChocmFtb3MpIFQ1MjkxOTY1MiBVc2UgP0NvbG9yU2NoZW1lTmFtZSBvbmNlIGNvZGVnZW4gc3VwcG9ydHMgdW5pb25cbiAqL1xuZnVuY3Rpb24gdG9Db2xvclNjaGVtZShjb2xvclNjaGVtZTogP3N0cmluZyk6ID9Db2xvclNjaGVtZU5hbWUge1xuICBpbnZhcmlhbnQoXG4gICAgY29sb3JTY2hlbWUgPT09ICdkYXJrJyB8fCBjb2xvclNjaGVtZSA9PT0gJ2xpZ2h0JyB8fCBjb2xvclNjaGVtZSA9PSBudWxsLFxuICAgIFwiVW5yZWNvZ25pemVkIGNvbG9yIHNjaGVtZS4gRGlkIHlvdSBtZWFuICdkYXJrJywgJ2xpZ2h0JyBvciBudWxsP1wiLFxuICApO1xuICByZXR1cm4gY29sb3JTY2hlbWU7XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7QUFjQSxJQUFBQSxtQkFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsYUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsVUFBQSxHQUFBSCxzQkFBQSxDQUFBQyxPQUFBO0FBUUEsSUFBSUcsU0FTSDtBQUtELFNBQVNDLFFBQVFBLENBQUEsRUFBb0M7RUFDbkQsSUFBSUQsU0FBUyxJQUFJLElBQUksRUFBRTtJQUNyQixPQUFPQSxTQUFTO0VBQ2xCO0VBQ0EsSUFBTUUsWUFBWSxHQUFHLElBQUlDLHFCQUFZLENBQXlCLENBQUM7RUFFL0QsSUFBTUMsZ0JBQWdCLEdBQUdQLE9BQU8scUJBQXFCLENBQUMsQ0FBQ1EsT0FBTztFQUM5RCxJQUFJRCxnQkFBZ0IsSUFBSSxJQUFJLEVBQUU7SUFFNUJKLFNBQVMsR0FBRztNQUNWSSxnQkFBZ0IsRUFBRSxJQUFJO01BQ3RCRSxVQUFVLEVBQUUsSUFBSTtNQUNoQkosWUFBWSxFQUFaQTtJQUNGLENBQUM7RUFDSCxDQUFDLE1BQU07SUFDTCxJQUFNSyxLQUFzQyxHQUFHO01BQzdDSCxnQkFBZ0IsRUFBaEJBLGdCQUFnQjtNQUNoQkUsVUFBVSxFQUFFLElBQUk7TUFDaEJKLFlBQVksRUFBWkE7SUFDRixDQUFDO0lBQ0QsSUFBSU0sMkJBQWtCLENBRW5CSixnQkFBZ0IsQ0FBQyxDQUFDSyxXQUFXLENBQUMsbUJBQW1CLEVBQUUsVUFBQUMsYUFBYSxFQUFJO01BQ3JFSCxLQUFLLENBQUNELFVBQVUsR0FBRztRQUNqQkssV0FBVyxFQUFFQyxhQUFhLENBQUNGLGFBQWEsQ0FBQ0MsV0FBVztNQUN0RCxDQUFDO01BQ0RULFlBQVksQ0FBQ1csSUFBSSxDQUFDLFFBQVEsRUFBRU4sS0FBSyxDQUFDRCxVQUFVLENBQUM7SUFDL0MsQ0FBQyxDQUFDO0lBQ0ZOLFNBQVMsR0FBR08sS0FBSztFQUNuQjtFQUNBLE9BQU9QLFNBQVM7QUFDbEI7QUFPTyxTQUFTYyxjQUFjQSxDQUFBLEVBQXFCO0VBQ2pELElBQUlILFdBQVcsR0FBRyxJQUFJO0VBQ3RCLElBQU1KLEtBQUssR0FBR04sUUFBUSxDQUFDLENBQUM7RUFDeEIsSUFBT0csZ0JBQWdCLEdBQUlHLEtBQUssQ0FBekJILGdCQUFnQjtFQUN2QixJQUFJQSxnQkFBZ0IsSUFBSSxJQUFJLEVBQUU7SUFDNUIsSUFBSUcsS0FBSyxDQUFDRCxVQUFVLElBQUksSUFBSSxFQUFFO01BRzVCQyxLQUFLLENBQUNELFVBQVUsR0FBRztRQUNqQkssV0FBVyxFQUFFQyxhQUFhLENBQUNSLGdCQUFnQixDQUFDVSxjQUFjLENBQUMsQ0FBQztNQUM5RCxDQUFDO0lBQ0g7SUFDQUgsV0FBVyxHQUFHSixLQUFLLENBQUNELFVBQVUsQ0FBQ0ssV0FBVztFQUM1QztFQUNBLE9BQU9BLFdBQVc7QUFDcEI7QUFLTyxTQUFTSSxjQUFjQSxDQUFDSixXQUE2QixFQUFRO0VBQ2xFLElBQU1KLEtBQUssR0FBR04sUUFBUSxDQUFDLENBQUM7RUFDeEIsSUFBT0csZ0JBQWdCLEdBQUlHLEtBQUssQ0FBekJILGdCQUFnQjtFQUN2QixJQUFJQSxnQkFBZ0IsSUFBSSxJQUFJLEVBQUU7SUFDNUJBLGdCQUFnQixDQUFDVyxjQUFjLENBQUNKLFdBQVcsV0FBWEEsV0FBVyxHQUFJLGFBQWEsQ0FBQztJQUM3REosS0FBSyxDQUFDRCxVQUFVLEdBQUc7TUFDakJLLFdBQVcsRUFBRUMsYUFBYSxDQUFDUixnQkFBZ0IsQ0FBQ1UsY0FBYyxDQUFDLENBQUM7SUFDOUQsQ0FBQztFQUNIO0FBQ0Y7QUFLTyxTQUFTRSxpQkFBaUJBLENBQy9CQyxRQUFtRCxFQUNoQztFQUNuQixJQUFBQyxTQUFBLEdBQXVCakIsUUFBUSxDQUFDLENBQUM7SUFBMUJDLFlBQVksR0FBQWdCLFNBQUEsQ0FBWmhCLFlBQVk7RUFDbkIsT0FBT0EsWUFBWSxDQUFDTyxXQUFXLENBQUMsUUFBUSxFQUFFUSxRQUFRLENBQUM7QUFDckQ7QUFLQSxTQUFTTCxhQUFhQSxDQUFDRCxXQUFvQixFQUFvQjtFQUM3RCxJQUFBUSxrQkFBUyxFQUNQUixXQUFXLEtBQUssTUFBTSxJQUFJQSxXQUFXLEtBQUssT0FBTyxJQUFJQSxXQUFXLElBQUksSUFBSSxFQUN4RSxrRUFDRixDQUFDO0VBQ0QsT0FBT0EsV0FBVztBQUNwQiIsImlnbm9yZUxpc3QiOltdfQ==