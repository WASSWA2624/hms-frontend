{"version":3,"names":["useCallback","useMemo","useDispatch","useSelector","selectAuthErrorCode","selectAuthLoading","selectIsAuthenticated","selectUser","actions","authActions","cov_1zcoum6aca","s","normalizeRole","role","f","b","String","trim","toLowerCase","normalizeRoles","roles","list","Array","isArray","map","filter","Boolean","useAuth","dispatch","isAuthenticated","user","isLoading","errorCode","userRoles","login","payload","register","logout","refreshSession","loadCurrentUser","verifyEmail","verifyPhone","resendVerification","forgotPassword","resetPassword","changePassword","clearError","clearAuthError"],"sources":["useAuth.js"],"sourcesContent":["/**\r\n * useAuth Hook\r\n * Provides minimal auth state from Redux for UI guards/navigation.\r\n * File: useAuth.js\r\n */\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport {\r\n  selectAuthErrorCode,\r\n  selectAuthLoading,\r\n  selectIsAuthenticated,\r\n  selectUser,\r\n} from '@store/selectors';\r\nimport { actions as authActions } from '@store/slices/auth.slice';\r\n\r\nconst normalizeRole = (role) => {\r\n  if (!role) return null;\r\n  return String(role).trim().toLowerCase();\r\n};\r\n\r\nconst normalizeRoles = (roles) => {\r\n  if (!roles) return [];\r\n  const list = Array.isArray(roles) ? roles : [roles];\r\n  return list.map(normalizeRole).filter(Boolean);\r\n};\r\n\r\n/**\r\n * useAuth hook\r\n * @returns {Object} auth state and normalized roles\r\n */\r\nconst useAuth = () => {\r\n  const dispatch = useDispatch();\r\n  const isAuthenticated = useSelector(selectIsAuthenticated);\r\n  const user = useSelector(selectUser);\r\n  const isLoading = useSelector(selectAuthLoading);\r\n  const errorCode = useSelector(selectAuthErrorCode);\r\n\r\n  const roles = useMemo(() => {\r\n    const userRoles = user?.roles || user?.role || [];\r\n    return normalizeRoles(userRoles);\r\n  }, [user]);\r\n\r\n  return {\r\n    isAuthenticated,\r\n    user: user || null,\r\n    roles,\r\n    role: roles[0] || null,\r\n    isLoading: Boolean(isLoading),\r\n    errorCode: errorCode || null,\r\n    login: useCallback((payload) => dispatch(authActions.login(payload)), [dispatch]),\r\n    register: useCallback((payload) => dispatch(authActions.register(payload)), [dispatch]),\r\n    logout: useCallback(() => dispatch(authActions.logout()), [dispatch]),\r\n    refreshSession: useCallback(() => dispatch(authActions.refreshSession()), [dispatch]),\r\n    loadCurrentUser: useCallback(() => dispatch(authActions.loadCurrentUser()), [dispatch]),\r\n    verifyEmail: useCallback((payload) => dispatch(authActions.verifyEmail(payload)), [dispatch]),\r\n    verifyPhone: useCallback((payload) => dispatch(authActions.verifyPhone(payload)), [dispatch]),\r\n    resendVerification: useCallback((payload) => dispatch(authActions.resendVerification(payload)), [dispatch]),\r\n    forgotPassword: useCallback((payload) => dispatch(authActions.forgotPassword(payload)), [dispatch]),\r\n    resetPassword: useCallback((payload) => dispatch(authActions.resetPassword(payload)), [dispatch]),\r\n    changePassword: useCallback((payload) => dispatch(authActions.changePassword(payload)), [dispatch]),\r\n    clearError: useCallback(() => dispatch(authActions.clearAuthError()), [dispatch]),\r\n  };\r\n};\r\n\r\nexport default useAuth;\r\n"],"mappings":"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","ignoreList":[]}