{"version":3,"names":["_getJestObj","mock","React","require","_require","View","Text","Slot","_ref","children","testID","mockSlotChildren","createElement","useRouter","push","jest","fn","replace","back","bootstrapApp","mockBootstrapApp","apply","arguments","virtual","getDeviceLocale","I18nProvider","_ref2","Fragment","_require2","configureStore","rootReducer","default","store","reducer","preloadedState","ui","theme","locale","isLoading","network","isOnline","mockPersistor","purge","pause","persist","flush","persistor","PersistGate","_ref3","ErrorBoundary","_ref4","ThemeProvider","_ref5","_ref6","_require3","ActivityIndicator","StyledLoadingContainer","_ref7","StyledActivityIndicator","props","logger","error","info","warn","debug","selectTheme","_interopRequireDefault","_asyncToGenerator2","_react","_reactNative","_layout","_jsxRuntime","_require4","describe","beforeEach","clearAllMocks","mockResolvedValue","undefined","mockClear","test","expect","RootLayout","toBeDefined","toBe","render","jsx","not","toThrow","waitFor","toHaveBeenCalled","timeout","_render","UNSAFE_getByType"],"sources":["root-layout.test.js"],"sourcesContent":["/**\r\n * Root Layout Tests\r\n * File: root-layout.test.js\r\n * \r\n * Step 7.1: Create root layout file structure\r\n * \r\n * Per Step 7.1 requirements:\r\n * - File exists and exports a default component\r\n * - Component accepts and renders children (via <Slot /> in Expo Router)\r\n * \r\n * Per app-router.mdc: Root layouts use <Slot /> to render child routes, not {children} props.\r\n * Per testing.mdc: All tests must verify behavior, not implementation details.\r\n */\r\nimport React from 'react';\r\nimport { render, waitFor } from '@testing-library/react-native';\r\n\r\n// Mock expo-router Slot component\r\n// Per app-router.mdc: Layouts use <Slot /> to render child routes\r\n// In tests, we mock Slot to accept and render children for verification\r\nconst mockSlotChildren = jest.fn();\r\njest.mock('expo-router', () => {\r\n  const React = require('react');\r\n  const { View, Text } = require('react-native');\r\n  return {\r\n    Slot: ({ children, testID }) => {\r\n      mockSlotChildren(children);\r\n      return React.createElement(\r\n        View,\r\n        { testID },\r\n        children || React.createElement(Text, null, 'Mock Slot - No Child Routes')\r\n      );\r\n    },\r\n    useRouter: () => ({\r\n      push: jest.fn(),\r\n      replace: jest.fn(),\r\n      back: jest.fn(),\r\n    }),\r\n  };\r\n});\r\n\r\n// Mock bootstrap module before importing RootLayout\r\nconst mockBootstrapApp = jest.fn();\r\njest.mock('@bootstrap', () => ({\r\n  bootstrapApp: (...args) => mockBootstrapApp(...args),\r\n}), { virtual: true });\r\n\r\n// Mock i18n BEFORE store (store imports ui.slice which calls getDeviceLocale at module load time)\r\njest.mock('@i18n', () => {\r\n  const React = require('react');\r\n  return {\r\n    getDeviceLocale: jest.fn(() => 'en'),\r\n    I18nProvider: ({ children }) => React.createElement(React.Fragment, null, children),\r\n  };\r\n}, { virtual: true });\r\n\r\n// Mock store module\r\njest.mock('@store', () => {\r\n  const { configureStore } = require('@reduxjs/toolkit');\r\n  const rootReducer = require('@store/rootReducer').default;\r\n  \r\n  const store = configureStore({\r\n    reducer: rootReducer,\r\n    preloadedState: {\r\n      ui: {\r\n        theme: 'light',\r\n        locale: 'en',\r\n        isLoading: false,\r\n      },\r\n      network: {\r\n        isOnline: true,\r\n      },\r\n    },\r\n  });\r\n  \r\n  const mockPersistor = {\r\n    purge: jest.fn(),\r\n    pause: jest.fn(),\r\n    persist: jest.fn(),\r\n    flush: jest.fn(),\r\n  };\r\n  store.persistor = mockPersistor;\r\n  \r\n  return store;\r\n}, { virtual: true });\r\n\r\n// Mock PersistGate to render children immediately\r\njest.mock('redux-persist/integration/react', () => {\r\n  const React = require('react');\r\n  return {\r\n    PersistGate: ({ children }) => React.createElement(React.Fragment, null, children),\r\n  };\r\n});\r\n\r\n// Mock ErrorBoundary to render children normally\r\njest.mock('@errors', () => {\r\n  const React = require('react');\r\n  return {\r\n    ErrorBoundary: ({ children }) => React.createElement(React.Fragment, null, children),\r\n  };\r\n}, { virtual: true });\r\n\r\n// Mock ThemeProvider\r\njest.mock('@theme', () => {\r\n  const React = require('react');\r\n  return {\r\n    ThemeProvider: ({ children }) => React.createElement(React.Fragment, null, children),\r\n  };\r\n}, { virtual: true });\r\n\r\n// Mock ThemeProviderWrapper\r\njest.mock('@platform/layouts/common/ThemeProviderWrapper', () => {\r\n  const React = require('react');\r\n  return ({ children }) => React.createElement(React.Fragment, null, children);\r\n}, { virtual: true });\r\n\r\n// Mock RootLayoutStyles\r\njest.mock('@platform/layouts/common/RootLayoutStyles', () => {\r\n  const React = require('react');\r\n  const { View, ActivityIndicator } = require('react-native');\r\n  return {\r\n    StyledLoadingContainer: ({ children, testID }) =>\r\n      React.createElement(View, { testID }, children),\r\n    StyledActivityIndicator: (props) => React.createElement(ActivityIndicator, props),\r\n  };\r\n}, { virtual: true });\r\n\r\n// Mock logging\r\njest.mock('@logging', () => ({\r\n  logger: {\r\n    error: jest.fn(),\r\n    info: jest.fn(),\r\n    warn: jest.fn(),\r\n    debug: jest.fn(),\r\n  },\r\n}), { virtual: true });\r\n\r\n// Mock store selectors\r\njest.mock('@store/selectors', () => ({\r\n  selectTheme: jest.fn(() => 'light'),\r\n}), { virtual: true });\r\n\r\n// Import RootLayout after mocks are set up\r\nimport RootLayout from '@app/_layout';\r\n\r\ndescribe('app/_layout.jsx', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    mockBootstrapApp.mockResolvedValue(undefined);\r\n    mockSlotChildren.mockClear();\r\n  });\r\n\r\n  test('should export default component', () => {\r\n    // Per Step 7.1: Test that file exists and exports a default component\r\n    expect(RootLayout).toBeDefined();\r\n    expect(typeof RootLayout).toBe('function');\r\n  });\r\n\r\n  test('should render without error', async () => {\r\n    // Per Step 7.1: Test that component accepts and renders children\r\n    // Per app-router.mdc: Root layout uses <Slot /> to render child routes\r\n    expect(() => {\r\n      render(<RootLayout />);\r\n    }).not.toThrow();\r\n    \r\n    // Wait for bootstrap to complete\r\n    await waitFor(() => {\r\n      expect(mockBootstrapApp).toHaveBeenCalled();\r\n    }, { timeout: 3000 });\r\n  });\r\n\r\n  test('should render Slot component for child routes', async () => {\r\n    // Per Step 7.1: Test that component renders children (via <Slot />)\r\n    // Per app-router.mdc: Layouts use <Slot /> to render child routes\r\n    const { UNSAFE_getByType } = render(<RootLayout />);\r\n    \r\n    await waitFor(() => {\r\n      expect(mockBootstrapApp).toHaveBeenCalled();\r\n    }, { timeout: 3000 });\r\n    \r\n    // Verify that Slot is rendered (allows child routes to be displayed)\r\n    // In Expo Router, Slot automatically receives matched child routes from the router\r\n    // We verify Slot is used by checking the component renders successfully\r\n    expect(mockSlotChildren).toHaveBeenCalled();\r\n  });\r\n\r\n  test('should handle empty state without error', async () => {\r\n    // Per Step 7.1: Test that component can render even with no child routes\r\n    // Per app-router.mdc: Root layout should handle cases with no matched routes\r\n    expect(() => {\r\n      render(<RootLayout />);\r\n    }).not.toThrow();\r\n    \r\n    await waitFor(() => {\r\n      expect(mockBootstrapApp).toHaveBeenCalled();\r\n    }, { timeout: 3000 });\r\n  });\r\n});\r\n\r\n"],"mappings":"AAoBAA,WAAA,GAAKC,IAAI,CAAC,aAAa,EAAE,YAAM;EAC7B,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,IAAAC,QAAA,GAAuBD,OAAO,CAAC,cAAc,CAAC;IAAtCE,IAAI,GAAAD,QAAA,CAAJC,IAAI;IAAEC,IAAI,GAAAF,QAAA,CAAJE,IAAI;EAClB,OAAO;IACLC,IAAI,EAAE,SAANA,IAAIA,CAAAC,IAAA,EAA4B;MAAA,IAAvBC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;QAAEC,MAAM,GAAAF,IAAA,CAANE,MAAM;MACvBC,gBAAgB,CAACF,QAAQ,CAAC;MAC1B,OAAOP,KAAK,CAACU,aAAa,CACxBP,IAAI,EACJ;QAAEK,MAAM,EAANA;MAAO,CAAC,EACVD,QAAQ,IAAIP,KAAK,CAACU,aAAa,CAACN,IAAI,EAAE,IAAI,EAAE,6BAA6B,CAC3E,CAAC;IACH,CAAC;IACDO,SAAS,EAAE,SAAXA,SAASA,CAAA;MAAA,OAAS;QAChBC,IAAI,EAAEC,IAAI,CAACC,EAAE,CAAC,CAAC;QACfC,OAAO,EAAEF,IAAI,CAACC,EAAE,CAAC,CAAC;QAClBE,IAAI,EAAEH,IAAI,CAACC,EAAE,CAAC;MAChB,CAAC;IAAA;EACH,CAAC;AACH,CAAC,CAAC;AAIFhB,WAAA,GAAKC,IAAI,oBAAe;EAAA,OAAO;IAC7BkB,YAAY,EAAE,SAAdA,YAAYA,CAAA;MAAA,OAAeC,gBAAgB,CAAAC,KAAA,SAAAC,SAAQ,CAAC;IAAA;EACtD,CAAC;AAAA,CAAC,EAAE;EAAEC,OAAO,EAAE;AAAK,CAAC,CAAC;AAGtBvB,WAAA,GAAKC,IAAI,eAAU,YAAM;EACvB,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,OAAO;IACLqB,eAAe,EAAET,IAAI,CAACC,EAAE,CAAC;MAAA,OAAM,IAAI;IAAA,EAAC;IACpCS,YAAY,EAAE,SAAdA,YAAYA,CAAAC,KAAA;MAAA,IAAKjB,QAAQ,GAAAiB,KAAA,CAARjB,QAAQ;MAAA,OAAOP,KAAK,CAACU,aAAa,CAACV,KAAK,CAACyB,QAAQ,EAAE,IAAI,EAAElB,QAAQ,CAAC;IAAA;EACrF,CAAC;AACH,CAAC,EAAE;EAAEc,OAAO,EAAE;AAAK,CAAC,CAAC;AAGrBvB,WAAA,GAAKC,IAAI,gBAAW,YAAM;EACxB,IAAA2B,SAAA,GAA2BzB,OAAO,CAAC,kBAAkB,CAAC;IAA9C0B,cAAc,GAAAD,SAAA,CAAdC,cAAc;EACtB,IAAMC,WAAW,GAAG3B,OAAO,0BAAqB,CAAC,CAAC4B,OAAO;EAEzD,IAAMC,KAAK,GAAGH,cAAc,CAAC;IAC3BI,OAAO,EAAEH,WAAW;IACpBI,cAAc,EAAE;MACdC,EAAE,EAAE;QACFC,KAAK,EAAE,OAAO;QACdC,MAAM,EAAE,IAAI;QACZC,SAAS,EAAE;MACb,CAAC;MACDC,OAAO,EAAE;QACPC,QAAQ,EAAE;MACZ;IACF;EACF,CAAC,CAAC;EAEF,IAAMC,aAAa,GAAG;IACpBC,KAAK,EAAE3B,IAAI,CAACC,EAAE,CAAC,CAAC;IAChB2B,KAAK,EAAE5B,IAAI,CAACC,EAAE,CAAC,CAAC;IAChB4B,OAAO,EAAE7B,IAAI,CAACC,EAAE,CAAC,CAAC;IAClB6B,KAAK,EAAE9B,IAAI,CAACC,EAAE,CAAC;EACjB,CAAC;EACDgB,KAAK,CAACc,SAAS,GAAGL,aAAa;EAE/B,OAAOT,KAAK;AACd,CAAC,EAAE;EAAET,OAAO,EAAE;AAAK,CAAC,CAAC;AAGrBvB,WAAA,GAAKC,IAAI,CAAC,iCAAiC,EAAE,YAAM;EACjD,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,OAAO;IACL4C,WAAW,EAAE,SAAbA,WAAWA,CAAAC,KAAA;MAAA,IAAKvC,QAAQ,GAAAuC,KAAA,CAARvC,QAAQ;MAAA,OAAOP,KAAK,CAACU,aAAa,CAACV,KAAK,CAACyB,QAAQ,EAAE,IAAI,EAAElB,QAAQ,CAAC;IAAA;EACpF,CAAC;AACH,CAAC,CAAC;AAGFT,WAAA,GAAKC,IAAI,iBAAY,YAAM;EACzB,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,OAAO;IACL8C,aAAa,EAAE,SAAfA,aAAaA,CAAAC,KAAA;MAAA,IAAKzC,QAAQ,GAAAyC,KAAA,CAARzC,QAAQ;MAAA,OAAOP,KAAK,CAACU,aAAa,CAACV,KAAK,CAACyB,QAAQ,EAAE,IAAI,EAAElB,QAAQ,CAAC;IAAA;EACtF,CAAC;AACH,CAAC,EAAE;EAAEc,OAAO,EAAE;AAAK,CAAC,CAAC;AAGrBvB,WAAA,GAAKC,IAAI,gBAAW,YAAM;EACxB,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,OAAO;IACLgD,aAAa,EAAE,SAAfA,aAAaA,CAAAC,KAAA;MAAA,IAAK3C,QAAQ,GAAA2C,KAAA,CAAR3C,QAAQ;MAAA,OAAOP,KAAK,CAACU,aAAa,CAACV,KAAK,CAACyB,QAAQ,EAAE,IAAI,EAAElB,QAAQ,CAAC;IAAA;EACtF,CAAC;AACH,CAAC,EAAE;EAAEc,OAAO,EAAE;AAAK,CAAC,CAAC;AAGrBvB,WAAA,GAAKC,IAAI,uDAAkD,YAAM;EAC/D,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,OAAO,UAAAkD,KAAA;IAAA,IAAG5C,QAAQ,GAAA4C,KAAA,CAAR5C,QAAQ;IAAA,OAAOP,KAAK,CAACU,aAAa,CAACV,KAAK,CAACyB,QAAQ,EAAE,IAAI,EAAElB,QAAQ,CAAC;EAAA;AAC9E,CAAC,EAAE;EAAEc,OAAO,EAAE;AAAK,CAAC,CAAC;AAGrBvB,WAAA,GAAKC,IAAI,mDAA8C,YAAM;EAC3D,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,IAAAmD,SAAA,GAAoCnD,OAAO,CAAC,cAAc,CAAC;IAAnDE,IAAI,GAAAiD,SAAA,CAAJjD,IAAI;IAAEkD,iBAAiB,GAAAD,SAAA,CAAjBC,iBAAiB;EAC/B,OAAO;IACLC,sBAAsB,EAAE,SAAxBA,sBAAsBA,CAAAC,KAAA;MAAA,IAAKhD,QAAQ,GAAAgD,KAAA,CAARhD,QAAQ;QAAEC,MAAM,GAAA+C,KAAA,CAAN/C,MAAM;MAAA,OACzCR,KAAK,CAACU,aAAa,CAACP,IAAI,EAAE;QAAEK,MAAM,EAANA;MAAO,CAAC,EAAED,QAAQ,CAAC;IAAA;IACjDiD,uBAAuB,EAAE,SAAzBA,uBAAuBA,CAAGC,KAAK;MAAA,OAAKzD,KAAK,CAACU,aAAa,CAAC2C,iBAAiB,EAAEI,KAAK,CAAC;IAAA;EACnF,CAAC;AACH,CAAC,EAAE;EAAEpC,OAAO,EAAE;AAAK,CAAC,CAAC;AAGrBvB,WAAA,GAAKC,IAAI,kBAAa;EAAA,OAAO;IAC3B2D,MAAM,EAAE;MACNC,KAAK,EAAE9C,IAAI,CAACC,EAAE,CAAC,CAAC;MAChB8C,IAAI,EAAE/C,IAAI,CAACC,EAAE,CAAC,CAAC;MACf+C,IAAI,EAAEhD,IAAI,CAACC,EAAE,CAAC,CAAC;MACfgD,KAAK,EAAEjD,IAAI,CAACC,EAAE,CAAC;IACjB;EACF,CAAC;AAAA,CAAC,EAAE;EAAEO,OAAO,EAAE;AAAK,CAAC,CAAC;AAGtBvB,WAAA,GAAKC,IAAI,0BAAqB;EAAA,OAAO;IACnCgE,WAAW,EAAElD,IAAI,CAACC,EAAE,CAAC;MAAA,OAAM,OAAO;IAAA;EACpC,CAAC;AAAA,CAAC,EAAE;EAAEO,OAAO,EAAE;AAAK,CAAC,CAAC;AAAC,IAAA2C,sBAAA,GAAA/D,OAAA,iDAAA4B,OAAA;AAAA,IAAAoC,kBAAA,GAAAD,sBAAA,CAAA/D,OAAA;AA9HvB,IAAAiE,MAAA,GAAAF,sBAAA,CAAA/D,OAAA;AACA,IAAAkE,YAAA,GAAAlE,OAAA;AAgIA,IAAAmE,OAAA,GAAAJ,sBAAA,CAAA/D,OAAA;AAAsC,IAAAoE,WAAA,GAAApE,OAAA;AAAA,SAAAH,YAAA;EAAA,IAAAwE,SAAA,GAAArE,OAAA;IAAAY,IAAA,GAAAyD,SAAA,CAAAzD,IAAA;EAAAf,WAAA,YAAAA,YAAA;IAAA,OAAAe,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AA3HtC,IAAMJ,gBAAgB,GAAGI,IAAI,CAACC,EAAE,CAAC,CAAC;AAsBlC,IAAMI,gBAAgB,GAAGL,IAAI,CAACC,EAAE,CAAC,CAAC;AAuGlCyD,QAAQ,CAAC,iBAAiB,EAAE,YAAM;EAChCC,UAAU,CAAC,YAAM;IACf3D,IAAI,CAAC4D,aAAa,CAAC,CAAC;IACpBvD,gBAAgB,CAACwD,iBAAiB,CAACC,SAAS,CAAC;IAC7ClE,gBAAgB,CAACmE,SAAS,CAAC,CAAC;EAC9B,CAAC,CAAC;EAEFC,IAAI,CAAC,iCAAiC,EAAE,YAAM;IAE5CC,MAAM,CAACC,eAAU,CAAC,CAACC,WAAW,CAAC,CAAC;IAChCF,MAAM,CAAC,OAAOC,eAAU,CAAC,CAACE,IAAI,CAAC,UAAU,CAAC;EAC5C,CAAC,CAAC;EAEFJ,IAAI,CAAC,6BAA6B,MAAAZ,kBAAA,CAAApC,OAAA,EAAE,aAAY;IAG9CiD,MAAM,CAAC,YAAM;MACX,IAAAI,mBAAM,EAAC,IAAAb,WAAA,CAAAc,GAAA,EAACf,OAAA,CAAAvC,OAAU,IAAE,CAAC,CAAC;IACxB,CAAC,CAAC,CAACuD,GAAG,CAACC,OAAO,CAAC,CAAC;IAGhB,MAAM,IAAAC,oBAAO,EAAC,YAAM;MAClBR,MAAM,CAAC5D,gBAAgB,CAAC,CAACqE,gBAAgB,CAAC,CAAC;IAC7C,CAAC,EAAE;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;EACvB,CAAC,EAAC;EAEFX,IAAI,CAAC,+CAA+C,MAAAZ,kBAAA,CAAApC,OAAA,EAAE,aAAY;IAGhE,IAAA4D,OAAA,GAA6B,IAAAP,mBAAM,EAAC,IAAAb,WAAA,CAAAc,GAAA,EAACf,OAAA,CAAAvC,OAAU,IAAE,CAAC,CAAC;MAA3C6D,gBAAgB,GAAAD,OAAA,CAAhBC,gBAAgB;IAExB,MAAM,IAAAJ,oBAAO,EAAC,YAAM;MAClBR,MAAM,CAAC5D,gBAAgB,CAAC,CAACqE,gBAAgB,CAAC,CAAC;IAC7C,CAAC,EAAE;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;IAKrBV,MAAM,CAACrE,gBAAgB,CAAC,CAAC8E,gBAAgB,CAAC,CAAC;EAC7C,CAAC,EAAC;EAEFV,IAAI,CAAC,yCAAyC,MAAAZ,kBAAA,CAAApC,OAAA,EAAE,aAAY;IAG1DiD,MAAM,CAAC,YAAM;MACX,IAAAI,mBAAM,EAAC,IAAAb,WAAA,CAAAc,GAAA,EAACf,OAAA,CAAAvC,OAAU,IAAE,CAAC,CAAC;IACxB,CAAC,CAAC,CAACuD,GAAG,CAACC,OAAO,CAAC,CAAC;IAEhB,MAAM,IAAAC,oBAAO,EAAC,YAAM;MAClBR,MAAM,CAAC5D,gBAAgB,CAAC,CAACqE,gBAAgB,CAAC,CAAC;IAC7C,CAAC,EAAE;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;EACvB,CAAC,EAAC;AACJ,CAAC,CAAC","ignoreList":[]}