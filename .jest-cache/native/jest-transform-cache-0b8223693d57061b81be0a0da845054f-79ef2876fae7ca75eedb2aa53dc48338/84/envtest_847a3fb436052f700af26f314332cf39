77ee57140df5dfe5bb36043c0808ddc2
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _env2 = require("expo/virtual/env");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _env3 = require("../../config/env");
describe('env.js', function () {
  var originalEnv = process.env;
  beforeEach(function () {
    jest.resetModules();
    process.env = Object.assign({}, originalEnv);
  });
  afterAll(function () {
    process.env = originalEnv;
  });
  describe('getEnvVar', function () {
    test('should return default value when env var is not set', (0, _asyncToGenerator2.default)(function* () {
      delete process.env.NODE_ENV;
      jest.resetModules();
      var mod = yield import("../../config/env");
      expect(mod.NODE_ENV).toBe('development');
    }));
    test('should return env var value when set', (0, _asyncToGenerator2.default)(function* () {
      process.env.NODE_ENV = 'production';
      jest.resetModules();
      var mod = yield import("../../config/env");
      expect(mod.NODE_ENV).toBe('production');
    }));
    test('should throw error for missing required env var without default', (0, _asyncToGenerator2.default)(function* () {
      delete _env2.env.EXPO_PUBLIC_API_BASE_URL;
      jest.resetModules();
      var mod = yield import("../../config/env");
      expect(mod.API_BASE_URL).toBe('http://localhost:3000');
    }));
    test('should return API_BASE_URL with default', (0, _asyncToGenerator2.default)(function* () {
      delete _env2.env.EXPO_PUBLIC_API_BASE_URL;
      jest.resetModules();
      var mod = yield import("../../config/env");
      expect(mod.API_BASE_URL).toBe('http://localhost:3000');
    }));
    test('should return API_VERSION with default', (0, _asyncToGenerator2.default)(function* () {
      delete _env2.env.EXPO_PUBLIC_API_VERSION;
      jest.resetModules();
      var mod = yield import("../../config/env");
      expect(mod.API_VERSION).toBe('v1');
    }));
    test('should return custom env var values when set', (0, _asyncToGenerator2.default)(function* () {
      process.env.EXPO_PUBLIC_API_BASE_URL = 'https://api.example.com';
      process.env.EXPO_PUBLIC_API_VERSION = 'v2';
      jest.resetModules();
      var mod = yield import("../../config/env");
      expect(mod.API_BASE_URL).toBe('https://api.example.com');
      expect(mod.API_VERSION).toBe('v2');
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZW52MyIsInJlcXVpcmUiLCJkZXNjcmliZSIsIm9yaWdpbmFsRW52IiwicHJvY2VzcyIsImVudiIsImJlZm9yZUVhY2giLCJqZXN0IiwicmVzZXRNb2R1bGVzIiwiT2JqZWN0IiwiYXNzaWduIiwiYWZ0ZXJBbGwiLCJ0ZXN0IiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiZGVmYXVsdCIsIk5PREVfRU5WIiwibW9kIiwiZXhwZWN0IiwidG9CZSIsIl9lbnYyIiwiRVhQT19QVUJMSUNfQVBJX0JBU0VfVVJMIiwiQVBJX0JBU0VfVVJMIiwiRVhQT19QVUJMSUNfQVBJX1ZFUlNJT04iLCJBUElfVkVSU0lPTiJdLCJzb3VyY2VzIjpbImVudi50ZXN0LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBFbnZpcm9ubWVudCBDb25maWd1cmF0aW9uIFRlc3RzXHJcbiAqIEZpbGU6IGVudi50ZXN0LmpzXHJcbiAqL1xyXG5pbXBvcnQgeyBOT0RFX0VOViwgQVBJX0JBU0VfVVJMLCBBUElfVkVSU0lPTiB9IGZyb20gJ0Bjb25maWcvZW52JztcclxuXHJcbmRlc2NyaWJlKCdlbnYuanMnLCAoKSA9PiB7XHJcbiAgY29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudjtcclxuXHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBqZXN0LnJlc2V0TW9kdWxlcygpO1xyXG4gICAgcHJvY2Vzcy5lbnYgPSB7IC4uLm9yaWdpbmFsRW52IH07XHJcbiAgfSk7XHJcblxyXG4gIGFmdGVyQWxsKCgpID0+IHtcclxuICAgIHByb2Nlc3MuZW52ID0gb3JpZ2luYWxFbnY7XHJcbiAgfSk7XHJcblxyXG4gIGRlc2NyaWJlKCdnZXRFbnZWYXInLCAoKSA9PiB7XHJcbiAgICB0ZXN0KCdzaG91bGQgcmV0dXJuIGRlZmF1bHQgdmFsdWUgd2hlbiBlbnYgdmFyIGlzIG5vdCBzZXQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5OT0RFX0VOVjtcclxuICAgICAgamVzdC5yZXNldE1vZHVsZXMoKTtcclxuICAgICAgY29uc3QgbW9kID0gYXdhaXQgaW1wb3J0KCdAY29uZmlnL2VudicpO1xyXG4gICAgICBleHBlY3QobW9kLk5PREVfRU5WKS50b0JlKCdkZXZlbG9wbWVudCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBlbnYgdmFyIHZhbHVlIHdoZW4gc2V0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBwcm9jZXNzLmVudi5OT0RFX0VOViA9ICdwcm9kdWN0aW9uJztcclxuICAgICAgamVzdC5yZXNldE1vZHVsZXMoKTtcclxuICAgICAgY29uc3QgbW9kID0gYXdhaXQgaW1wb3J0KCdAY29uZmlnL2VudicpO1xyXG4gICAgICBleHBlY3QobW9kLk5PREVfRU5WKS50b0JlKCdwcm9kdWN0aW9uJyk7XHJcbiAgICB9KTtcclxuXHJcbiAgICB0ZXN0KCdzaG91bGQgdGhyb3cgZXJyb3IgZm9yIG1pc3NpbmcgcmVxdWlyZWQgZW52IHZhciB3aXRob3V0IGRlZmF1bHQnLCBhc3luYyAoKSA9PiB7XHJcbiAgICAgIGRlbGV0ZSBwcm9jZXNzLmVudi5FWFBPX1BVQkxJQ19BUElfQkFTRV9VUkw7XHJcbiAgICAgIGplc3QucmVzZXRNb2R1bGVzKCk7XHJcbiAgICAgIC8vIFRoaXMgc2hvdWxkIHVzZSB0aGUgZGVmYXVsdCwgc28gaXQgc2hvdWxkbid0IHRocm93XHJcbiAgICAgIGNvbnN0IG1vZCA9IGF3YWl0IGltcG9ydCgnQGNvbmZpZy9lbnYnKTtcclxuICAgICAgZXhwZWN0KG1vZC5BUElfQkFTRV9VUkwpLnRvQmUoJ2h0dHA6Ly9sb2NhbGhvc3Q6MzAwMCcpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgdGVzdCgnc2hvdWxkIHJldHVybiBBUElfQkFTRV9VUkwgd2l0aCBkZWZhdWx0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBkZWxldGUgcHJvY2Vzcy5lbnYuRVhQT19QVUJMSUNfQVBJX0JBU0VfVVJMO1xyXG4gICAgICBqZXN0LnJlc2V0TW9kdWxlcygpO1xyXG4gICAgICBjb25zdCBtb2QgPSBhd2FpdCBpbXBvcnQoJ0Bjb25maWcvZW52Jyk7XHJcbiAgICAgIGV4cGVjdChtb2QuQVBJX0JBU0VfVVJMKS50b0JlKCdodHRwOi8vbG9jYWxob3N0OjMwMDAnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gQVBJX1ZFUlNJT04gd2l0aCBkZWZhdWx0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBkZWxldGUgcHJvY2Vzcy5lbnYuRVhQT19QVUJMSUNfQVBJX1ZFUlNJT047XHJcbiAgICAgIGplc3QucmVzZXRNb2R1bGVzKCk7XHJcbiAgICAgIGNvbnN0IG1vZCA9IGF3YWl0IGltcG9ydCgnQGNvbmZpZy9lbnYnKTtcclxuICAgICAgZXhwZWN0KG1vZC5BUElfVkVSU0lPTikudG9CZSgndjEnKTtcclxuICAgIH0pO1xyXG5cclxuICAgIHRlc3QoJ3Nob3VsZCByZXR1cm4gY3VzdG9tIGVudiB2YXIgdmFsdWVzIHdoZW4gc2V0JywgYXN5bmMgKCkgPT4ge1xyXG4gICAgICBwcm9jZXNzLmVudi5FWFBPX1BVQkxJQ19BUElfQkFTRV9VUkwgPSAnaHR0cHM6Ly9hcGkuZXhhbXBsZS5jb20nO1xyXG4gICAgICBwcm9jZXNzLmVudi5FWFBPX1BVQkxJQ19BUElfVkVSU0lPTiA9ICd2Mic7XHJcbiAgICAgIGplc3QucmVzZXRNb2R1bGVzKCk7XHJcbiAgICAgIGNvbnN0IG1vZCA9IGF3YWl0IGltcG9ydCgnQGNvbmZpZy9lbnYnKTtcclxuICAgICAgZXhwZWN0KG1vZC5BUElfQkFTRV9VUkwpLnRvQmUoJ2h0dHBzOi8vYXBpLmV4YW1wbGUuY29tJyk7XHJcbiAgICAgIGV4cGVjdChtb2QuQVBJX1ZFUlNJT04pLnRvQmUoJ3YyJyk7XHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcblxyXG4iXSwibWFwcGluZ3MiOiI7OztBQUlBLElBQUFBLEtBQUEsR0FBQUMsT0FBQTtBQUVBQyxRQUFRLENBQUMsUUFBUSxFQUFFLFlBQU07RUFDdkIsSUFBTUMsV0FBVyxHQUFHQyxPQUFPLENBQUNDLEdBQUc7RUFFL0JDLFVBQVUsQ0FBQyxZQUFNO0lBQ2ZDLElBQUksQ0FBQ0MsWUFBWSxDQUFDLENBQUM7SUFDbkJKLE9BQU8sQ0FBQ0MsR0FBRyxHQUFBSSxNQUFBLENBQUFDLE1BQUEsS0FBUVAsV0FBVyxDQUFFO0VBQ2xDLENBQUMsQ0FBQztFQUVGUSxRQUFRLENBQUMsWUFBTTtJQUNiUCxPQUFPLENBQUNDLEdBQUcsR0FBR0YsV0FBVztFQUMzQixDQUFDLENBQUM7RUFFRkQsUUFBUSxDQUFDLFdBQVcsRUFBRSxZQUFNO0lBQzFCVSxJQUFJLENBQUMscURBQXFELE1BQUFDLGtCQUFBLENBQUFDLE9BQUEsRUFBRSxhQUFZO01BQ3RFLE9BQU9WLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDVSxRQUFRO01BQzNCUixJQUFJLENBQUNDLFlBQVksQ0FBQyxDQUFDO01BQ25CLElBQU1RLEdBQUcsU0FBUyxNQUFNLG1CQUFjLENBQUM7TUFDdkNDLE1BQU0sQ0FBQ0QsR0FBRyxDQUFDRCxRQUFRLENBQUMsQ0FBQ0csSUFBSSxDQUFDLGFBQWEsQ0FBQztJQUMxQyxDQUFDLEVBQUM7SUFFRk4sSUFBSSxDQUFDLHNDQUFzQyxNQUFBQyxrQkFBQSxDQUFBQyxPQUFBLEVBQUUsYUFBWTtNQUN2RFYsT0FBTyxDQUFDQyxHQUFHLENBQUNVLFFBQVEsR0FBRyxZQUFZO01BQ25DUixJQUFJLENBQUNDLFlBQVksQ0FBQyxDQUFDO01BQ25CLElBQU1RLEdBQUcsU0FBUyxNQUFNLG1CQUFjLENBQUM7TUFDdkNDLE1BQU0sQ0FBQ0QsR0FBRyxDQUFDRCxRQUFRLENBQUMsQ0FBQ0csSUFBSSxDQUFDLFlBQVksQ0FBQztJQUN6QyxDQUFDLEVBQUM7SUFFRk4sSUFBSSxDQUFDLGlFQUFpRSxNQUFBQyxrQkFBQSxDQUFBQyxPQUFBLEVBQUUsYUFBWTtNQUNsRixPQUFBSyxLQUFBLENBQUFkLEdBQUEsQ0FBQWUsd0JBQTJDO01BQzNDYixJQUFJLENBQUNDLFlBQVksQ0FBQyxDQUFDO01BRW5CLElBQU1RLEdBQUcsU0FBUyxNQUFNLG1CQUFjLENBQUM7TUFDdkNDLE1BQU0sQ0FBQ0QsR0FBRyxDQUFDSyxZQUFZLENBQUMsQ0FBQ0gsSUFBSSxDQUFDLHVCQUF1QixDQUFDO0lBQ3hELENBQUMsRUFBQztJQUVGTixJQUFJLENBQUMseUNBQXlDLE1BQUFDLGtCQUFBLENBQUFDLE9BQUEsRUFBRSxhQUFZO01BQzFELE9BQUFLLEtBQUEsQ0FBQWQsR0FBQSxDQUFBZSx3QkFBMkM7TUFDM0NiLElBQUksQ0FBQ0MsWUFBWSxDQUFDLENBQUM7TUFDbkIsSUFBTVEsR0FBRyxTQUFTLE1BQU0sbUJBQWMsQ0FBQztNQUN2Q0MsTUFBTSxDQUFDRCxHQUFHLENBQUNLLFlBQVksQ0FBQyxDQUFDSCxJQUFJLENBQUMsdUJBQXVCLENBQUM7SUFDeEQsQ0FBQyxFQUFDO0lBRUZOLElBQUksQ0FBQyx3Q0FBd0MsTUFBQUMsa0JBQUEsQ0FBQUMsT0FBQSxFQUFFLGFBQVk7TUFDekQsT0FBQUssS0FBQSxDQUFBZCxHQUFBLENBQUFpQix1QkFBMEM7TUFDMUNmLElBQUksQ0FBQ0MsWUFBWSxDQUFDLENBQUM7TUFDbkIsSUFBTVEsR0FBRyxTQUFTLE1BQU0sbUJBQWMsQ0FBQztNQUN2Q0MsTUFBTSxDQUFDRCxHQUFHLENBQUNPLFdBQVcsQ0FBQyxDQUFDTCxJQUFJLENBQUMsSUFBSSxDQUFDO0lBQ3BDLENBQUMsRUFBQztJQUVGTixJQUFJLENBQUMsOENBQThDLE1BQUFDLGtCQUFBLENBQUFDLE9BQUEsRUFBRSxhQUFZO01BQy9EVixPQUFPLENBQUNDLEdBQUcsQ0FBQ2Usd0JBQXdCLEdBQUcseUJBQXlCO01BQ2hFaEIsT0FBTyxDQUFDQyxHQUFHLENBQUNpQix1QkFBdUIsR0FBRyxJQUFJO01BQzFDZixJQUFJLENBQUNDLFlBQVksQ0FBQyxDQUFDO01BQ25CLElBQU1RLEdBQUcsU0FBUyxNQUFNLG1CQUFjLENBQUM7TUFDdkNDLE1BQU0sQ0FBQ0QsR0FBRyxDQUFDSyxZQUFZLENBQUMsQ0FBQ0gsSUFBSSxDQUFDLHlCQUF5QixDQUFDO01BQ3hERCxNQUFNLENBQUNELEdBQUcsQ0FBQ08sV0FBVyxDQUFDLENBQUNMLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDcEMsQ0FBQyxFQUFDO0VBQ0osQ0FBQyxDQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119