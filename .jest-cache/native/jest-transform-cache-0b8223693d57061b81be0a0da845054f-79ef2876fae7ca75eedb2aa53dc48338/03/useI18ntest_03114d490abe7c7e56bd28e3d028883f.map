{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_reactRedux","_toolkit","_useI18n","_rootReducer","i18n","_interopRequireWildcard","_jsxRuntime","createMockStore","preloadedState","arguments","length","undefined","configureStore","reducer","rootReducer","TestComponent","_ref","onResult","api","useI18n","React","useEffect","describe","it","_asyncToGenerator2","default","store","ui","theme","locale","isLoading","result","render","jsx","Provider","children","value","waitFor","expect","toBe","t","spy","jest","spyOn","mockImplementation","tSync","key","params","name","trim","mockRestore"],"sources":["useI18n.test.js"],"sourcesContent":["/**\r\n * useI18n Hook Tests\r\n * File: useI18n.test.js\r\n */\r\nimport React from 'react';\r\nimport { render, waitFor } from '@testing-library/react-native';\r\nimport { Provider } from 'react-redux';\r\nimport { configureStore } from '@reduxjs/toolkit';\r\nimport useI18n from '@hooks/useI18n';\r\nimport rootReducer from '@store/rootReducer';\r\nimport * as i18n from '@i18n';\r\n\r\nconst createMockStore = (preloadedState = {}) =>\r\n  configureStore({\r\n    reducer: rootReducer,\r\n    preloadedState,\r\n  });\r\n\r\nconst TestComponent = ({ onResult }) => {\r\n  const api = useI18n();\r\n  React.useEffect(() => {\r\n    onResult(api);\r\n  });\r\n  return null;\r\n};\r\n\r\ndescribe('useI18n', () => {\r\n  it('returns translator that resolves known keys', async () => {\r\n    const store = createMockStore({\r\n      ui: { theme: 'light', locale: 'en', isLoading: false },\r\n    });\r\n\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(result.locale).toBe('en');\r\n      expect(result.t('common.save')).toBe('Save');\r\n    });\r\n  });\r\n\r\n  it('returns deterministic fallback for missing keys (never throws)', async () => {\r\n    const store = createMockStore({\r\n      ui: { theme: 'light', locale: 'en', isLoading: false },\r\n    });\r\n\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(result.t('missing.key.path')).toBe('missing.key.path');\r\n    });\r\n  });\r\n\r\n  it('supports interpolation when i18n implementation provides it', async () => {\r\n    const spy = jest.spyOn(i18n, 'createI18n').mockImplementation(() => ({\r\n      tSync: (key, params) =>\r\n        key === 'greeting.hello' ? `Hi ${params?.name || ''}`.trim() : key,\r\n    }));\r\n\r\n    const store = createMockStore({\r\n      ui: { theme: 'light', locale: 'en', isLoading: false },\r\n    });\r\n\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n\r\n    await waitFor(() => {\r\n      expect(result.t('greeting.hello', { name: 'Ada' })).toBe('Hi Ada');\r\n    });\r\n\r\n    spy.mockRestore();\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}