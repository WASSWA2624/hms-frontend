dbd44beb82099ebe02b6ee74720efb4f
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initOffline = initOffline;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _offline = require("../offline");
var _logging = require("../logging");
var _store = _interopRequireDefault(require("../store"));
var _network = require("../store/slices/network.slice");
function initOffline() {
  return _initOffline.apply(this, arguments);
}
function _initOffline() {
  _initOffline = (0, _asyncToGenerator2.default)(function* () {
    try {
      _offline.networkListener.startListening();
      _offline.networkListener.subscribe(function (isOnline) {
        _store.default.dispatch(_network.actions.setOnline(isOnline));
      });
      var currentStatus = yield _offline.networkListener.checkConnectivity();
      _store.default.dispatch(_network.actions.setOnline(currentStatus));
      yield _offline.hydration.hydrate();
      _offline.syncManager.startSync();
      _logging.logger.info('Offline system initialized successfully');
    } catch (error) {
      _logging.logger.error('Offline initialization failed', {
        error: error.message
      });
    }
  });
  return _initOffline.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfb2ZmbGluZSIsInJlcXVpcmUiLCJfbG9nZ2luZyIsIl9zdG9yZSIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJfbmV0d29yayIsImluaXRPZmZsaW5lIiwiX2luaXRPZmZsaW5lIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkZWZhdWx0IiwibmV0d29ya0xpc3RlbmVyIiwic3RhcnRMaXN0ZW5pbmciLCJzdWJzY3JpYmUiLCJpc09ubGluZSIsInN0b3JlIiwiZGlzcGF0Y2giLCJhY3Rpb25zIiwic2V0T25saW5lIiwiY3VycmVudFN0YXR1cyIsImNoZWNrQ29ubmVjdGl2aXR5IiwiaHlkcmF0aW9uIiwiaHlkcmF0ZSIsInN5bmNNYW5hZ2VyIiwic3RhcnRTeW5jIiwibG9nZ2VyIiwiaW5mbyIsImVycm9yIiwibWVzc2FnZSJdLCJzb3VyY2VzIjpbImluaXQub2ZmbGluZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogT2ZmbGluZSBJbml0aWFsaXphdGlvblxyXG4gKiBGaWxlOiBpbml0Lm9mZmxpbmUuanNcclxuICovXHJcbmltcG9ydCB7IG5ldHdvcmtMaXN0ZW5lciwgc3luY01hbmFnZXIsIGh5ZHJhdGlvbiB9IGZyb20gJ0BvZmZsaW5lJztcclxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQGxvZ2dpbmcnO1xyXG5pbXBvcnQgc3RvcmUgZnJvbSAnQHN0b3JlJztcclxuaW1wb3J0IHsgYWN0aW9ucyB9IGZyb20gJ0BzdG9yZS9zbGljZXMvbmV0d29yay5zbGljZSc7XHJcblxyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdE9mZmxpbmUoKSB7XHJcbiAgdHJ5IHtcclxuICAgIC8vIFJlZ2lzdGVyIG5ldHdvcmsgbGlzdGVuZXJzXHJcbiAgICBuZXR3b3JrTGlzdGVuZXIuc3RhcnRMaXN0ZW5pbmcoKTtcclxuICAgIFxyXG4gICAgLy8gU3Vic2NyaWJlIHRvIG5ldHdvcmsgY2hhbmdlcyBhbmQgdXBkYXRlIFJlZHV4IHN0b3JlXHJcbiAgICBuZXR3b3JrTGlzdGVuZXIuc3Vic2NyaWJlKChpc09ubGluZSkgPT4ge1xyXG4gICAgICBzdG9yZS5kaXNwYXRjaChhY3Rpb25zLnNldE9ubGluZShpc09ubGluZSkpO1xyXG4gICAgfSk7XHJcbiAgICBcclxuICAgIC8vIEluaXRpYWxpemUgY3VycmVudCBuZXR3b3JrIHN0YXR1cyBpbiBzdG9yZVxyXG4gICAgY29uc3QgY3VycmVudFN0YXR1cyA9IGF3YWl0IG5ldHdvcmtMaXN0ZW5lci5jaGVja0Nvbm5lY3Rpdml0eSgpO1xyXG4gICAgc3RvcmUuZGlzcGF0Y2goYWN0aW9ucy5zZXRPbmxpbmUoY3VycmVudFN0YXR1cykpO1xyXG4gICAgXHJcbiAgICAvLyBJbml0aWFsaXplIHJlcXVlc3QgcXVldWVcclxuICAgIC8vIFF1ZXVlIGlzIGluaXRpYWxpemVkIGxhemlseSB3aGVuIGZpcnN0IHJlcXVlc3QgaXMgcXVldWVkXHJcbiAgICBcclxuICAgIC8vIFRyaWdnZXIgc3RhdGUgaHlkcmF0aW9uXHJcbiAgICBhd2FpdCBoeWRyYXRpb24uaHlkcmF0ZSgpO1xyXG4gICAgXHJcbiAgICAvLyBTdGFydCBzeW5jIG1hbmFnZXIgKHdpbGwgc3luYyB3aGVuIG9ubGluZSlcclxuICAgIHN5bmNNYW5hZ2VyLnN0YXJ0U3luYygpO1xyXG4gICAgXHJcbiAgICBsb2dnZXIuaW5mbygnT2ZmbGluZSBzeXN0ZW0gaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5lcnJvcignT2ZmbGluZSBpbml0aWFsaXphdGlvbiBmYWlsZWQnLCB7IGVycm9yOiBlcnJvci5tZXNzYWdlIH0pO1xyXG4gICAgLy8gT2ZmbGluZSBmYWlsdXJlIGlzIG5vdCBmYXRhbCAtIGFwcCBjYW4gY29udGludWUgd2l0aG91dCBvZmZsaW5lIHN1cHBvcnRcclxuICB9XHJcbn1cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBSUEsSUFBQUEsUUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsUUFBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsTUFBQSxHQUFBQyxzQkFBQSxDQUFBSCxPQUFBO0FBQ0EsSUFBQUksUUFBQSxHQUFBSixPQUFBO0FBQXNELFNBRWhDSyxXQUFXQSxDQUFBO0VBQUEsT0FBQUMsWUFBQSxDQUFBQyxLQUFBLE9BQUFDLFNBQUE7QUFBQTtBQUFBLFNBQUFGLGFBQUE7RUFBQUEsWUFBQSxPQUFBRyxrQkFBQSxDQUFBQyxPQUFBLEVBQTFCLGFBQTZCO0lBQ2xDLElBQUk7TUFFRkMsd0JBQWUsQ0FBQ0MsY0FBYyxDQUFDLENBQUM7TUFHaENELHdCQUFlLENBQUNFLFNBQVMsQ0FBQyxVQUFDQyxRQUFRLEVBQUs7UUFDdENDLGNBQUssQ0FBQ0MsUUFBUSxDQUFDQyxnQkFBTyxDQUFDQyxTQUFTLENBQUNKLFFBQVEsQ0FBQyxDQUFDO01BQzdDLENBQUMsQ0FBQztNQUdGLElBQU1LLGFBQWEsU0FBU1Isd0JBQWUsQ0FBQ1MsaUJBQWlCLENBQUMsQ0FBQztNQUMvREwsY0FBSyxDQUFDQyxRQUFRLENBQUNDLGdCQUFPLENBQUNDLFNBQVMsQ0FBQ0MsYUFBYSxDQUFDLENBQUM7TUFNaEQsTUFBTUUsa0JBQVMsQ0FBQ0MsT0FBTyxDQUFDLENBQUM7TUFHekJDLG9CQUFXLENBQUNDLFNBQVMsQ0FBQyxDQUFDO01BRXZCQyxlQUFNLENBQUNDLElBQUksQ0FBQyx5Q0FBeUMsQ0FBQztJQUN4RCxDQUFDLENBQUMsT0FBT0MsS0FBSyxFQUFFO01BQ2RGLGVBQU0sQ0FBQ0UsS0FBSyxDQUFDLCtCQUErQixFQUFFO1FBQUVBLEtBQUssRUFBRUEsS0FBSyxDQUFDQztNQUFRLENBQUMsQ0FBQztJQUV6RTtFQUNGLENBQUM7RUFBQSxPQUFBdEIsWUFBQSxDQUFBQyxLQUFBLE9BQUFDLFNBQUE7QUFBQSIsImlnbm9yZUxpc3QiOltdfQ==