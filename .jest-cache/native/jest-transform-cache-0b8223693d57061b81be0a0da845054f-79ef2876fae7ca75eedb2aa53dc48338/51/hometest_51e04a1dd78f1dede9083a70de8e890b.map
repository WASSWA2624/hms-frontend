{"version":3,"names":["_getJestObj","mock","useRouter","push","mockPush","replace","mockReplace","back","mockBack","canGoBack","mockCanGoBack","usePathname","mockPathname","useSegments","HomeScreen","jest","fn","useAuthGuard","_jsxRuntime","require","_require5","React","_require","render","_require2","ThemeProvider","_require3","_require4","lightThemeModule","lightTheme","default","renderWithTheme","component","jsx","theme","children","describe","beforeEach","clearAllMocks","mockReturnValue","authenticated","user","id","email","it","HomeRoute","expect","toHaveBeenCalled","toHaveBeenCalledTimes","toBeDefined","toBe","result","toBeTruthy"],"sources":["home.test.js"],"sourcesContent":["/**\r\n * Home Route Tests\r\n * File: home.test.js\r\n * \r\n * Tests the authenticated home route in the main route group\r\n * \r\n * Per Step 8.4 requirements:\r\n * - Test route renders without errors\r\n * - Test HomeScreen is rendered\r\n * - Test auth guard protection (mock guard behavior)\r\n * - Mock expo-router and HomeScreen component\r\n * - Test route is accessible when authenticated (mock navigation)\r\n * - Coverage: 100% coverage required per testing.mdc\r\n */\r\nconst React = require('react');\r\nconst { render } = require('@testing-library/react-native');\r\nconst { ThemeProvider } = require('styled-components/native');\r\nconst { HomeScreen } = require('@platform/screens');\r\nconst { useAuthGuard } = require('@navigation/guards');\r\n\r\n// Mock expo-router (per Step 8.4 requirements)\r\nconst mockPush = jest.fn();\r\nconst mockReplace = jest.fn();\r\nconst mockBack = jest.fn();\r\nconst mockCanGoBack = jest.fn(() => false);\r\nconst mockPathname = '/home';\r\n\r\njest.mock('expo-router', () => ({\r\n  useRouter: () => ({\r\n    push: mockPush,\r\n    replace: mockReplace,\r\n    back: mockBack,\r\n    canGoBack: mockCanGoBack,\r\n  }),\r\n  usePathname: () => mockPathname,\r\n  useSegments: () => ['home'],\r\n}));\r\n\r\njest.mock('@platform/screens', () => ({\r\n  HomeScreen: jest.fn(() => null),\r\n}));\r\n\r\n// Mock auth guard (per Step 8.4 requirements: test auth guard protection)\r\njest.mock('@navigation/guards', () => ({\r\n  useAuthGuard: jest.fn(),\r\n}));\r\n\r\nconst lightThemeModule = require('@theme/light.theme');\r\nconst lightTheme = lightThemeModule.default || lightThemeModule;\r\n\r\nconst renderWithTheme = (component) => {\r\n  return render(<ThemeProvider theme={lightTheme}>{component}</ThemeProvider>);\r\n};\r\n\r\ndescribe('Home Route (home.jsx)', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    \r\n    // Default: authenticated (home route should be accessible when authenticated)\r\n    useAuthGuard.mockReturnValue({\r\n      authenticated: true,\r\n      user: { id: '1', email: 'test@example.com' },\r\n    });\r\n  });\r\n\r\n  it('should render without errors', () => {\r\n    const HomeRoute = require('../../../app/(main)/home').default;\r\n    renderWithTheme(<HomeRoute />);\r\n    expect(HomeScreen).toHaveBeenCalled();\r\n  });\r\n\r\n  it('should render HomeScreen component', () => {\r\n    const HomeRoute = require('../../../app/(main)/home').default;\r\n    renderWithTheme(<HomeRoute />);\r\n    expect(HomeScreen).toHaveBeenCalledTimes(1);\r\n  });\r\n\r\n  it('should use default export', () => {\r\n    const HomeRoute = require('../../../app/(main)/home');\r\n    expect(HomeRoute.default).toBeDefined();\r\n    expect(typeof HomeRoute.default).toBe('function');\r\n  });\r\n\r\n  it('should be accessible when authenticated (mock navigation)', () => {\r\n    // Per Step 8.4: Test route is accessible when authenticated (mock navigation)\r\n    useAuthGuard.mockReturnValue({\r\n      authenticated: true,\r\n      user: { id: '1', email: 'test@example.com' },\r\n    });\r\n\r\n    const HomeRoute = require('../../../app/(main)/home').default;\r\n    const result = renderWithTheme(<HomeRoute />);\r\n    \r\n    // Verify route renders successfully when authenticated (accessible)\r\n    expect(result).toBeTruthy();\r\n    expect(HomeScreen).toHaveBeenCalled();\r\n    \r\n    // Verify route is at /home path (group segment omitted per app-router.mdc)\r\n    // The route is accessible when it renders without errors\r\n    expect(mockPathname).toBe('/home');\r\n  });\r\n\r\n  it('should be protected by auth guard (guard behavior)', () => {\r\n    // Per Step 8.4: Test auth guard protection (mock guard behavior)\r\n    // The auth guard is in the main layout, not the route itself\r\n    // This test verifies the route works correctly when the guard allows access\r\n    \r\n    // When authenticated, route should render\r\n    useAuthGuard.mockReturnValue({\r\n      authenticated: true,\r\n      user: { id: '1', email: 'test@example.com' },\r\n    });\r\n\r\n    const HomeRoute = require('../../../app/(main)/home').default;\r\n    const result = renderWithTheme(<HomeRoute />);\r\n    \r\n    // Route should render when authenticated (guard allows access)\r\n    expect(result).toBeTruthy();\r\n    expect(HomeScreen).toHaveBeenCalled();\r\n    \r\n    // Note: The actual redirect behavior is tested in main-layout-guard.test.js\r\n    // This test verifies the route component itself works when guard allows access\r\n  });\r\n\r\n  it('should handle route when guard allows access', () => {\r\n    // Test that route renders correctly when auth guard allows access\r\n    useAuthGuard.mockReturnValue({\r\n      authenticated: true,\r\n      user: { id: '1', email: 'test@example.com' },\r\n    });\r\n\r\n    const HomeRoute = require('../../../app/(main)/home').default;\r\n    renderWithTheme(<HomeRoute />);\r\n    \r\n    // Verify HomeScreen is rendered (route is accessible)\r\n    expect(HomeScreen).toHaveBeenCalledTimes(1);\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}