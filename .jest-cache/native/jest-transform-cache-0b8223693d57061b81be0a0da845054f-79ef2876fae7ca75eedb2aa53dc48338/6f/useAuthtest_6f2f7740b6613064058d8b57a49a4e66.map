{"version":3,"names":["_react","_interopRequireDefault","require","_reactRedux","_toolkit","_reactNative","_rootReducer","_useAuth","_jsxRuntime","TestComponent","_ref","onResult","result","useAuth","React","useEffect","createStore","preloadedState","arguments","length","undefined","configureStore","reducer","rootReducer","Object","assign","ui","theme","locale","isLoading","network","isOnline","auth","user","isAuthenticated","errorCode","lastUpdated","describe","it","store","render","jsx","Provider","children","value","expect","toBe","toBeNull","roles","toEqual","role","id","toMatchObject"],"sources":["useAuth.test.js"],"sourcesContent":["/**\r\n * useAuth Hook Tests\r\n * File: useAuth.test.js\r\n */\r\nimport React from 'react';\r\nimport { Provider } from 'react-redux';\r\nimport { configureStore } from '@reduxjs/toolkit';\r\nimport { render } from '@testing-library/react-native';\r\nimport rootReducer from '@store/rootReducer';\r\nimport useAuth from '@hooks/useAuth';\r\n\r\nconst TestComponent = ({ onResult }) => {\r\n  const result = useAuth();\r\n  React.useEffect(() => {\r\n    onResult(result);\r\n  }, [onResult, result]);\r\n  return null;\r\n};\r\n\r\nconst createStore = (preloadedState = {}) =>\r\n  configureStore({\r\n    reducer: rootReducer,\r\n    preloadedState: {\r\n      ui: {\r\n        theme: 'light',\r\n        locale: 'en',\r\n        isLoading: false,\r\n      },\r\n      network: {\r\n        isOnline: true,\r\n      },\r\n      auth: {\r\n        user: null,\r\n        isAuthenticated: false,\r\n        isLoading: false,\r\n        errorCode: null,\r\n        lastUpdated: null,\r\n      },\r\n      ...preloadedState,\r\n    },\r\n  });\r\n\r\ndescribe('useAuth', () => {\r\n  it('returns defaults when unauthenticated', () => {\r\n    const store = createStore();\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n    expect(result.isAuthenticated).toBe(false);\r\n    expect(result.user).toBeNull();\r\n    expect(result.roles).toEqual([]);\r\n    expect(result.role).toBeNull();\r\n    expect(result.isLoading).toBe(false);\r\n    expect(result.errorCode).toBeNull();\r\n  });\r\n\r\n  it('returns normalized roles when authenticated', () => {\r\n    const store = createStore({\r\n      auth: {\r\n        user: {\r\n          id: '1',\r\n          role: 'Patient',\r\n          roles: ['Patient', 'Admin'],\r\n        },\r\n        isAuthenticated: true,\r\n        isLoading: false,\r\n        errorCode: null,\r\n        lastUpdated: null,\r\n      },\r\n    });\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n    expect(result.isAuthenticated).toBe(true);\r\n    expect(result.user).toMatchObject({ id: '1' });\r\n    expect(result.roles).toEqual(['patient', 'admin']);\r\n    expect(result.role).toBe('patient');\r\n    expect(result.isLoading).toBe(false);\r\n    expect(result.errorCode).toBeNull();\r\n  });\r\n\r\n  it('returns loading and error state', () => {\r\n    const store = createStore({\r\n      auth: {\r\n        user: null,\r\n        isAuthenticated: false,\r\n        isLoading: true,\r\n        errorCode: 'UNAUTHORIZED',\r\n        lastUpdated: null,\r\n      },\r\n    });\r\n    let result;\r\n    render(\r\n      <Provider store={store}>\r\n        <TestComponent onResult={(value) => (result = value)} />\r\n      </Provider>\r\n    );\r\n    expect(result.isLoading).toBe(true);\r\n    expect(result.errorCode).toBe('UNAUTHORIZED');\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}