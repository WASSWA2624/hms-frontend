{"version":3,"names":["_getJestObj","mock","logger","error","jest","fn","handleError","code","message","safeMessage","severity","_interopRequireDefault","require","default","_react","_reactNative","_reactNative2","_ErrorBoundary","_logging","_error","_jsxRuntime","_require","describe","beforeEach","clearAllMocks","spyOn","console","mockImplementation","afterEach","mockRestore","test","_render","render","jsx","children","Text","getByText","expect","toBeTruthy","ThrowError","Error","_render2","toHaveBeenCalled","_render3","getByLabelText","retryButton","fireEvent","press"],"sources":["ErrorBoundary.test.js"],"sourcesContent":["/**\r\n * Error Boundary Component Tests\r\n * File: ErrorBoundary.test.js\r\n */\r\nimport React from 'react';\r\nimport { Text } from 'react-native';\r\nimport { render, fireEvent } from '@testing-library/react-native';\r\nimport ErrorBoundary from '@errors/ErrorBoundary';\r\nimport { logger } from '@logging';\r\nimport { handleError } from '@errors/error.handler';\r\n\r\njest.mock('@logging', () => ({\r\n  logger: {\r\n    error: jest.fn(),\r\n  },\r\n}));\r\n\r\njest.mock('@errors/error.handler', () => ({\r\n  handleError: jest.fn((error) => ({\r\n    code: 'TEST_ERROR',\r\n    message: 'Test error',\r\n    safeMessage: 'Test error',\r\n    severity: 'error',\r\n  })),\r\n}));\r\n\r\ndescribe('errors/ErrorBoundary.jsx', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    // Suppress console.error for error boundary tests\r\n    jest.spyOn(console, 'error').mockImplementation(() => {});\r\n  });\r\n\r\n  afterEach(() => {\r\n    console.error.mockRestore();\r\n  });\r\n\r\n  test('should render children when no error', () => {\r\n    const { getByText } = render(\r\n      <ErrorBoundary>\r\n        <Text>Test Content</Text>\r\n      </ErrorBoundary>\r\n    );\r\n    expect(getByText('Test Content')).toBeTruthy();\r\n  });\r\n\r\n  test('should catch errors and display fallback UI', () => {\r\n    const ThrowError = () => {\r\n      throw new Error('Test error');\r\n    };\r\n\r\n    const { getByText } = render(\r\n      <ErrorBoundary>\r\n        <ThrowError />\r\n      </ErrorBoundary>\r\n    );\r\n\r\n    expect(getByText('Something went wrong')).toBeTruthy();\r\n  });\r\n\r\n  test('should log error when caught', () => {\r\n    const ThrowError = () => {\r\n      throw new Error('Test error');\r\n    };\r\n\r\n    render(\r\n      <ErrorBoundary>\r\n        <ThrowError />\r\n      </ErrorBoundary>\r\n    );\r\n\r\n    expect(handleError).toHaveBeenCalled();\r\n    expect(logger.error).toHaveBeenCalled();\r\n  });\r\n\r\n  test('should allow retry after error', () => {\r\n    const ThrowError = () => {\r\n      throw new Error('Test error');\r\n    };\r\n\r\n    const { getByText, getByLabelText } = render(\r\n      <ErrorBoundary>\r\n        <ThrowError />\r\n      </ErrorBoundary>\r\n    );\r\n\r\n    // Verify error is caught and fallback UI is shown\r\n    expect(getByText('Something went wrong')).toBeTruthy();\r\n\r\n    // Verify retry button exists and can be pressed\r\n    const retryButton = getByLabelText('Retry');\r\n    expect(retryButton).toBeTruthy();\r\n    \r\n    // Press retry button - this should reset the error state\r\n    // Note: Full reset behavior is complex to test due to React error boundary lifecycle\r\n    // This test verifies the retry mechanism exists and is accessible\r\n    fireEvent.press(retryButton);\r\n    \r\n    // After pressing retry, ErrorBoundary's internal state should be reset\r\n    // The component should be ready to render children again on next render cycle\r\n    expect(retryButton).toBeTruthy();\r\n  });\r\n});\r\n\r\n"],"mappings":"AAWAA,WAAA,GAAKC,IAAI,kBAAa;EAAA,OAAO;IAC3BC,MAAM,EAAE;MACNC,KAAK,EAAEC,IAAI,CAACC,EAAE,CAAC;IACjB;EACF,CAAC;AAAA,CAAC,CAAC;AAEHL,WAAA,GAAKC,IAAI,+BAA0B;EAAA,OAAO;IACxCK,WAAW,EAAEF,IAAI,CAACC,EAAE,CAAC,UAACF,KAAK;MAAA,OAAM;QAC/BI,IAAI,EAAE,YAAY;QAClBC,OAAO,EAAE,YAAY;QACrBC,WAAW,EAAE,YAAY;QACzBC,QAAQ,EAAE;MACZ,CAAC;IAAA,CAAC;EACJ,CAAC;AAAA,CAAC,CAAC;AAAC,IAAAC,sBAAA,GAAAC,OAAA,iDAAAC,OAAA;AApBJ,IAAAC,MAAA,GAAAH,sBAAA,CAAAC,OAAA;AACA,IAAAG,YAAA,GAAAH,OAAA;AACA,IAAAI,aAAA,GAAAJ,OAAA;AACA,IAAAK,cAAA,GAAAN,sBAAA,CAAAC,OAAA;AACA,IAAAM,QAAA,GAAAN,OAAA;AACA,IAAAO,MAAA,GAAAP,OAAA;AAAoD,IAAAQ,WAAA,GAAAR,OAAA;AAAA,SAAAZ,YAAA;EAAA,IAAAqB,QAAA,GAAAT,OAAA;IAAAR,IAAA,GAAAiB,QAAA,CAAAjB,IAAA;EAAAJ,WAAA,YAAAA,YAAA;IAAA,OAAAI,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAiBpDkB,QAAQ,CAAC,0BAA0B,EAAE,YAAM;EACzCC,UAAU,CAAC,YAAM;IACfnB,IAAI,CAACoB,aAAa,CAAC,CAAC;IAEpBpB,IAAI,CAACqB,KAAK,CAACC,OAAO,EAAE,OAAO,CAAC,CAACC,kBAAkB,CAAC,YAAM,CAAC,CAAC,CAAC;EAC3D,CAAC,CAAC;EAEFC,SAAS,CAAC,YAAM;IACdF,OAAO,CAACvB,KAAK,CAAC0B,WAAW,CAAC,CAAC;EAC7B,CAAC,CAAC;EAEFC,IAAI,CAAC,sCAAsC,EAAE,YAAM;IACjD,IAAAC,OAAA,GAAsB,IAAAC,oBAAM,EAC1B,IAAAZ,WAAA,CAAAa,GAAA,EAAChB,cAAA,CAAAJ,OAAa;QAAAqB,QAAA,EACZ,IAAAd,WAAA,CAAAa,GAAA,EAAClB,YAAA,CAAAoB,IAAI;UAAAD,QAAA,EAAC;QAAY,CAAM;MAAC,CACZ,CACjB,CAAC;MAJOE,SAAS,GAAAL,OAAA,CAATK,SAAS;IAKjBC,MAAM,CAACD,SAAS,CAAC,cAAc,CAAC,CAAC,CAACE,UAAU,CAAC,CAAC;EAChD,CAAC,CAAC;EAEFR,IAAI,CAAC,6CAA6C,EAAE,YAAM;IACxD,IAAMS,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;MACvB,MAAM,IAAIC,KAAK,CAAC,YAAY,CAAC;IAC/B,CAAC;IAED,IAAAC,QAAA,GAAsB,IAAAT,oBAAM,EAC1B,IAAAZ,WAAA,CAAAa,GAAA,EAAChB,cAAA,CAAAJ,OAAa;QAAAqB,QAAA,EACZ,IAAAd,WAAA,CAAAa,GAAA,EAACM,UAAU,IAAE;MAAC,CACD,CACjB,CAAC;MAJOH,SAAS,GAAAK,QAAA,CAATL,SAAS;IAMjBC,MAAM,CAACD,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAACE,UAAU,CAAC,CAAC;EACxD,CAAC,CAAC;EAEFR,IAAI,CAAC,8BAA8B,EAAE,YAAM;IACzC,IAAMS,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;MACvB,MAAM,IAAIC,KAAK,CAAC,YAAY,CAAC;IAC/B,CAAC;IAED,IAAAR,oBAAM,EACJ,IAAAZ,WAAA,CAAAa,GAAA,EAAChB,cAAA,CAAAJ,OAAa;MAAAqB,QAAA,EACZ,IAAAd,WAAA,CAAAa,GAAA,EAACM,UAAU,IAAE;IAAC,CACD,CACjB,CAAC;IAEDF,MAAM,CAAC/B,kBAAW,CAAC,CAACoC,gBAAgB,CAAC,CAAC;IACtCL,MAAM,CAACnC,eAAM,CAACC,KAAK,CAAC,CAACuC,gBAAgB,CAAC,CAAC;EACzC,CAAC,CAAC;EAEFZ,IAAI,CAAC,gCAAgC,EAAE,YAAM;IAC3C,IAAMS,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;MACvB,MAAM,IAAIC,KAAK,CAAC,YAAY,CAAC;IAC/B,CAAC;IAED,IAAAG,QAAA,GAAsC,IAAAX,oBAAM,EAC1C,IAAAZ,WAAA,CAAAa,GAAA,EAAChB,cAAA,CAAAJ,OAAa;QAAAqB,QAAA,EACZ,IAAAd,WAAA,CAAAa,GAAA,EAACM,UAAU,IAAE;MAAC,CACD,CACjB,CAAC;MAJOH,SAAS,GAAAO,QAAA,CAATP,SAAS;MAAEQ,cAAc,GAAAD,QAAA,CAAdC,cAAc;IAOjCP,MAAM,CAACD,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAACE,UAAU,CAAC,CAAC;IAGtD,IAAMO,WAAW,GAAGD,cAAc,CAAC,OAAO,CAAC;IAC3CP,MAAM,CAACQ,WAAW,CAAC,CAACP,UAAU,CAAC,CAAC;IAKhCQ,uBAAS,CAACC,KAAK,CAACF,WAAW,CAAC;IAI5BR,MAAM,CAACQ,WAAW,CAAC,CAACP,UAAU,CAAC,CAAC;EAClC,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}