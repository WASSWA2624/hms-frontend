{"version":3,"names":["useCallback","useMemo","useRouter","usePathname","SETTINGS_TABS","SETTINGS_TAB_ORDER","SETTINGS_SIDEBAR_GROUPS","SETTINGS_TAB_ICONS","cov_xvyv9puv4","s","useSettingsScreen","f","router","pathname","getCurrentTab","_ref3","parts","split","filter","Boolean","lastPart","length","segmentToTab","USER","USER_PROFILE","ROLE","PERMISSION","ROLE_PERMISSION","USER_ROLE","USER_SESSION","TENANT","FACILITY","BRANCH","DEPARTMENT","UNIT","ROOM","WARD","BED","ADDRESS","CONTACT","API_KEY","API_KEY_PERMISSION","USER_MFA","OAUTH_ACCOUNT","b","_ref","segment","GENERAL","_ref2","tabMap","Object","assign","selectedTab","currentTabId","tabs","map","tabKey","_ref4","id","label","testID","icon","groupedTabs","group","labelKey","_ref5","handleTabChange","tabId","_ref6","routeMap","_defineProperty","route","push","onTabChange","accessibilityLabel"],"sources":["useSettingsScreen.js"],"sourcesContent":["/**\r\n * useSettingsScreen Hook\r\n * File: useSettingsScreen.js\r\n *\r\n * Manages the Settings main screen logic including tab navigation\r\n * Per features-domain.mdc: Business logic separated from UI\r\n */\r\n\r\nimport { useCallback, useMemo } from 'react';\r\nimport { useRouter, usePathname } from 'expo-router';\r\nimport { SETTINGS_TABS, SETTINGS_TAB_ORDER, SETTINGS_SIDEBAR_GROUPS, SETTINGS_TAB_ICONS } from './types';\r\n\r\n/**\r\n * useSettingsScreen hook\r\n * Manages Settings screen tab state and navigation\r\n * \r\n * @returns {Object} Settings screen state and handlers\r\n */\r\nconst useSettingsScreen = () => {\r\n  const router = useRouter();\r\n  const pathname = usePathname();\r\n  \r\n  // Extract current tab from pathname\r\n  // E.g., /settings/users -> USER; /settings/tenants/create -> TENANT; /settings/facilities/[id]/edit -> FACILITY\r\n  const getCurrentTab = useCallback(() => {\r\n    const parts = pathname.split('/').filter(Boolean);\r\n    const lastPart = parts[parts.length - 1];\r\n\r\n    const segmentToTab = {\r\n      'users': SETTINGS_TABS.USER,\r\n      'user-profiles': SETTINGS_TABS.USER_PROFILE,\r\n      'roles': SETTINGS_TABS.ROLE,\r\n      'permissions': SETTINGS_TABS.PERMISSION,\r\n      'role-permissions': SETTINGS_TABS.ROLE_PERMISSION,\r\n      'user-roles': SETTINGS_TABS.USER_ROLE,\r\n      'user-sessions': SETTINGS_TABS.USER_SESSION,\r\n      'tenants': SETTINGS_TABS.TENANT,\r\n      'facilities': SETTINGS_TABS.FACILITY,\r\n      'branches': SETTINGS_TABS.BRANCH,\r\n      'departments': SETTINGS_TABS.DEPARTMENT,\r\n      'units': SETTINGS_TABS.UNIT,\r\n      'rooms': SETTINGS_TABS.ROOM,\r\n      'wards': SETTINGS_TABS.WARD,\r\n      'beds': SETTINGS_TABS.BED,\r\n      'addresses': SETTINGS_TABS.ADDRESS,\r\n      'contacts': SETTINGS_TABS.CONTACT,\r\n      'api-keys': SETTINGS_TABS.API_KEY,\r\n      'api-key-permissions': SETTINGS_TABS.API_KEY_PERMISSION,\r\n      'user-mfas': SETTINGS_TABS.USER_MFA,\r\n      'oauth-accounts': SETTINGS_TABS.OAUTH_ACCOUNT,\r\n    };\r\n\r\n    if (lastPart === 'create' && parts.length >= 2) {\r\n      const segment = parts[parts.length - 2];\r\n      return segmentToTab[segment] ?? SETTINGS_TABS.GENERAL;\r\n    }\r\n    if (lastPart === 'edit' && parts.length >= 3) {\r\n      const segment = parts[parts.length - 3];\r\n      return segmentToTab[segment] ?? SETTINGS_TABS.GENERAL;\r\n    }\r\n\r\n    const tabMap = {\r\n      '': SETTINGS_TABS.GENERAL,\r\n      'general': SETTINGS_TABS.GENERAL,\r\n      'settings': SETTINGS_TABS.GENERAL,\r\n      ...segmentToTab,\r\n    };\r\n    return tabMap[lastPart] ?? SETTINGS_TABS.GENERAL;\r\n  }, [pathname]);\r\n\r\n  const selectedTab = getCurrentTab();\r\n  const currentTabId = selectedTab;\r\n\r\n  const tabs = useMemo(() => SETTINGS_TAB_ORDER.map(tabKey => ({\r\n    id: tabKey,\r\n    label: `settings.tabs.${tabKey}`,\r\n    testID: `settings-tab-${tabKey}`,\r\n    icon: SETTINGS_TAB_ICONS[tabKey] ?? null,\r\n  })), []);\r\n\r\n  const groupedTabs = useMemo(() => SETTINGS_SIDEBAR_GROUPS.map(group => ({\r\n    id: group.id,\r\n    labelKey: group.labelKey,\r\n    tabs: group.tabs.map(tabKey => ({\r\n      id: tabKey,\r\n      label: `settings.tabs.${tabKey}`,\r\n      testID: `settings-tab-${tabKey}`,\r\n      icon: SETTINGS_TAB_ICONS[tabKey] ?? null,\r\n    })),\r\n  })), []);\r\n\r\n  const handleTabChange = useCallback((tabId) => {\r\n    // Map tab to route path; navigation updates pathname and currentTabId follows\r\n    const routeMap = {\r\n      [SETTINGS_TABS.GENERAL]: '/settings',\r\n      [SETTINGS_TABS.USER]: '/settings/users',\r\n      [SETTINGS_TABS.USER_PROFILE]: '/settings/user-profiles',\r\n      [SETTINGS_TABS.ROLE]: '/settings/roles',\r\n      [SETTINGS_TABS.PERMISSION]: '/settings/permissions',\r\n      [SETTINGS_TABS.ROLE_PERMISSION]: '/settings/role-permissions',\r\n      [SETTINGS_TABS.USER_ROLE]: '/settings/user-roles',\r\n      [SETTINGS_TABS.USER_SESSION]: '/settings/user-sessions',\r\n      [SETTINGS_TABS.TENANT]: '/settings/tenants',\r\n      [SETTINGS_TABS.FACILITY]: '/settings/facilities',\r\n      [SETTINGS_TABS.BRANCH]: '/settings/branches',\r\n      [SETTINGS_TABS.DEPARTMENT]: '/settings/departments',\r\n      [SETTINGS_TABS.UNIT]: '/settings/units',\r\n      [SETTINGS_TABS.ROOM]: '/settings/rooms',\r\n      [SETTINGS_TABS.WARD]: '/settings/wards',\r\n      [SETTINGS_TABS.BED]: '/settings/beds',\r\n      [SETTINGS_TABS.ADDRESS]: '/settings/addresses',\r\n      [SETTINGS_TABS.CONTACT]: '/settings/contacts',\r\n      [SETTINGS_TABS.API_KEY]: '/settings/api-keys',\r\n      [SETTINGS_TABS.API_KEY_PERMISSION]: '/settings/api-key-permissions',\r\n      [SETTINGS_TABS.USER_MFA]: '/settings/user-mfas',\r\n      [SETTINGS_TABS.OAUTH_ACCOUNT]: '/settings/oauth-accounts',\r\n    };\r\n    \r\n    const route = routeMap[tabId];\r\n    if (route) {\r\n      router.push(route);\r\n    }\r\n  }, [router]);\r\n\r\n  return {\r\n    selectedTab,\r\n    currentTabId,\r\n    tabs,\r\n    groupedTabs,\r\n    onTabChange: handleTabChange,\r\n    testID: 'settings-screen',\r\n    accessibilityLabel: 'settings.screen.label',\r\n  };\r\n};\r\n\r\nexport default useSettingsScreen;\r\n"],"mappings":"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","ignoreList":[]}