{"version":3,"names":["_getJestObj","mock","React","require","_require","View","Text","Slot","result","mockSlotRenderer","createElement","useRouter","push","jest","fn","replace","back","bootstrapApp","mockBootstrapApp","apply","arguments","virtual","_require2","configureStore","rootReducer","default","store","reducer","preloadedState","ui","theme","locale","isLoading","network","isOnline","mockPersistor","purge","pause","persist","flush","persistor","PersistGate","_ref","children","Fragment","_require3","ThemeProvider","lightTheme","__esModule","_ref2","_require4","ActivityIndicator","StyledLoadingContainer","_ref3","testID","StyledActivityIndicator","props","selectTheme","I18nProvider","_ref4","getDeviceLocale","logger","error","info","warn","debug","handleError","code","message","safeMessage","severity","_require5","_require6","FallbackUI","ErrorBoundary","_React$Component","_this","_classCallCheck2","_callSuper2","state","hasError","_inherits2","_createClass2","key","value","componentDidCatch","errorInfo","normalized","setState","render","_this2","onRetry","getDerivedStateFromError","Component","_interopRequireDefault","_asyncToGenerator2","_react","_reactNative","_reactNative2","_logging","_error","_layout","_jsxRuntime","_require7","originalError","console","beforeAll","afterAll","describe","beforeEach","clearAllMocks","mockResolvedValue","undefined","test","_render","jsx","getByText","waitFor","expect","toBeTruthy","timeout","toHaveBeenCalled","ThrowError","Error","_render2","ThrowSensitiveError","stack","_render3","queryByText","toBeNull","_render4","not","toThrow","bootstrapError","mockRejectedValue","_render5","UNSAFE_root","toHaveBeenCalledWith"],"sources":["root-layout-error-boundary.test.js"],"sourcesContent":["/**\r\n * Root Layout ErrorBoundary Tests\r\n * File: root-layout-error-boundary.test.js\r\n * \r\n * Step 7.2: Add ErrorBoundary to root layout\r\n * \r\n * Per Step 7.2 requirements:\r\n * - ErrorBoundary is imported from @errors\r\n * - ErrorBoundary wraps all content in root layout\r\n * - Fallback UI does not expose raw error details (per errors-logging.mdc)\r\n * \r\n * Per app-router.mdc: Root layouts use <Slot /> to render child routes, not {children} props.\r\n * Per testing.mdc: Tests verify behavior, not implementation details.\r\n * Per errors-logging.mdc: Fallback UI must not expose raw error details.\r\n */\r\nimport React from 'react';\r\nimport { Text, View } from 'react-native';\r\nimport { render, waitFor } from '@testing-library/react-native';\r\nimport { logger } from '@logging';\r\nimport { handleError } from '@errors/error.handler';\r\n\r\n// Mock expo-router Slot component\r\n// Per app-router.mdc: Layouts use <Slot /> to render child routes\r\n// We'll mock Slot to render different components based on test needs\r\nlet mockSlotRenderer = () => null;\r\njest.mock('expo-router', () => {\r\n  const React = require('react');\r\n  const { View, Text } = require('react-native');\r\n  return {\r\n    Slot: () => {\r\n      const result = mockSlotRenderer();\r\n      return result || React.createElement(View, null, React.createElement(Text, null, 'Mock Slot - No Child Routes'));\r\n    },\r\n    useRouter: () => ({\r\n      push: jest.fn(),\r\n      replace: jest.fn(),\r\n      back: jest.fn(),\r\n    }),\r\n  };\r\n});\r\n\r\n// Mock bootstrap module before importing RootLayout\r\nconst mockBootstrapApp = jest.fn();\r\njest.mock('@bootstrap', () => ({\r\n  bootstrapApp: (...args) => mockBootstrapApp(...args),\r\n}), { virtual: true });\r\n\r\n// Mock store module\r\njest.mock('@store', () => {\r\n  const { configureStore } = require('@reduxjs/toolkit');\r\n  const rootReducer = require('@store/rootReducer').default;\r\n  \r\n  const store = configureStore({\r\n    reducer: rootReducer,\r\n    preloadedState: {\r\n      ui: {\r\n        theme: 'light',\r\n        locale: 'en',\r\n        isLoading: false,\r\n      },\r\n      network: {\r\n        isOnline: true,\r\n      },\r\n    },\r\n  });\r\n  \r\n  const mockPersistor = {\r\n    purge: jest.fn(),\r\n    pause: jest.fn(),\r\n    persist: jest.fn(),\r\n    flush: jest.fn(),\r\n  };\r\n  store.persistor = mockPersistor;\r\n  \r\n  return store;\r\n}, { virtual: true });\r\n\r\n// Mock PersistGate to render children immediately\r\njest.mock('redux-persist/integration/react', () => {\r\n  const React = require('react');\r\n  return {\r\n    PersistGate: ({ children }) => React.createElement(React.Fragment, null, children),\r\n  };\r\n});\r\n\r\n// Mock ThemeProviderWrapper (used in root layout)\r\njest.mock('@platform/layouts/common/ThemeProviderWrapper', () => {\r\n  const React = require('react');\r\n  const { ThemeProvider } = require('styled-components/native');\r\n  const lightTheme = require('@theme/light.theme').default;\r\n  return {\r\n    __esModule: true,\r\n    default: ({ children }) => React.createElement(ThemeProvider, { theme: lightTheme }, children),\r\n  };\r\n}, { virtual: true });\r\n\r\n// Mock RootLayoutStyles\r\njest.mock('@platform/layouts/common/RootLayoutStyles', () => {\r\n  const React = require('react');\r\n  const { View, ActivityIndicator } = require('react-native');\r\n  return {\r\n    StyledLoadingContainer: ({ children, testID }) =>\r\n      React.createElement(View, { testID }, children),\r\n    StyledActivityIndicator: (props) => React.createElement(ActivityIndicator, props),\r\n  };\r\n}, { virtual: true });\r\n\r\n// Mock store selectors\r\njest.mock('@store/selectors', () => ({\r\n  selectTheme: jest.fn(() => 'light'),\r\n}), { virtual: true });\r\n\r\n// Mock i18n\r\njest.mock('@i18n', () => {\r\n  const React = require('react');\r\n  return {\r\n    I18nProvider: ({ children }) => React.createElement(React.Fragment, null, children),\r\n    getDeviceLocale: jest.fn(() => 'en'),\r\n  };\r\n}, { virtual: true });\r\n\r\n// Import RootLayout after mocks are set up\r\nimport RootLayout from '@app/_layout';\r\n\r\njest.mock('@logging', () => ({\r\n  logger: {\r\n    error: jest.fn(),\r\n    info: jest.fn(),\r\n    warn: jest.fn(),\r\n    debug: jest.fn(),\r\n  },\r\n}), { virtual: true });\r\n\r\njest.mock('@errors/error.handler', () => ({\r\n  handleError: jest.fn((error) => ({\r\n    code: 'TEST_ERROR',\r\n    message: 'Test error message',\r\n    safeMessage: 'An unexpected error occurred',\r\n    severity: 'error',\r\n  })),\r\n}), { virtual: true });\r\n\r\n// Mock ErrorBoundary to allow testing error handling behavior\r\n// We'll import the real ErrorBoundary but can override if needed\r\njest.mock('@errors', () => {\r\n  const React = require('react');\r\n  const { logger } = require('@logging');\r\n  const { handleError } = require('@errors/error.handler');\r\n  \r\n  // Import real FallbackUI for realistic testing\r\n  const FallbackUI = require('@errors/fallback.ui').default;\r\n  \r\n  class ErrorBoundary extends React.Component {\r\n    constructor(props) {\r\n      super(props);\r\n      this.state = { hasError: false, error: null };\r\n    }\r\n\r\n    static getDerivedStateFromError(error) {\r\n      return { hasError: true, error };\r\n    }\r\n\r\n    componentDidCatch(error, errorInfo) {\r\n      const normalized = handleError(error, { errorInfo });\r\n      logger.error('ErrorBoundary caught error', {\r\n        error: normalized,\r\n        errorInfo,\r\n      });\r\n      this.setState({ error: normalized });\r\n    }\r\n\r\n    render() {\r\n      if (this.state.hasError) {\r\n        return React.createElement(FallbackUI, {\r\n          error: this.state.error,\r\n          onRetry: () => this.setState({ hasError: false, error: null }),\r\n        });\r\n      }\r\n\r\n      return this.props.children;\r\n    }\r\n  }\r\n  \r\n  return {\r\n    ErrorBoundary,\r\n  };\r\n}, { virtual: true });\r\n\r\n// Suppress console.error for error boundary tests\r\nconst originalError = console.error;\r\nbeforeAll(() => {\r\n  console.error = jest.fn();\r\n});\r\n\r\nafterAll(() => {\r\n  console.error = originalError;\r\n});\r\n\r\ndescribe('app/_layout.jsx - ErrorBoundary Integration', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    // Make bootstrap resolve immediately\r\n    mockBootstrapApp.mockResolvedValue(undefined);\r\n    // Default Slot renderer - renders normal content\r\n    mockSlotRenderer = () => React.createElement(Text, null, 'Test Content');\r\n  });\r\n\r\n  test('should render normally without errors', async () => {\r\n    // Per Step 7.2: Test that component renders normally without errors\r\n    // Per app-router.mdc: Root layout uses <Slot /> to render child routes\r\n    const { getByText } = render(<RootLayout />);\r\n\r\n    await waitFor(() => {\r\n      expect(getByText('Test Content')).toBeTruthy();\r\n    }, { timeout: 3000 });\r\n\r\n    // Verify bootstrap was called\r\n    expect(mockBootstrapApp).toHaveBeenCalled();\r\n  });\r\n\r\n  test('should display fallback UI when child component throws error', async () => {\r\n    // Per Step 7.2: Test that fallback UI displays when child component throws error\r\n    // Create a component that throws an error during render\r\n    const ThrowError = () => {\r\n      throw new Error('Test error');\r\n    };\r\n\r\n    // Mock Slot to render error-throwing component\r\n    mockSlotRenderer = () => React.createElement(ThrowError);\r\n\r\n    const { getByText } = render(<RootLayout />);\r\n\r\n    // Wait for bootstrap to complete and ErrorBoundary to catch error\r\n    // Per errors-logging.mdc: ErrorBoundary catches render/runtime errors and displays fallback UI\r\n    await waitFor(() => {\r\n      expect(getByText('Something went wrong')).toBeTruthy();\r\n    }, { timeout: 5000 });\r\n\r\n    // Verify error was logged (per errors-logging.mdc)\r\n    expect(handleError).toHaveBeenCalled();\r\n    expect(logger.error).toHaveBeenCalled();\r\n  });\r\n\r\n  test('should not expose raw error details in fallback UI', async () => {\r\n    // Per Step 7.2: Test that fallback UI does not expose raw error details (per errors-logging.mdc)\r\n    // Create a component that throws an error with sensitive details\r\n    const ThrowSensitiveError = () => {\r\n      const error = new Error('Sensitive error: API_KEY=secret123');\r\n      error.stack = 'Error stack trace with sensitive data';\r\n      throw error;\r\n    };\r\n\r\n    // Mock Slot to render error-throwing component\r\n    mockSlotRenderer = () => React.createElement(ThrowSensitiveError);\r\n\r\n    const { getByText, queryByText } = render(<RootLayout />);\r\n\r\n    // Wait for bootstrap to complete and ErrorBoundary to catch error\r\n    // Fallback UI should be displayed\r\n    await waitFor(() => {\r\n      expect(getByText('Something went wrong')).toBeTruthy();\r\n    }, { timeout: 5000 });\r\n\r\n    // Per errors-logging.mdc: Fallback UI must not expose internal error details\r\n    // Verify raw error details are NOT exposed\r\n    expect(queryByText(/API_KEY/)).toBeNull();\r\n    expect(queryByText(/secret123/)).toBeNull();\r\n    expect(queryByText(/stack trace/)).toBeNull();\r\n    expect(queryByText(/Sensitive error/)).toBeNull();\r\n    \r\n    // Verify only safe message is shown (per errors-logging.mdc: no raw error objects)\r\n    expect(getByText('An unexpected error occurred')).toBeTruthy();\r\n  });\r\n\r\n  test('should handle multiple children without errors', async () => {\r\n    // Test that ErrorBoundary handles normal rendering of multiple components\r\n    mockSlotRenderer = () => React.createElement(\r\n      React.Fragment,\r\n      null,\r\n      React.createElement(Text, null, 'First Child'),\r\n      React.createElement(Text, null, 'Second Child'),\r\n      React.createElement(Text, null, 'Third Child')\r\n    );\r\n\r\n    const { getByText } = render(<RootLayout />);\r\n\r\n    await waitFor(() => {\r\n      expect(getByText('First Child')).toBeTruthy();\r\n      expect(getByText('Second Child')).toBeTruthy();\r\n      expect(getByText('Third Child')).toBeTruthy();\r\n    }, { timeout: 3000 });\r\n  });\r\n\r\n  test('should handle empty state without error', async () => {\r\n    // Test that ErrorBoundary handles empty rendering\r\n    mockSlotRenderer = () => null;\r\n\r\n    expect(() => {\r\n      render(<RootLayout />);\r\n    }).not.toThrow();\r\n\r\n    await waitFor(() => {\r\n      expect(mockBootstrapApp).toHaveBeenCalled();\r\n    }, { timeout: 3000 });\r\n  });\r\n\r\n  test('should handle bootstrap errors gracefully and still render ErrorBoundary', async () => {\r\n    // Per Step 7.2: Test that ErrorBoundary is always rendered\r\n    // Per bootstrap-config.mdc: Fatal errors must block rendering\r\n    // Make bootstrap throw an error\r\n    const bootstrapError = new Error('Bootstrap failed');\r\n    mockBootstrapApp.mockRejectedValue(bootstrapError);\r\n\r\n    const { UNSAFE_root } = render(<RootLayout />);\r\n\r\n    // Wait for bootstrap error to be handled\r\n    await waitFor(() => {\r\n      expect(mockBootstrapApp).toHaveBeenCalled();\r\n      // Per bootstrap-config.mdc: Fatal errors must be logged\r\n      expect(logger.error).toHaveBeenCalledWith('Bootstrap initialization failed', {\r\n        error: bootstrapError.message,\r\n        stack: bootstrapError.stack,\r\n      });\r\n    }, { timeout: 3000 });\r\n\r\n    // Per bootstrap-config.mdc: Fatal errors block rendering\r\n    // ErrorBoundary should still be rendered even when bootstrap fails\r\n    // The component should not crash and ErrorBoundary should be present\r\n    expect(UNSAFE_root).toBeTruthy();\r\n  });\r\n});\r\n\r\n"],"mappings":"AAyBAA,WAAA,GAAKC,IAAI,CAAC,aAAa,EAAE,YAAM;EAC7B,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,IAAAC,QAAA,GAAuBD,OAAO,CAAC,cAAc,CAAC;IAAtCE,IAAI,GAAAD,QAAA,CAAJC,IAAI;IAAEC,IAAI,GAAAF,QAAA,CAAJE,IAAI;EAClB,OAAO;IACLC,IAAI,EAAE,SAANA,IAAIA,CAAA,EAAQ;MACV,IAAMC,MAAM,GAAGC,gBAAgB,CAAC,CAAC;MACjC,OAAOD,MAAM,IAAIN,KAAK,CAACQ,aAAa,CAACL,IAAI,EAAE,IAAI,EAAEH,KAAK,CAACQ,aAAa,CAACJ,IAAI,EAAE,IAAI,EAAE,6BAA6B,CAAC,CAAC;IAClH,CAAC;IACDK,SAAS,EAAE,SAAXA,SAASA,CAAA;MAAA,OAAS;QAChBC,IAAI,EAAEC,IAAI,CAACC,EAAE,CAAC,CAAC;QACfC,OAAO,EAAEF,IAAI,CAACC,EAAE,CAAC,CAAC;QAClBE,IAAI,EAAEH,IAAI,CAACC,EAAE,CAAC;MAChB,CAAC;IAAA;EACH,CAAC;AACH,CAAC,CAAC;AAIFd,WAAA,GAAKC,IAAI,oBAAe;EAAA,OAAO;IAC7BgB,YAAY,EAAE,SAAdA,YAAYA,CAAA;MAAA,OAAeC,gBAAgB,CAAAC,KAAA,SAAAC,SAAQ,CAAC;IAAA;EACtD,CAAC;AAAA,CAAC,EAAE;EAAEC,OAAO,EAAE;AAAK,CAAC,CAAC;AAGtBrB,WAAA,GAAKC,IAAI,gBAAW,YAAM;EACxB,IAAAqB,SAAA,GAA2BnB,OAAO,CAAC,kBAAkB,CAAC;IAA9CoB,cAAc,GAAAD,SAAA,CAAdC,cAAc;EACtB,IAAMC,WAAW,GAAGrB,OAAO,0BAAqB,CAAC,CAACsB,OAAO;EAEzD,IAAMC,KAAK,GAAGH,cAAc,CAAC;IAC3BI,OAAO,EAAEH,WAAW;IACpBI,cAAc,EAAE;MACdC,EAAE,EAAE;QACFC,KAAK,EAAE,OAAO;QACdC,MAAM,EAAE,IAAI;QACZC,SAAS,EAAE;MACb,CAAC;MACDC,OAAO,EAAE;QACPC,QAAQ,EAAE;MACZ;IACF;EACF,CAAC,CAAC;EAEF,IAAMC,aAAa,GAAG;IACpBC,KAAK,EAAEvB,IAAI,CAACC,EAAE,CAAC,CAAC;IAChBuB,KAAK,EAAExB,IAAI,CAACC,EAAE,CAAC,CAAC;IAChBwB,OAAO,EAAEzB,IAAI,CAACC,EAAE,CAAC,CAAC;IAClByB,KAAK,EAAE1B,IAAI,CAACC,EAAE,CAAC;EACjB,CAAC;EACDY,KAAK,CAACc,SAAS,GAAGL,aAAa;EAE/B,OAAOT,KAAK;AACd,CAAC,EAAE;EAAEL,OAAO,EAAE;AAAK,CAAC,CAAC;AAGrBrB,WAAA,GAAKC,IAAI,CAAC,iCAAiC,EAAE,YAAM;EACjD,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,OAAO;IACLsC,WAAW,EAAE,SAAbA,WAAWA,CAAAC,IAAA;MAAA,IAAKC,QAAQ,GAAAD,IAAA,CAARC,QAAQ;MAAA,OAAOzC,KAAK,CAACQ,aAAa,CAACR,KAAK,CAAC0C,QAAQ,EAAE,IAAI,EAAED,QAAQ,CAAC;IAAA;EACpF,CAAC;AACH,CAAC,CAAC;AAGF3C,WAAA,GAAKC,IAAI,uDAAkD,YAAM;EAC/D,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,IAAA0C,SAAA,GAA0B1C,OAAO,CAAC,0BAA0B,CAAC;IAArD2C,aAAa,GAAAD,SAAA,CAAbC,aAAa;EACrB,IAAMC,UAAU,GAAG5C,OAAO,0BAAqB,CAAC,CAACsB,OAAO;EACxD,OAAO;IACLuB,UAAU,EAAE,IAAI;IAChBvB,OAAO,EAAE,SAATA,QAAOA,CAAAwB,KAAA;MAAA,IAAKN,QAAQ,GAAAM,KAAA,CAARN,QAAQ;MAAA,OAAOzC,KAAK,CAACQ,aAAa,CAACoC,aAAa,EAAE;QAAEhB,KAAK,EAAEiB;MAAW,CAAC,EAAEJ,QAAQ,CAAC;IAAA;EAChG,CAAC;AACH,CAAC,EAAE;EAAEtB,OAAO,EAAE;AAAK,CAAC,CAAC;AAGrBrB,WAAA,GAAKC,IAAI,mDAA8C,YAAM;EAC3D,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,IAAA+C,SAAA,GAAoC/C,OAAO,CAAC,cAAc,CAAC;IAAnDE,IAAI,GAAA6C,SAAA,CAAJ7C,IAAI;IAAE8C,iBAAiB,GAAAD,SAAA,CAAjBC,iBAAiB;EAC/B,OAAO;IACLC,sBAAsB,EAAE,SAAxBA,sBAAsBA,CAAAC,KAAA;MAAA,IAAKV,QAAQ,GAAAU,KAAA,CAARV,QAAQ;QAAEW,MAAM,GAAAD,KAAA,CAANC,MAAM;MAAA,OACzCpD,KAAK,CAACQ,aAAa,CAACL,IAAI,EAAE;QAAEiD,MAAM,EAANA;MAAO,CAAC,EAAEX,QAAQ,CAAC;IAAA;IACjDY,uBAAuB,EAAE,SAAzBA,uBAAuBA,CAAGC,KAAK;MAAA,OAAKtD,KAAK,CAACQ,aAAa,CAACyC,iBAAiB,EAAEK,KAAK,CAAC;IAAA;EACnF,CAAC;AACH,CAAC,EAAE;EAAEnC,OAAO,EAAE;AAAK,CAAC,CAAC;AAGrBrB,WAAA,GAAKC,IAAI,0BAAqB;EAAA,OAAO;IACnCwD,WAAW,EAAE5C,IAAI,CAACC,EAAE,CAAC;MAAA,OAAM,OAAO;IAAA;EACpC,CAAC;AAAA,CAAC,EAAE;EAAEO,OAAO,EAAE;AAAK,CAAC,CAAC;AAGtBrB,WAAA,GAAKC,IAAI,eAAU,YAAM;EACvB,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,OAAO;IACLuD,YAAY,EAAE,SAAdA,YAAYA,CAAAC,KAAA;MAAA,IAAKhB,QAAQ,GAAAgB,KAAA,CAARhB,QAAQ;MAAA,OAAOzC,KAAK,CAACQ,aAAa,CAACR,KAAK,CAAC0C,QAAQ,EAAE,IAAI,EAAED,QAAQ,CAAC;IAAA;IACnFiB,eAAe,EAAE/C,IAAI,CAACC,EAAE,CAAC;MAAA,OAAM,IAAI;IAAA;EACrC,CAAC;AACH,CAAC,EAAE;EAAEO,OAAO,EAAE;AAAK,CAAC,CAAC;AAKrBrB,WAAA,GAAKC,IAAI,kBAAa;EAAA,OAAO;IAC3B4D,MAAM,EAAE;MACNC,KAAK,EAAEjD,IAAI,CAACC,EAAE,CAAC,CAAC;MAChBiD,IAAI,EAAElD,IAAI,CAACC,EAAE,CAAC,CAAC;MACfkD,IAAI,EAAEnD,IAAI,CAACC,EAAE,CAAC,CAAC;MACfmD,KAAK,EAAEpD,IAAI,CAACC,EAAE,CAAC;IACjB;EACF,CAAC;AAAA,CAAC,EAAE;EAAEO,OAAO,EAAE;AAAK,CAAC,CAAC;AAEtBrB,WAAA,GAAKC,IAAI,+BAA0B;EAAA,OAAO;IACxCiE,WAAW,EAAErD,IAAI,CAACC,EAAE,CAAC,UAACgD,KAAK;MAAA,OAAM;QAC/BK,IAAI,EAAE,YAAY;QAClBC,OAAO,EAAE,oBAAoB;QAC7BC,WAAW,EAAE,8BAA8B;QAC3CC,QAAQ,EAAE;MACZ,CAAC;IAAA,CAAC;EACJ,CAAC;AAAA,CAAC,EAAE;EAAEjD,OAAO,EAAE;AAAK,CAAC,CAAC;AAItBrB,WAAA,GAAKC,IAAI,iBAAY,YAAM;EACzB,IAAMC,KAAK,GAAGC,OAAO,CAAC,OAAO,CAAC;EAC9B,IAAAoE,SAAA,GAAmBpE,OAAO,gBAAW,CAAC;IAA9B0D,MAAM,GAAAU,SAAA,CAANV,MAAM;EACd,IAAAW,SAAA,GAAwBrE,OAAO,6BAAwB,CAAC;IAAhD+D,WAAW,GAAAM,SAAA,CAAXN,WAAW;EAGnB,IAAMO,UAAU,GAAGtE,OAAO,2BAAsB,CAAC,CAACsB,OAAO;EAAC,IAEpDiD,aAAa,aAAAC,gBAAA;IACjB,SAAAD,cAAYlB,KAAK,EAAE;MAAA,IAAAoB,KAAA;MAAA,IAAAC,gBAAA,CAAApD,OAAA,QAAAiD,aAAA;MACjBE,KAAA,OAAAE,WAAA,CAAArD,OAAA,QAAAiD,aAAA,GAAMlB,KAAK;MACXoB,KAAA,CAAKG,KAAK,GAAG;QAAEC,QAAQ,EAAE,KAAK;QAAElB,KAAK,EAAE;MAAK,CAAC;MAAC,OAAAc,KAAA;IAChD;IAAC,IAAAK,UAAA,CAAAxD,OAAA,EAAAiD,aAAA,EAAAC,gBAAA;IAAA,WAAAO,aAAA,CAAAzD,OAAA,EAAAiD,aAAA;MAAAS,GAAA;MAAAC,KAAA,EAMD,SAAAC,iBAAiBA,CAACvB,KAAK,EAAEwB,SAAS,EAAE;QAClC,IAAMC,UAAU,GAAGrB,WAAW,CAACJ,KAAK,EAAE;UAAEwB,SAAS,EAATA;QAAU,CAAC,CAAC;QACpDzB,MAAM,CAACC,KAAK,CAAC,4BAA4B,EAAE;UACzCA,KAAK,EAAEyB,UAAU;UACjBD,SAAS,EAATA;QACF,CAAC,CAAC;QACF,IAAI,CAACE,QAAQ,CAAC;UAAE1B,KAAK,EAAEyB;QAAW,CAAC,CAAC;MACtC;IAAC;MAAAJ,GAAA;MAAAC,KAAA,EAED,SAAAK,MAAMA,CAAA,EAAG;QAAA,IAAAC,MAAA;QACP,IAAI,IAAI,CAACX,KAAK,CAACC,QAAQ,EAAE;UACvB,OAAO9E,KAAK,CAACQ,aAAa,CAAC+D,UAAU,EAAE;YACrCX,KAAK,EAAE,IAAI,CAACiB,KAAK,CAACjB,KAAK;YACvB6B,OAAO,EAAE,SAATA,OAAOA,CAAA;cAAA,OAAQD,MAAI,CAACF,QAAQ,CAAC;gBAAER,QAAQ,EAAE,KAAK;gBAAElB,KAAK,EAAE;cAAK,CAAC,CAAC;YAAA;UAChE,CAAC,CAAC;QACJ;QAEA,OAAO,IAAI,CAACN,KAAK,CAACb,QAAQ;MAC5B;IAAC;MAAAwC,GAAA;MAAAC,KAAA,EAtBD,SAAOQ,wBAAwBA,CAAC9B,KAAK,EAAE;QACrC,OAAO;UAAEkB,QAAQ,EAAE,IAAI;UAAElB,KAAK,EAALA;QAAM,CAAC;MAClC;IAAC;EAAA,EARyB5D,KAAK,CAAC2F,SAAS;EA+B3C,OAAO;IACLnB,aAAa,EAAbA;EACF,CAAC;AACH,CAAC,EAAE;EAAErD,OAAO,EAAE;AAAK,CAAC,CAAC;AAAC,IAAAyE,sBAAA,GAAA3F,OAAA,iDAAAsB,OAAA;AAAA,IAAAsE,kBAAA,GAAAD,sBAAA,CAAA3F,OAAA;AAAA,IAAA0E,gBAAA,GAAAiB,sBAAA,CAAA3F,OAAA;AAAA,IAAA+E,aAAA,GAAAY,sBAAA,CAAA3F,OAAA;AAAA,IAAA2E,WAAA,GAAAgB,sBAAA,CAAA3F,OAAA;AAAA,IAAA8E,UAAA,GAAAa,sBAAA,CAAA3F,OAAA;AA3KtB,IAAA6F,MAAA,GAAAF,sBAAA,CAAA3F,OAAA;AACA,IAAA8F,YAAA,GAAA9F,OAAA;AACA,IAAA+F,aAAA,GAAA/F,OAAA;AACA,IAAAgG,QAAA,GAAAhG,OAAA;AACA,IAAAiG,MAAA,GAAAjG,OAAA;AAuGA,IAAAkG,OAAA,GAAAP,sBAAA,CAAA3F,OAAA;AAAsC,IAAAmG,WAAA,GAAAnG,OAAA;AAAA,SAAAH,YAAA;EAAA,IAAAuG,SAAA,GAAApG,OAAA;IAAAU,IAAA,GAAA0F,SAAA,CAAA1F,IAAA;EAAAb,WAAA,YAAAA,YAAA;IAAA,OAAAa,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAlGtC,IAAIJ,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA;EAAA,OAAS,IAAI;AAAA;AAkBjC,IAAMS,gBAAgB,GAAGL,IAAI,CAACC,EAAE,CAAC,CAAC;AAmJlC,IAAM0F,aAAa,GAAGC,OAAO,CAAC3C,KAAK;AACnC4C,SAAS,CAAC,YAAM;EACdD,OAAO,CAAC3C,KAAK,GAAGjD,IAAI,CAACC,EAAE,CAAC,CAAC;AAC3B,CAAC,CAAC;AAEF6F,QAAQ,CAAC,YAAM;EACbF,OAAO,CAAC3C,KAAK,GAAG0C,aAAa;AAC/B,CAAC,CAAC;AAEFI,QAAQ,CAAC,6CAA6C,EAAE,YAAM;EAC5DC,UAAU,CAAC,YAAM;IACfhG,IAAI,CAACiG,aAAa,CAAC,CAAC;IAEpB5F,gBAAgB,CAAC6F,iBAAiB,CAACC,SAAS,CAAC;IAE7CvG,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA;MAAA,OAASP,cAAK,CAACQ,aAAa,CAACJ,iBAAI,EAAE,IAAI,EAAE,cAAc,CAAC;IAAA;EAC1E,CAAC,CAAC;EAEF2G,IAAI,CAAC,uCAAuC,MAAAlB,kBAAA,CAAAtE,OAAA,EAAE,aAAY;IAGxD,IAAAyF,OAAA,GAAsB,IAAAzB,oBAAM,EAAC,IAAAa,WAAA,CAAAa,GAAA,EAACd,OAAA,CAAA5E,OAAU,IAAE,CAAC,CAAC;MAApC2F,SAAS,GAAAF,OAAA,CAATE,SAAS;IAEjB,MAAM,IAAAC,qBAAO,EAAC,YAAM;MAClBC,MAAM,CAACF,SAAS,CAAC,cAAc,CAAC,CAAC,CAACG,UAAU,CAAC,CAAC;IAChD,CAAC,EAAE;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;IAGrBF,MAAM,CAACpG,gBAAgB,CAAC,CAACuG,gBAAgB,CAAC,CAAC;EAC7C,CAAC,EAAC;EAEFR,IAAI,CAAC,8DAA8D,MAAAlB,kBAAA,CAAAtE,OAAA,EAAE,aAAY;IAG/E,IAAMiG,UAAU,GAAG,SAAbA,UAAUA,CAAA,EAAS;MACvB,MAAM,IAAIC,KAAK,CAAC,YAAY,CAAC;IAC/B,CAAC;IAGDlH,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA;MAAA,OAASP,cAAK,CAACQ,aAAa,CAACgH,UAAU,CAAC;IAAA;IAExD,IAAAE,QAAA,GAAsB,IAAAnC,oBAAM,EAAC,IAAAa,WAAA,CAAAa,GAAA,EAACd,OAAA,CAAA5E,OAAU,IAAE,CAAC,CAAC;MAApC2F,SAAS,GAAAQ,QAAA,CAATR,SAAS;IAIjB,MAAM,IAAAC,qBAAO,EAAC,YAAM;MAClBC,MAAM,CAACF,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAACG,UAAU,CAAC,CAAC;IACxD,CAAC,EAAE;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;IAGrBF,MAAM,CAACpD,kBAAW,CAAC,CAACuD,gBAAgB,CAAC,CAAC;IACtCH,MAAM,CAACzD,eAAM,CAACC,KAAK,CAAC,CAAC2D,gBAAgB,CAAC,CAAC;EACzC,CAAC,EAAC;EAEFR,IAAI,CAAC,oDAAoD,MAAAlB,kBAAA,CAAAtE,OAAA,EAAE,aAAY;IAGrE,IAAMoG,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAA,EAAS;MAChC,IAAM/D,KAAK,GAAG,IAAI6D,KAAK,CAAC,oCAAoC,CAAC;MAC7D7D,KAAK,CAACgE,KAAK,GAAG,uCAAuC;MACrD,MAAMhE,KAAK;IACb,CAAC;IAGDrD,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA;MAAA,OAASP,cAAK,CAACQ,aAAa,CAACmH,mBAAmB,CAAC;IAAA;IAEjE,IAAAE,QAAA,GAAmC,IAAAtC,oBAAM,EAAC,IAAAa,WAAA,CAAAa,GAAA,EAACd,OAAA,CAAA5E,OAAU,IAAE,CAAC,CAAC;MAAjD2F,SAAS,GAAAW,QAAA,CAATX,SAAS;MAAEY,WAAW,GAAAD,QAAA,CAAXC,WAAW;IAI9B,MAAM,IAAAX,qBAAO,EAAC,YAAM;MAClBC,MAAM,CAACF,SAAS,CAAC,sBAAsB,CAAC,CAAC,CAACG,UAAU,CAAC,CAAC;IACxD,CAAC,EAAE;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;IAIrBF,MAAM,CAACU,WAAW,CAAC,SAAS,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;IACzCX,MAAM,CAACU,WAAW,CAAC,WAAW,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;IAC3CX,MAAM,CAACU,WAAW,CAAC,aAAa,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;IAC7CX,MAAM,CAACU,WAAW,CAAC,iBAAiB,CAAC,CAAC,CAACC,QAAQ,CAAC,CAAC;IAGjDX,MAAM,CAACF,SAAS,CAAC,8BAA8B,CAAC,CAAC,CAACG,UAAU,CAAC,CAAC;EAChE,CAAC,EAAC;EAEFN,IAAI,CAAC,gDAAgD,MAAAlB,kBAAA,CAAAtE,OAAA,EAAE,aAAY;IAEjEhB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA;MAAA,OAASP,cAAK,CAACQ,aAAa,CAC1CR,cAAK,CAAC0C,QAAQ,EACd,IAAI,EACJ1C,cAAK,CAACQ,aAAa,CAACJ,iBAAI,EAAE,IAAI,EAAE,aAAa,CAAC,EAC9CJ,cAAK,CAACQ,aAAa,CAACJ,iBAAI,EAAE,IAAI,EAAE,cAAc,CAAC,EAC/CJ,cAAK,CAACQ,aAAa,CAACJ,iBAAI,EAAE,IAAI,EAAE,aAAa,CAC/C,CAAC;IAAA;IAED,IAAA4H,QAAA,GAAsB,IAAAzC,oBAAM,EAAC,IAAAa,WAAA,CAAAa,GAAA,EAACd,OAAA,CAAA5E,OAAU,IAAE,CAAC,CAAC;MAApC2F,SAAS,GAAAc,QAAA,CAATd,SAAS;IAEjB,MAAM,IAAAC,qBAAO,EAAC,YAAM;MAClBC,MAAM,CAACF,SAAS,CAAC,aAAa,CAAC,CAAC,CAACG,UAAU,CAAC,CAAC;MAC7CD,MAAM,CAACF,SAAS,CAAC,cAAc,CAAC,CAAC,CAACG,UAAU,CAAC,CAAC;MAC9CD,MAAM,CAACF,SAAS,CAAC,aAAa,CAAC,CAAC,CAACG,UAAU,CAAC,CAAC;IAC/C,CAAC,EAAE;MAAEC,OAAO,EAAE;IAAK,CAAC,CAAC;EACvB,CAAC,EAAC;EAEFP,IAAI,CAAC,yCAAyC,MAAAlB,kBAAA,CAAAtE,OAAA,EAAE,aAAY;IAE1DhB,gBAAgB,GAAG,SAAnBA,gBAAgBA,CAAA;MAAA,OAAS,IAAI;IAAA;IAE7B6G,MAAM,CAAC,YAAM;MACX,IAAA7B,oBAAM,EAAC,IAAAa,WAAA,CAAAa,GAAA,EAACd,OAAA,CAAA5E,OAAU,IAAE,CAAC,CAAC;IACxB,CAAC,CAAC,CAAC0G,GAAG,CAACC,OAAO,CAAC,CAAC;IAEhB,MAAM,IAAAf,qBAAO,EAAC,YAAM;MAClBC,MAAM,CAACpG,gBAAgB,CAAC,CAACuG,gBAAgB,CAAC,CAAC;IAC7C,CAAC,EAAE;MAAED,OAAO,EAAE;IAAK,CAAC,CAAC;EACvB,CAAC,EAAC;EAEFP,IAAI,CAAC,0EAA0E,MAAAlB,kBAAA,CAAAtE,OAAA,EAAE,aAAY;IAI3F,IAAM4G,cAAc,GAAG,IAAIV,KAAK,CAAC,kBAAkB,CAAC;IACpDzG,gBAAgB,CAACoH,iBAAiB,CAACD,cAAc,CAAC;IAElD,IAAAE,QAAA,GAAwB,IAAA9C,oBAAM,EAAC,IAAAa,WAAA,CAAAa,GAAA,EAACd,OAAA,CAAA5E,OAAU,IAAE,CAAC,CAAC;MAAtC+G,WAAW,GAAAD,QAAA,CAAXC,WAAW;IAGnB,MAAM,IAAAnB,qBAAO,EAAC,YAAM;MAClBC,MAAM,CAACpG,gBAAgB,CAAC,CAACuG,gBAAgB,CAAC,CAAC;MAE3CH,MAAM,CAACzD,eAAM,CAACC,KAAK,CAAC,CAAC2E,oBAAoB,CAAC,iCAAiC,EAAE;QAC3E3E,KAAK,EAAEuE,cAAc,CAACjE,OAAO;QAC7B0D,KAAK,EAAEO,cAAc,CAACP;MACxB,CAAC,CAAC;IACJ,CAAC,EAAE;MAAEN,OAAO,EAAE;IAAK,CAAC,CAAC;IAKrBF,MAAM,CAACkB,WAAW,CAAC,CAACjB,UAAU,CAAC,CAAC;EAClC,CAAC,EAAC;AACJ,CAAC,CAAC","ignoreList":[]}