e62ed6d62aa6260cb1daa6fa60e3fa59
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _react = require("react");
var _expoRouter = require("expo-router");
var _hooks = require("../../../../hooks");
var resolveErrorMessage = function resolveErrorMessage(t, errorCode) {
  if (!errorCode) return null;
  var key = `errors.codes.${errorCode}`;
  var resolved = t(key);
  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;
};
var useTenantDetailScreen = function useTenantDetailScreen() {
  var _useI18n = (0, _hooks.useI18n)(),
    t = _useI18n.t;
  var router = (0, _expoRouter.useRouter)();
  var _useLocalSearchParams = (0, _expoRouter.useLocalSearchParams)(),
    id = _useLocalSearchParams.id;
  var _useNetwork = (0, _hooks.useNetwork)(),
    isOffline = _useNetwork.isOffline;
  var _useTenant = (0, _hooks.useTenant)(),
    get = _useTenant.get,
    remove = _useTenant.remove,
    data = _useTenant.data,
    isLoading = _useTenant.isLoading,
    errorCode = _useTenant.errorCode,
    reset = _useTenant.reset;
  var tenant = data && typeof data === 'object' && !Array.isArray(data) ? data : null;
  var errorMessage = (0, _react.useMemo)(function () {
    return resolveErrorMessage(t, errorCode);
  }, [t, errorCode]);
  var fetchDetail = (0, _react.useCallback)(function () {
    if (!id) return;
    reset();
    get(id);
  }, [id, get, reset]);
  (0, _react.useEffect)(function () {
    fetchDetail();
  }, [fetchDetail]);
  var handleRetry = (0, _react.useCallback)(function () {
    fetchDetail();
  }, [fetchDetail]);
  var handleBack = (0, _react.useCallback)(function () {
    router.push('/settings/tenants');
  }, [router]);
  var handleEdit = (0, _react.useCallback)(function () {
    if (id) router.push(`/settings/tenants/${id}/edit`);
  }, [id, router]);
  var handleDelete = (0, _react.useCallback)((0, _asyncToGenerator2.default)(function* () {
    if (!id) return;
    try {
      yield remove(id);
      handleBack();
    } catch (_unused) {}
  }), [id, remove, handleBack]);
  return {
    id: id,
    tenant: tenant,
    isLoading: isLoading,
    hasError: Boolean(errorCode),
    errorMessage: errorMessage,
    isOffline: isOffline,
    onRetry: handleRetry,
    onBack: handleBack,
    onEdit: handleEdit,
    onDelete: handleDelete
  };
};
var _default = exports.default = useTenantDetailScreen;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiX2V4cG9Sb3V0ZXIiLCJfaG9va3MiLCJyZXNvbHZlRXJyb3JNZXNzYWdlIiwidCIsImVycm9yQ29kZSIsImtleSIsInJlc29sdmVkIiwidXNlVGVuYW50RGV0YWlsU2NyZWVuIiwiX3VzZUkxOG4iLCJ1c2VJMThuIiwicm91dGVyIiwidXNlUm91dGVyIiwiX3VzZUxvY2FsU2VhcmNoUGFyYW1zIiwidXNlTG9jYWxTZWFyY2hQYXJhbXMiLCJpZCIsIl91c2VOZXR3b3JrIiwidXNlTmV0d29yayIsImlzT2ZmbGluZSIsIl91c2VUZW5hbnQiLCJ1c2VUZW5hbnQiLCJnZXQiLCJyZW1vdmUiLCJkYXRhIiwiaXNMb2FkaW5nIiwicmVzZXQiLCJ0ZW5hbnQiLCJBcnJheSIsImlzQXJyYXkiLCJlcnJvck1lc3NhZ2UiLCJ1c2VNZW1vIiwiZmV0Y2hEZXRhaWwiLCJ1c2VDYWxsYmFjayIsInVzZUVmZmVjdCIsImhhbmRsZVJldHJ5IiwiaGFuZGxlQmFjayIsInB1c2giLCJoYW5kbGVFZGl0IiwiaGFuZGxlRGVsZXRlIiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiZGVmYXVsdCIsIl91bnVzZWQiLCJoYXNFcnJvciIsIkJvb2xlYW4iLCJvblJldHJ5Iiwib25CYWNrIiwib25FZGl0Iiwib25EZWxldGUiLCJfZGVmYXVsdCIsImV4cG9ydHMiXSwic291cmNlcyI6WyJ1c2VUZW5hbnREZXRhaWxTY3JlZW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIHVzZVRlbmFudERldGFpbFNjcmVlbiBIb29rXHJcbiAqIFNoYXJlZCBsb2dpYyBmb3IgVGVuYW50RGV0YWlsU2NyZWVuIGFjcm9zcyBwbGF0Zm9ybXMuXHJcbiAqIEZpbGU6IHVzZVRlbmFudERldGFpbFNjcmVlbi5qc1xyXG4gKi9cclxuaW1wb3J0IHsgdXNlQ2FsbGJhY2ssIHVzZUVmZmVjdCwgdXNlTWVtbyB9IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHsgdXNlUm91dGVyLCB1c2VMb2NhbFNlYXJjaFBhcmFtcyB9IGZyb20gJ2V4cG8tcm91dGVyJztcclxuaW1wb3J0IHsgdXNlSTE4biwgdXNlTmV0d29yaywgdXNlVGVuYW50IH0gZnJvbSAnQGhvb2tzJztcclxuXHJcbmNvbnN0IHJlc29sdmVFcnJvck1lc3NhZ2UgPSAodCwgZXJyb3JDb2RlKSA9PiB7XHJcbiAgaWYgKCFlcnJvckNvZGUpIHJldHVybiBudWxsO1xyXG4gIGNvbnN0IGtleSA9IGBlcnJvcnMuY29kZXMuJHtlcnJvckNvZGV9YDtcclxuICBjb25zdCByZXNvbHZlZCA9IHQoa2V5KTtcclxuICByZXR1cm4gcmVzb2x2ZWQgPT09IGtleSA/IHQoJ2Vycm9ycy5jb2Rlcy5VTktOT1dOX0VSUk9SJykgOiByZXNvbHZlZDtcclxufTtcclxuXHJcbmNvbnN0IHVzZVRlbmFudERldGFpbFNjcmVlbiA9ICgpID0+IHtcclxuICBjb25zdCB7IHQgfSA9IHVzZUkxOG4oKTtcclxuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcclxuICBjb25zdCB7IGlkIH0gPSB1c2VMb2NhbFNlYXJjaFBhcmFtcygpO1xyXG4gIGNvbnN0IHsgaXNPZmZsaW5lIH0gPSB1c2VOZXR3b3JrKCk7XHJcbiAgY29uc3QgeyBnZXQsIHJlbW92ZSwgZGF0YSwgaXNMb2FkaW5nLCBlcnJvckNvZGUsIHJlc2V0IH0gPSB1c2VUZW5hbnQoKTtcclxuXHJcbiAgY29uc3QgdGVuYW50ID0gZGF0YSAmJiB0eXBlb2YgZGF0YSA9PT0gJ29iamVjdCcgJiYgIUFycmF5LmlzQXJyYXkoZGF0YSkgPyBkYXRhIDogbnVsbDtcclxuICBjb25zdCBlcnJvck1lc3NhZ2UgPSB1c2VNZW1vKFxyXG4gICAgKCkgPT4gcmVzb2x2ZUVycm9yTWVzc2FnZSh0LCBlcnJvckNvZGUpLFxyXG4gICAgW3QsIGVycm9yQ29kZV1cclxuICApO1xyXG5cclxuICBjb25zdCBmZXRjaERldGFpbCA9IHVzZUNhbGxiYWNrKCgpID0+IHtcclxuICAgIGlmICghaWQpIHJldHVybjtcclxuICAgIHJlc2V0KCk7XHJcbiAgICBnZXQoaWQpO1xyXG4gIH0sIFtpZCwgZ2V0LCByZXNldF0pO1xyXG5cclxuICB1c2VFZmZlY3QoKCkgPT4ge1xyXG4gICAgZmV0Y2hEZXRhaWwoKTtcclxuICB9LCBbZmV0Y2hEZXRhaWxdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUmV0cnkgPSB1c2VDYWxsYmFjaygoKSA9PiB7XHJcbiAgICBmZXRjaERldGFpbCgpO1xyXG4gIH0sIFtmZXRjaERldGFpbF0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVCYWNrID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgcm91dGVyLnB1c2goJy9zZXR0aW5ncy90ZW5hbnRzJyk7XHJcbiAgfSwgW3JvdXRlcl0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVFZGl0ID0gdXNlQ2FsbGJhY2soKCkgPT4ge1xyXG4gICAgaWYgKGlkKSByb3V0ZXIucHVzaChgL3NldHRpbmdzL3RlbmFudHMvJHtpZH0vZWRpdGApO1xyXG4gIH0sIFtpZCwgcm91dGVyXSk7XHJcblxyXG4gIGNvbnN0IGhhbmRsZURlbGV0ZSA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcclxuICAgIGlmICghaWQpIHJldHVybjtcclxuICAgIHRyeSB7XHJcbiAgICAgIGF3YWl0IHJlbW92ZShpZCk7XHJcbiAgICAgIGhhbmRsZUJhY2soKTtcclxuICAgIH0gY2F0Y2gge1xyXG4gICAgICAvKiBlcnJvciBoYW5kbGVkIGJ5IGhvb2sgKi9cclxuICAgIH1cclxuICB9LCBbaWQsIHJlbW92ZSwgaGFuZGxlQmFja10pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgaWQsXHJcbiAgICB0ZW5hbnQsXHJcbiAgICBpc0xvYWRpbmcsXHJcbiAgICBoYXNFcnJvcjogQm9vbGVhbihlcnJvckNvZGUpLFxyXG4gICAgZXJyb3JNZXNzYWdlLFxyXG4gICAgaXNPZmZsaW5lLFxyXG4gICAgb25SZXRyeTogaGFuZGxlUmV0cnksXHJcbiAgICBvbkJhY2s6IGhhbmRsZUJhY2ssXHJcbiAgICBvbkVkaXQ6IGhhbmRsZUVkaXQsXHJcbiAgICBvbkRlbGV0ZTogaGFuZGxlRGVsZXRlLFxyXG4gIH07XHJcbn07XHJcblxyXG5leHBvcnQgZGVmYXVsdCB1c2VUZW5hbnREZXRhaWxTY3JlZW47XHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBS0EsSUFBQUEsTUFBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsV0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsTUFBQSxHQUFBRixPQUFBO0FBRUEsSUFBTUcsbUJBQW1CLEdBQUcsU0FBdEJBLG1CQUFtQkEsQ0FBSUMsQ0FBQyxFQUFFQyxTQUFTLEVBQUs7RUFDNUMsSUFBSSxDQUFDQSxTQUFTLEVBQUUsT0FBTyxJQUFJO0VBQzNCLElBQU1DLEdBQUcsR0FBRyxnQkFBZ0JELFNBQVMsRUFBRTtFQUN2QyxJQUFNRSxRQUFRLEdBQUdILENBQUMsQ0FBQ0UsR0FBRyxDQUFDO0VBQ3ZCLE9BQU9DLFFBQVEsS0FBS0QsR0FBRyxHQUFHRixDQUFDLENBQUMsNEJBQTRCLENBQUMsR0FBR0csUUFBUTtBQUN0RSxDQUFDO0FBRUQsSUFBTUMscUJBQXFCLEdBQUcsU0FBeEJBLHFCQUFxQkEsQ0FBQSxFQUFTO0VBQ2xDLElBQUFDLFFBQUEsR0FBYyxJQUFBQyxjQUFPLEVBQUMsQ0FBQztJQUFmTixDQUFDLEdBQUFLLFFBQUEsQ0FBREwsQ0FBQztFQUNULElBQU1PLE1BQU0sR0FBRyxJQUFBQyxxQkFBUyxFQUFDLENBQUM7RUFDMUIsSUFBQUMscUJBQUEsR0FBZSxJQUFBQyxnQ0FBb0IsRUFBQyxDQUFDO0lBQTdCQyxFQUFFLEdBQUFGLHFCQUFBLENBQUZFLEVBQUU7RUFDVixJQUFBQyxXQUFBLEdBQXNCLElBQUFDLGlCQUFVLEVBQUMsQ0FBQztJQUExQkMsU0FBUyxHQUFBRixXQUFBLENBQVRFLFNBQVM7RUFDakIsSUFBQUMsVUFBQSxHQUEyRCxJQUFBQyxnQkFBUyxFQUFDLENBQUM7SUFBOURDLEdBQUcsR0FBQUYsVUFBQSxDQUFIRSxHQUFHO0lBQUVD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