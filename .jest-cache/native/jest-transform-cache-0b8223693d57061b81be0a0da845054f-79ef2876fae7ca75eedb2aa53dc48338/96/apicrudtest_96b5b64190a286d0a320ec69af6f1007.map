{"version":3,"names":["_getJestObj","mock","apiClient","jest","fn","_interopRequireDefault","require","default","_asyncToGenerator2","_crud","_client","_require","describe","beforeEach","mockClear","it","expect","buildQueryString","toBe","page","limit","tags","endpoints","LIST","CREATE","GET","id","UPDATE","DELETE","api","createCrudApi","list","get","create","name","update","remove","toHaveBeenCalledWith","url","method","body","toThrow"],"sources":["api.crud.test.js"],"sourcesContent":["/**\r\n * CRUD API Factory Tests\r\n * File: api.crud.test.js\r\n */\r\nimport { buildQueryString, createCrudApi } from '@services/api/crud';\r\nimport { apiClient } from '@services/api/client';\r\n\r\njest.mock('@services/api/client', () => ({\r\n  apiClient: jest.fn(),\r\n}));\r\n\r\ndescribe('crud api helpers', () => {\r\n  beforeEach(() => {\r\n    apiClient.mockClear();\r\n  });\r\n\r\n  it('builds query strings deterministically', () => {\r\n    expect(buildQueryString()).toBe('');\r\n    expect(buildQueryString({})).toBe('');\r\n    expect(buildQueryString({ page: 1, limit: 10 })).toBe('?page=1&limit=10');\r\n    expect(buildQueryString({ tags: ['a', 'b'] })).toBe('?tags=a&tags=b');\r\n  });\r\n\r\n  it('creates CRUD api handlers', async () => {\r\n    const endpoints = {\r\n      LIST: '/items',\r\n      CREATE: '/items',\r\n      GET: (id) => `/items/${id}`,\r\n      UPDATE: (id) => `/items/${id}`,\r\n      DELETE: (id) => `/items/${id}`,\r\n    };\r\n    const api = createCrudApi(endpoints);\r\n    await api.list({ page: 2 });\r\n    await api.get('1');\r\n    await api.create({ name: 'Item' });\r\n    await api.update('1', { name: 'Updated' });\r\n    await api.remove('1');\r\n\r\n    expect(apiClient).toHaveBeenCalledWith({ url: '/items?page=2', method: 'GET' });\r\n    expect(apiClient).toHaveBeenCalledWith({ url: '/items/1', method: 'GET' });\r\n    expect(apiClient).toHaveBeenCalledWith({ url: '/items', method: 'POST', body: { name: 'Item' } });\r\n    expect(apiClient).toHaveBeenCalledWith({\r\n      url: '/items/1',\r\n      method: 'PUT',\r\n      body: { name: 'Updated' },\r\n    });\r\n    expect(apiClient).toHaveBeenCalledWith({ url: '/items/1', method: 'DELETE' });\r\n  });\r\n\r\n  it('throws for missing endpoints', () => {\r\n    expect(() => createCrudApi({})).toThrow('Missing endpoint');\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}