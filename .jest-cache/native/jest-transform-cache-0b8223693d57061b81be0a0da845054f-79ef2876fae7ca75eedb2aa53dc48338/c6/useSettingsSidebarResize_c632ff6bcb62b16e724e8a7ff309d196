e841f991aa1c1e0c5d7053b506d2f88d
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = useSettingsSidebarResize;
var _slicedToArray2 = _interopRequireDefault(require("@babel/runtime/helpers/slicedToArray"));
var _react = require("react");
var STORAGE_KEY = 'hms-settings-sidebar-width';
var DEFAULT_WIDTH = 220;
var MIN_WIDTH = 160;
var MAX_WIDTH = 320;
var clamp = function clamp(v, min, max) {
  return Math.min(Math.max(Number(v), min), max);
};
function useSettingsSidebarResize() {
  var _useState = (0, _react.useState)(function () {
      if (typeof window === 'undefined') return DEFAULT_WIDTH;
      try {
        var stored = window.localStorage.getItem(STORAGE_KEY);
        return stored ? clamp(Number(stored), MIN_WIDTH, MAX_WIDTH) : DEFAULT_WIDTH;
      } catch (_unused) {
        return DEFAULT_WIDTH;
      }
    }),
    _useState2 = (0, _slicedToArray2.default)(_useState, 2),
    width = _useState2[0],
    setWidth = _useState2[1];
  (0, _react.useEffect)(function () {
    try {
      window.localStorage.setItem(STORAGE_KEY, String(width));
    } catch (_unused2) {}
  }, [width]);
  var handleResizeStart = (0, _react.useCallback)(function (e) {
    e.preventDefault();
    e.stopPropagation();
    var startX = e.clientX;
    var startW = width;
    var onMove = function onMove(moveEvent) {
      var delta = moveEvent.clientX - startX;
      setWidth(function (w) {
        return clamp(startW + delta, MIN_WIDTH, MAX_WIDTH);
      });
    };
    var _onUp = function onUp() {
      document.removeEventListener('mousemove', onMove);
      document.removeEventListener('mouseup', _onUp);
    };
    document.addEventListener('mousemove', onMove);
    document.addEventListener('mouseup', _onUp);
  }, [width]);
  var handleResizeKeyDown = (0, _react.useCallback)(function (e) {
    if (e.key === 'ArrowLeft') {
      e.preventDefault();
      setWidth(function (w) {
        return clamp(w - 12, MIN_WIDTH, MAX_WIDTH);
      });
    } else if (e.key === 'ArrowRight') {
      e.preventDefault();
      setWidth(function (w) {
        return clamp(w + 12, MIN_WIDTH, MAX_WIDTH);
      });
    }
  }, []);
  return {
    sidebarWidth: width,
    sidebarMinWidth: MIN_WIDTH,
    sidebarMaxWidth: MAX_WIDTH,
    handleResizeStart: handleResizeStart,
    handleResizeKeyDown: handleResizeKeyDown
  };
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVhY3QiLCJyZXF1aXJlIiwiU1RPUkFHRV9LRVkiLCJERUZBVUxUX1dJRFRIIiwiTUlOX1dJRFRIIiwiTUFYX1dJRFRIIiwiY2xhbXAiLCJ2IiwibWluIiwibWF4IiwiTWF0aCIsIk51bWJlciIsInVzZVNldHRpbmdzU2lkZWJhclJlc2l6ZSIsIl91c2VTdGF0ZSIsInVzZVN0YXRlIiwid2luZG93Iiwic3RvcmVkIiwibG9jYWxTdG9yYWdlIiwiZ2V0SXRlbSIsIl91bnVzZWQiLCJfdXNlU3RhdGUyIiwiX3NsaWNlZFRvQXJyYXkyIiwiZGVmYXVsdCIsIndpZHRoIiwic2V0V2lkdGgiLCJ1c2VFZmZlY3QiLCJzZXRJdGVtIiwiU3RyaW5nIiwiX3VudXNlZDIiLCJoYW5kbGVSZXNpemVTdGFydCIsInVzZUNhbGxiYWNrIiwiZSIsInByZXZlbnREZWZhdWx0Iiwic3RvcFByb3BhZ2F0aW9uIiwic3RhcnRYIiwiY2xpZW50WCIsInN0YXJ0VyIsIm9uTW92ZSIsIm1vdmVFdmVudCIsImRlbHRhIiwidyIsIm9uVXAiLCJkb2N1bWVudCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJhZGRFdmVudExpc3RlbmVyIiwiaGFuZGxlUmVzaXplS2V5RG93biIsImtleSIsInNpZGViYXJXaWR0aCIsInNpZGViYXJNaW5XaWR0aCIsInNpZGViYXJNYXhXaWR0aCJdLCJzb3VyY2VzIjpbInVzZVNldHRpbmdzU2lkZWJhclJlc2l6ZS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogdXNlU2V0dGluZ3NTaWRlYmFyUmVzaXplIEhvb2tcclxuICogV2ViOiByZXNpemFibGUgc2V0dGluZ3Mgc2lkZWJhciB3aWR0aCB3aXRoIGxvY2FsU3RvcmFnZSBwZXJzaXN0ZW5jZS5cclxuICogUGVyIGNvbXBvbmVudC1zdHJ1Y3R1cmUubWRjOiBsb2dpYyBpbiBob29rc1xyXG4gKi9cclxuaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUNhbGxiYWNrLCB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XHJcblxyXG5jb25zdCBTVE9SQUdFX0tFWSA9ICdobXMtc2V0dGluZ3Mtc2lkZWJhci13aWR0aCc7XHJcbmNvbnN0IERFRkFVTFRfV0lEVEggPSAyMjA7XHJcbmNvbnN0IE1JTl9XSURUSCA9IDE2MDtcclxuY29uc3QgTUFYX1dJRFRIID0gMzIwO1xyXG5cclxuY29uc3QgY2xhbXAgPSAodiwgbWluLCBtYXgpID0+IE1hdGgubWluKE1hdGgubWF4KE51bWJlcih2KSwgbWluKSwgbWF4KTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHVzZVNldHRpbmdzU2lkZWJhclJlc2l6ZSgpIHtcclxuICBjb25zdCBbd2lkdGgsIHNldFdpZHRoXSA9IHVzZVN0YXRlKCgpID0+IHtcclxuICAgIGlmICh0eXBlb2Ygd2luZG93ID09PSAndW5kZWZpbmVkJykgcmV0dXJuIERFRkFVTFRfV0lEVEg7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBzdG9yZWQgPSB3aW5kb3cubG9jYWxTdG9yYWdlLmdldEl0ZW0oU1RPUkFHRV9LRVkpO1xyXG4gICAgICByZXR1cm4gc3RvcmVkID8gY2xhbXAoTnVtYmVyKHN0b3JlZCksIE1JTl9XSURUSCwgTUFYX1dJRFRIKSA6IERFRkFVTFRfV0lEVEg7XHJcbiAgICB9IGNhdGNoIHtcclxuICAgICAgcmV0dXJuIERFRkFVTFRfV0lEVEg7XHJcbiAgICB9XHJcbiAgfSk7XHJcblxyXG4gIHVzZUVmZmVjdCgoKSA9PiB7XHJcbiAgICB0cnkge1xyXG4gICAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oU1RPUkFHRV9LRVksIFN0cmluZyh3aWR0aCkpO1xyXG4gICAgfSBjYXRjaCB7XHJcbiAgICAgIC8qIGlnbm9yZSAqL1xyXG4gICAgfVxyXG4gIH0sIFt3aWR0aF0pO1xyXG5cclxuICBjb25zdCBoYW5kbGVSZXNpemVTdGFydCA9IHVzZUNhbGxiYWNrKChlKSA9PiB7XHJcbiAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICBlLnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgY29uc3Qgc3RhcnRYID0gZS5jbGllbnRYO1xyXG4gICAgY29uc3Qgc3RhcnRXID0gd2lkdGg7XHJcbiAgICBjb25zdCBvbk1vdmUgPSAobW92ZUV2ZW50KSA9PiB7XHJcbiAgICAgIGNvbnN0IGRlbHRhID0gbW92ZUV2ZW50LmNsaWVudFggLSBzdGFydFg7XHJcbiAgICAgIHNldFdpZHRoKCh3KSA9PiBjbGFtcChzdGFydFcgKyBkZWx0YSwgTUlOX1dJRFRILCBNQVhfV0lEVEgpKTtcclxuICAgIH07XHJcbiAgICBjb25zdCBvblVwID0gKCkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZW1vdmUnLCBvbk1vdmUpO1xyXG4gICAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgb25VcCk7XHJcbiAgICB9O1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgb25Nb3ZlKTtcclxuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNldXAnLCBvblVwKTtcclxuICB9LCBbd2lkdGhdKTtcclxuXHJcbiAgY29uc3QgaGFuZGxlUmVzaXplS2V5RG93biA9IHVzZUNhbGxiYWNrKChlKSA9PiB7XHJcbiAgICBpZiAoZS5rZXkgPT09ICdBcnJvd0xlZnQnKSB7XHJcbiAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgc2V0V2lkdGgoKHcpID0+IGNsYW1wKHcgLSAxMiwgTUlOX1dJRFRILCBNQVhfV0lEVEgpKTtcclxuICAgIH0gZWxzZSBpZiAoZS5rZXkgPT09ICdBcnJvd1JpZ2h0Jykge1xyXG4gICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIHNldFdpZHRoKCh3KSA9PiBjbGFtcCh3ICsgMTIsIE1JTl9XSURUSCwgTUFYX1dJRFRIKSk7XHJcbiAgICB9XHJcbiAgfSwgW10pO1xyXG5cclxuICByZXR1cm4ge1xyXG4gICAgc2lkZWJhcldpZHRoOiB3aWR0aCxcclxuICAgIHNpZGViYXJNaW5XaWR0aDogTUlOX1dJRFRILFxyXG4gICAgc2lkZWJhck1heFdpZHRoOiBNQVhfV0lEVEgsXHJcbiAgICBoYW5kbGVSZXNpemVTdGFydCxcclxuICAgIGhhbmRsZVJlc2l6ZUtleURvd24sXHJcbiAgfTtcclxufVxyXG4iXSwibWFwcGluZ3MiOiI7Ozs7OztBQUtBLElBQUFBLE1BQUEsR0FBQUMsT0FBQTtBQUVBLElBQU1DLFdBQVcsR0FBRyw0QkFBNEI7QUFDaEQsSUFBTUMsYUFBYSxHQUFHLEdBQUc7QUFDekIsSUFBTUMsU0FBUyxHQUFHLEdBQUc7QUFDckIsSUFBTUMsU0FBUyxHQUFHLEdBQUc7QUFFckIsSUFBTUMsS0FBSyxHQUFHLFNBQVJBLEtBQUtBLENBQUlDLENBQUMsRUFBRUMsR0FBRyxFQUFFQyxHQUFHO0VBQUEsT0FBS0MsSUFBSSxDQUFDRixHQUFHLENBQUNFLElBQUksQ0FBQ0QsR0FBRyxDQUFDRSxNQUFNLENBQUNKLENBQUMsQ0FBQyxFQUFFQyxHQUFHLENBQUMsRUFBRUMsR0FBRyxDQUFDO0FBQUE7QUFFdkQsU0FBU0csd0JBQXdCQSxDQUFBLEVBQUc7RUFDakQsSUFBQUMsU0FBQSxHQUEwQixJQUFBQyxlQUFRLEVBQUMsWUFBTTtNQUN2QyxJQUFJLE9BQU9DLE1BQU0sS0FBSyxXQUFXLEVBQUUsT0FBT1osYUFBYTtNQUN2RCxJQUFJO1FBQ0YsSUFBTWEsTUFBTSxHQUFHRCxNQUFNLENBQUNFLFlBQVksQ0FBQ0MsT0FBTyxDQUFDaEIsV0FBVyxDQUFDO1FBQ3ZELE9BQU9jLE1BQU0sR0FBR1YsS0FBSyxDQUFDSyxNQUFNLENBQUNLLE1BQU0sQ0FBQyxFQUFFWixTQUFTLEVBQUVDLFNBQVMsQ0FBQyxHQUFHRixhQUFhO01BQzdFLENBQUMsQ0FBQyxPQUFBZ0IsT0FBQSxFQUFNO1FBQ04sT0FBT2hCLGFBQWE7TUFDdEI7SUFDRixDQUFDLENBQUM7SUFBQWlCLFVBQUEsT0FBQUMsZUFBQSxDQUFBQyxPQUFBLEVBQUFULFNBQUE7SUFS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