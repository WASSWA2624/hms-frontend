{"version":3,"names":["_getJestObj","mock","useI18n","jest","fn","authenticateBiometric","isBiometricEnrolled","isBiometricSupported","_interopRequireDefault","require","default","_asyncToGenerator2","_require3","React","TestRenderer","_require","_require2","useBiometricAuth","act","renderHook","hook","result","renderer","HookHarness","hookResult","Object","assign","create","createElement","current","unmount","describe","t","key","beforeEach","clearAllMocks","mockReturnValue","it","mockResolvedValue","_renderHook","Promise","resolve","expect","isAvailable","toBe","isChecking","success","_renderHook2","authResult","authenticate","errorMessage"],"sources":["useBiometricAuth.test.js"],"sourcesContent":["/**\r\n * useBiometricAuth Hook Tests\r\n * File: useBiometricAuth.test.js\r\n */\r\nconst React = require('react');\r\nconst TestRenderer = require('react-test-renderer');\r\nconst { useI18n } = require('@hooks');\r\nconst {\r\n  authenticateBiometric,\r\n  isBiometricEnrolled,\r\n  isBiometricSupported,\r\n} = require('@security');\r\n\r\nconst useBiometricAuth = require('@hooks/useBiometricAuth').default;\r\n\r\njest.mock('@hooks', () => ({\r\n  useI18n: jest.fn(),\r\n}));\r\n\r\njest.mock('@security', () => ({\r\n  authenticateBiometric: jest.fn(),\r\n  isBiometricEnrolled: jest.fn(),\r\n  isBiometricSupported: jest.fn(),\r\n}));\r\n\r\nconst act = TestRenderer.act;\r\nconst renderHook = (hook) => {\r\n  const result = {};\r\n  let renderer;\r\n\r\n  const HookHarness = () => {\r\n    const hookResult = hook();\r\n    Object.assign(result, hookResult);\r\n    return null;\r\n  };\r\n\r\n  act(() => {\r\n    renderer = TestRenderer.create(React.createElement(HookHarness));\r\n  });\r\n\r\n  return {\r\n    result: { current: result },\r\n    unmount: () => {\r\n      act(() => {\r\n        renderer.unmount();\r\n      });\r\n    },\r\n  };\r\n};\r\n\r\ndescribe('useBiometricAuth Hook', () => {\r\n  const t = jest.fn((key) => key);\r\n\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n    useI18n.mockReturnValue({ t });\r\n  });\r\n\r\n  it('exposes availability after checks', async () => {\r\n    isBiometricSupported.mockResolvedValue(true);\r\n    isBiometricEnrolled.mockResolvedValue(true);\r\n\r\n    const { result } = renderHook(() => useBiometricAuth());\r\n    await act(async () => {\r\n      await Promise.resolve();\r\n    });\r\n\r\n    expect(result.current.isAvailable).toBe(true);\r\n    expect(result.current.isChecking).toBe(false);\r\n  });\r\n\r\n  it('returns error message on failed authentication', async () => {\r\n    isBiometricSupported.mockResolvedValue(true);\r\n    isBiometricEnrolled.mockResolvedValue(true);\r\n    authenticateBiometric.mockResolvedValue({ success: false });\r\n\r\n    const { result } = renderHook(() => useBiometricAuth());\r\n    await act(async () => {\r\n      await Promise.resolve();\r\n    });\r\n\r\n    let authResult;\r\n    await act(async () => {\r\n      authResult = await result.current.authenticate();\r\n    });\r\n\r\n    expect(authResult).toBe(false);\r\n    expect(result.current.errorMessage).toBe('auth.login.biometric.error');\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}