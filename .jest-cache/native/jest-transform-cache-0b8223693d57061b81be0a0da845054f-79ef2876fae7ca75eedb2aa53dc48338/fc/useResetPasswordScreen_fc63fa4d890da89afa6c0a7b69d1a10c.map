{"version":3,"names":["useCallback","useMemo","useState","useRouter","useAuth","useI18n","useNetwork","cov_2n631kjllz","s","resolveErrorMessage","t","errorCode","f","b","key","resolved","useResetPasswordScreen","_ref","router","_ref2","isOffline","_ref3","resetPassword","clearError","isLoading","_ref4","_ref5","_slicedToArray","token","setToken","_ref6","_ref7","password","setPassword","_ref8","_ref9","confirmPassword","setConfirmPassword","_ref0","_ref1","isSubmitted","setIsSubmitted","errorMessage","passwordMismatch","Boolean","canSubmit","handleSubmit","_asyncToGenerator","result","trim","new_password","confirm_password","succeeded","error","handleChangeToken","value","handleChangePassword","handleChangeConfirmPassword","handleGoToLogin","push"],"sources":["useResetPasswordScreen.js"],"sourcesContent":["/**\r\n * useResetPasswordScreen Hook\r\n * Shared behavior/logic for ResetPasswordScreen across all platforms.\r\n * File: useResetPasswordScreen.js\r\n */\r\nimport { useCallback, useMemo, useState } from 'react';\r\nimport { useRouter } from 'expo-router';\r\nimport { useAuth, useI18n, useNetwork } from '@hooks';\r\n\r\nconst resolveErrorMessage = (t, errorCode) => {\r\n  if (!errorCode) return null;\r\n  const key = `errors.codes.${errorCode}`;\r\n  const resolved = t(key);\r\n  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;\r\n};\r\n\r\nconst useResetPasswordScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { isOffline } = useNetwork();\r\n  const { resetPassword, clearError, isLoading, errorCode } = useAuth();\r\n  const [token, setToken] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [confirmPassword, setConfirmPassword] = useState('');\r\n  const [isSubmitted, setIsSubmitted] = useState(false);\r\n\r\n  const errorMessage = useMemo(\r\n    () => resolveErrorMessage(t, errorCode),\r\n    [errorCode, t]\r\n  );\r\n\r\n  const passwordMismatch = useMemo(\r\n    () => Boolean(confirmPassword) && password !== confirmPassword,\r\n    [confirmPassword, password]\r\n  );\r\n\r\n  const canSubmit = useMemo(\r\n    () => Boolean(token && password && confirmPassword) && !passwordMismatch && !isLoading && !isOffline,\r\n    [confirmPassword, isLoading, isOffline, password, passwordMismatch, token]\r\n  );\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    if (!canSubmit) return false;\r\n    clearError();\r\n    const result = await resetPassword({\r\n      token: token.trim(),\r\n      new_password: password,\r\n      confirm_password: confirmPassword,\r\n    });\r\n    const succeeded = !result?.error;\r\n    if (succeeded) {\r\n      setIsSubmitted(true);\r\n    }\r\n    return succeeded;\r\n  }, [canSubmit, clearError, confirmPassword, password, resetPassword, token]);\r\n\r\n  const handleChangeToken = useCallback((value) => {\r\n    setToken(value);\r\n    setIsSubmitted(false);\r\n  }, []);\r\n\r\n  const handleChangePassword = useCallback((value) => {\r\n    setPassword(value);\r\n    setIsSubmitted(false);\r\n  }, []);\r\n\r\n  const handleChangeConfirmPassword = useCallback((value) => {\r\n    setConfirmPassword(value);\r\n    setIsSubmitted(false);\r\n  }, []);\r\n\r\n  const handleGoToLogin = useCallback(() => {\r\n    router.push('/login');\r\n  }, [router]);\r\n\r\n  return {\r\n    token,\r\n    password,\r\n    confirmPassword,\r\n    isSubmitted,\r\n    errorMessage,\r\n    isLoading,\r\n    isOffline,\r\n    passwordMismatch,\r\n    canSubmit,\r\n    handleSubmit,\r\n    handleChangeToken,\r\n    handleChangePassword,\r\n    handleChangeConfirmPassword,\r\n    handleGoToLogin,\r\n  };\r\n};\r\n\r\nexport default useResetPasswordScreen;\r\n\r\n"],"mappings":"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","ignoreList":[]}