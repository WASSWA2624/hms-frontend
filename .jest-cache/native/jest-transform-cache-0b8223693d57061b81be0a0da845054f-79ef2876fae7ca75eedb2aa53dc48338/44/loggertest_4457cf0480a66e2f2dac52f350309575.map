{"version":3,"names":["_logger","require","_levels","describe","originalConsole","consoleLogs","beforeEach","global","console","debug","jest","fn","_len","arguments","length","args","Array","_key","push","level","info","_len2","_key2","warn","_len3","_key3","error","_len4","_key4","log","_len5","_key5","afterEach","test","expect","logger","toBe","fatal","data","toHaveBeenCalled","call","find","toBeDefined","logEntry","JSON","parse","toHaveProperty","timestamp","toBeTruthy","message","key","originalEnv","process","env","NODE_ENV","resetModules","_require","prodLogger","not"],"sources":["logger.test.js"],"sourcesContent":["/**\r\n * Logger Implementation Tests\r\n * File: logger.test.js\r\n */\r\nimport { logger } from '@logging/logger';\r\nimport { DEBUG, INFO, WARN, ERROR, FATAL } from '@logging/levels';\r\n\r\ndescribe('logging/logger.js', () => {\r\n  let originalConsole;\r\n  let consoleLogs;\r\n\r\n  beforeEach(() => {\r\n    consoleLogs = [];\r\n    originalConsole = global.console;\r\n    global.console = {\r\n      debug: jest.fn((...args) => consoleLogs.push({ level: 'debug', args })),\r\n      info: jest.fn((...args) => consoleLogs.push({ level: 'info', args })),\r\n      warn: jest.fn((...args) => consoleLogs.push({ level: 'warn', args })),\r\n      error: jest.fn((...args) => consoleLogs.push({ level: 'error', args })),\r\n      log: jest.fn((...args) => consoleLogs.push({ level: 'log', args })),\r\n    };\r\n  });\r\n\r\n  afterEach(() => {\r\n    global.console = originalConsole;\r\n  });\r\n\r\n  test('should have all logger methods', () => {\r\n    expect(typeof logger.debug).toBe('function');\r\n    expect(typeof logger.info).toBe('function');\r\n    expect(typeof logger.warn).toBe('function');\r\n    expect(typeof logger.error).toBe('function');\r\n    expect(typeof logger.fatal).toBe('function');\r\n  });\r\n\r\n  test('should log debug messages', () => {\r\n    logger.debug('Test debug message', { data: 'test' });\r\n    expect(global.console.debug).toHaveBeenCalled();\r\n  });\r\n\r\n  test('should log info messages', () => {\r\n    logger.info('Test info message', { data: 'test' });\r\n    expect(global.console.info).toHaveBeenCalled();\r\n  });\r\n\r\n  test('should log warn messages', () => {\r\n    logger.warn('Test warn message', { data: 'test' });\r\n    expect(global.console.warn).toHaveBeenCalled();\r\n  });\r\n\r\n  test('should log error messages', () => {\r\n    logger.error('Test error message', { data: 'test' });\r\n    expect(global.console.error).toHaveBeenCalled();\r\n  });\r\n\r\n  test('should log fatal messages as error', () => {\r\n    logger.fatal('Test fatal message', { data: 'test' });\r\n    expect(global.console.error).toHaveBeenCalled();\r\n  });\r\n\r\n  test('should include timestamp in log entry', () => {\r\n    logger.info('Test message');\r\n    const call = consoleLogs.find((log) => log.level === 'info');\r\n    expect(call).toBeDefined();\r\n    const logEntry = JSON.parse(call.args[0]);\r\n    expect(logEntry).toHaveProperty('timestamp');\r\n    expect(logEntry.timestamp).toBeTruthy();\r\n  });\r\n\r\n  test('should include level in log entry', () => {\r\n    logger.info('Test message');\r\n    const call = consoleLogs.find((log) => log.level === 'info');\r\n    const logEntry = JSON.parse(call.args[0]);\r\n    expect(logEntry.level).toBe('info');\r\n  });\r\n\r\n  test('should include message in log entry', () => {\r\n    logger.info('Test message');\r\n    const call = consoleLogs.find((log) => log.level === 'info');\r\n    const logEntry = JSON.parse(call.args[0]);\r\n    expect(logEntry.message).toBe('Test message');\r\n  });\r\n\r\n  test('should include data in log entry', () => {\r\n    logger.info('Test message', { key: 'value' });\r\n    const call = consoleLogs.find((log) => log.level === 'info');\r\n    const logEntry = JSON.parse(call.args[0]);\r\n    expect(logEntry.key).toBe('value');\r\n  });\r\n\r\n  test('should filter DEBUG logs in production', () => {\r\n    const originalEnv = process.env.NODE_ENV;\r\n    process.env.NODE_ENV = 'production';\r\n    jest.resetModules();\r\n\r\n    // Re-import logger with production env\r\n    const { logger: prodLogger } = require('@logging/logger');\r\n    prodLogger.debug('Test debug message');\r\n    expect(global.console.debug).not.toHaveBeenCalled();\r\n\r\n    process.env.NODE_ENV = originalEnv;\r\n    jest.resetModules();\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}