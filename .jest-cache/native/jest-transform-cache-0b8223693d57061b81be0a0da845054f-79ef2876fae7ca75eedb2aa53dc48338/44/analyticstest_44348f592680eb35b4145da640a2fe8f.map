{"version":3,"names":["_getJestObj","mock","featureFlags","ANALYTICS_ENABLED","logger","debug","jest","fn","_interopRequireDefault","require","default","_asyncToGenerator2","_require3","_require","trackEvent","trackScreen","describe","beforeEach","clearAllMocks","it","expect","key","not","toThrow","Promise","resolve","setTimeout","resetModules","doMock","_require2","trackEventDisabled","userId"],"sources":["analytics.test.js"],"sourcesContent":["/**\r\n * Analytics Service Tests\r\n * File: analytics.test.js\r\n */\r\n// Mock config (featureFlags is namespace from @config)\r\njest.mock('@config', () => ({\r\n  featureFlags: {\r\n    ANALYTICS_ENABLED: true,\r\n  },\r\n}));\r\n\r\njest.mock('@logging', () => ({\r\n  logger: {\r\n    debug: jest.fn(),\r\n  },\r\n}));\r\n\r\nconst { trackEvent, trackScreen } = require('@services/analytics');\r\n\r\ndescribe('Analytics Service', () => {\r\n  beforeEach(() => {\r\n    jest.clearAllMocks();\r\n  });\r\n\r\n  describe('trackEvent', () => {\r\n    it('should not throw when analytics is enabled', async () => {\r\n      expect(() => trackEvent('test_event', { key: 'value' })).not.toThrow();\r\n      await new Promise((resolve) => setTimeout(resolve, 0));\r\n    });\r\n\r\n    it('should no-op when analytics is disabled', async () => {\r\n      jest.resetModules();\r\n      jest.doMock('@config', () => ({\r\n        featureFlags: {\r\n          ANALYTICS_ENABLED: false,\r\n        },\r\n      }));\r\n\r\n      const { trackEvent: trackEventDisabled } = require('@services/analytics');\r\n      trackEventDisabled('test_event', { key: 'value' });\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 0));\r\n    });\r\n\r\n    it('should handle events without properties', async () => {\r\n      expect(() => trackEvent('simple_event')).not.toThrow();\r\n      await new Promise((resolve) => setTimeout(resolve, 0));\r\n    });\r\n\r\n    it('should silently fail on errors', async () => {\r\n      // Should not throw\r\n      expect(() => {\r\n        trackEvent('test_event');\r\n      }).not.toThrow();\r\n\r\n      await new Promise((resolve) => setTimeout(resolve, 0));\r\n    });\r\n  });\r\n\r\n  describe('trackScreen', () => {\r\n    it('should track screen view event', async () => {\r\n      expect(() => trackScreen('HomeScreen', { userId: '123' })).not.toThrow();\r\n      await new Promise((resolve) => setTimeout(resolve, 0));\r\n    });\r\n\r\n    it('should track screen view without additional properties', async () => {\r\n      expect(() => trackScreen('ProfileScreen')).not.toThrow();\r\n      await new Promise((resolve) => setTimeout(resolve, 0));\r\n    });\r\n  });\r\n});\r\n\r\n"],"mappings":"AAKAA,WAAA,GAAKC,IAAI,iBAAY;EAAA,OAAO;IAC1BC,YAAY,EAAE;MACZC,iBAAiB,EAAE;IACrB;EACF,CAAC;AAAA,CAAC,CAAC;AAEHH,WAAA,GAAKC,IAAI,kBAAa;EAAA,OAAO;IAC3BG,MAAM,EAAE;MACNC,KAAK,EAAEC,IAAI,CAACC,EAAE,CAAC;IACjB;EACF,CAAC;AAAA,CAAC,CAAC;AAAC,IAAAC,sBAAA,GAAAC,OAAA,iDAAAC,OAAA;AAAA,IAAAC,kBAAA,GAAAH,sBAAA,CAAAC,OAAA;AAAA,SAAAT,YAAA;EAAA,IAAAY,SAAA,GAAAH,OAAA;IAAAH,IAAA,GAAAM,SAAA,CAAAN,IAAA;EAAAN,WAAA,YAAAA,YAAA;IAAA,OAAAM,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAEJ,IAAAO,QAAA,GAAoCJ,OAAO,2BAAsB,CAAC;EAA1DK,UAAU,GAAAD,QAAA,CAAVC,UAAU;EAAEC,WAAW,GAAAF,QAAA,CAAXE,WAAW;AAE/BC,QAAQ,CAAC,mBAAmB,EAAE,YAAM;EAClCC,UAAU,CAAC,YAAM;IACfX,IAAI,CAACY,aAAa,CAAC,CAAC;EACtB,CAAC,CAAC;EAEFF,QAAQ,CAAC,YAAY,EAAE,YAAM;IAC3BG,EAAE,CAAC,4CAA4C,MAAAR,kBAAA,CAAAD,OAAA,EAAE,aAAY;MAC3DU,MAAM,CAAC;QAAA,OAAMN,UAAU,CAAC,YAAY,EAAE;UAAEO,GAAG,EAAE;QAAQ,CAAC,CAAC;MAAA,EAAC,CAACC,GAAG,CAACC,OAAO,CAAC,CAAC;MACtE,MAAM,IAAIC,OAAO,CAAC,UAACC,OAAO;QAAA,OAAKC,UAAU,CAACD,OAAO,EAAE,CAAC,CAAC;MAAA,EAAC;IACxD,CAAC,EAAC;IAEFN,EAAE,CAAC,yCAAyC,MAAAR,kBAAA,CAAAD,OAAA,EAAE,aAAY;MACxDJ,IAAI,CAACqB,YAAY,CAAC,CAAC;MACnBrB,IAAI,CAACsB,MAAM,iBAAY;QAAA,OAAO;UAC5B1B,YAAY,EAAE;YACZC,iBAAiB,EAAE;UACrB;QACF,CAAC;MAAA,CAAC,CAAC;MAEH,IAAA0B,SAAA,GAA2CpB,OAAO,2BAAsB,CAAC;QAArDqB,kBAAkB,GAAAD,SAAA,CAA9Bf,UAAU;MAClBgB,kBAAkB,CAAC,YAAY,EAAE;QAAET,GAAG,EAAE;MAAQ,CAAC,CAAC;MAElD,MAAM,IAAIG,OAAO,CAAC,UAACC,OAAO;QAAA,OAAKC,UAAU,CAACD,OAAO,EAAE,CAAC,CAAC;MAAA,EAAC;IACxD,CAAC,EAAC;IAEFN,EAAE,CAAC,yCAAyC,MAAAR,kBAAA,CAAAD,OAAA,EAAE,aAAY;MACxDU,MAAM,CAAC;QAAA,OAAMN,UAAU,CAAC,cAAc,CAAC;MAAA,EAAC,CAACQ,GAAG,CAACC,OAAO,CAAC,CAAC;MACtD,MAAM,IAAIC,OAAO,CAAC,UAACC,OAAO;QAAA,OAAKC,UAAU,CAACD,OAAO,EAAE,CAAC,CAAC;MAAA,EAAC;IACxD,CAAC,EAAC;IAEFN,EAAE,CAAC,gCAAgC,MAAAR,kBAAA,CAAAD,OAAA,EAAE,aAAY;MAE/CU,MAAM,CAAC,YAAM;QACXN,UAAU,CAAC,YAAY,CAAC;MAC1B,CAAC,CAAC,CAACQ,GAAG,CAACC,OAAO,CAAC,CAAC;MAEhB,MAAM,IAAIC,OAAO,CAAC,UAACC,OAAO;QAAA,OAAKC,UAAU,CAACD,OAAO,EAAE,CAAC,CAAC;MAAA,EAAC;IACxD,CAAC,EAAC;EACJ,CAAC,CAAC;EAEFT,QAAQ,CAAC,aAAa,EAAE,YAAM;IAC5BG,EAAE,CAAC,gCAAgC,MAAAR,kBAAA,CAAAD,OAAA,EAAE,aAAY;MAC/CU,MAAM,CAAC;QAAA,OAAML,WAAW,CAAC,YAAY,EAAE;UAAEgB,MAAM,EAAE;QAAM,CAAC,CAAC;MAAA,EAAC,CAACT,GAAG,CAACC,OAAO,CAAC,CAAC;MACxE,MAAM,IAAIC,OAAO,CAAC,UAACC,OAAO;QAAA,OAAKC,UAAU,CAACD,OAAO,EAAE,CAAC,CAAC;MAAA,EAAC;IACxD,CAAC,EAAC;IAEFN,EAAE,CAAC,wDAAwD,MAAAR,kBAAA,CAAAD,OAAA,EAAE,aAAY;MACvEU,MAAM,CAAC;QAAA,OAAML,WAAW,CAAC,eAAe,CAAC;MAAA,EAAC,CAACO,GAAG,CAACC,OAAO,CAAC,CAAC;MACxD,MAAM,IAAIC,OAAO,CAAC,UAACC,OAAO;QAAA,OAAKC,UAAU,CAACD,OAAO,EAAE,CAAC,CAAC;MAAA,EAAC;IACxD,CAAC,EAAC;EACJ,CAAC,CAAC;AACJ,CAAC,CAAC","ignoreList":[]}