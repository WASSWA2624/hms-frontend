{"version":3,"names":["useCallback","useEffect","useMemo","useState","useRouter","useLocalSearchParams","useI18n","useFacility","useTenant","FACILITY_TYPES","cov_1hb43cpo0x","s","useFacilityFormScreen","f","_ref","t","router","_ref2","id","_ref3","get","create","update","data","isLoading","errorCode","reset","_ref4","listTenants","list","tenantData","tenantListLoading","isEdit","Boolean","_ref5","_ref6","_slicedToArray","name","setName","_ref7","_ref8","facilityType","setFacilityType","_ref9","_ref0","isActive","setIsActive","_ref1","_ref10","tenantId","setTenantId","facility","b","Array","isArray","tenantItems","_ref11","items","tenantOptions","map","tenant","_ref12","_ref13","_ref14","value","label","slug","page","limit","_ref15","_ref16","_ref17","facility_type","is_active","handleSubmit","_asyncToGenerator","trim","undefined","tenant_id","String","replace","_unused","handleCancel","push","handleGoToTenants","typeOptions","_ref19","labelKey","hasError","onSubmit","onCancel","onGoToTenants","testID"],"sources":["useFacilityFormScreen.js"],"sourcesContent":["/**\r\n * useFacilityFormScreen Hook\r\n * Shared logic for FacilityFormScreen (create/edit).\r\n * File: useFacilityFormScreen.js\r\n */\r\nimport { useCallback, useEffect, useMemo, useState } from 'react';\r\nimport { useRouter, useLocalSearchParams } from 'expo-router';\r\nimport { useI18n, useFacility, useTenant } from '@hooks';\r\nimport { FACILITY_TYPES } from './types';\r\n\r\nconst useFacilityFormScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { id } = useLocalSearchParams();\r\n  const { get, create, update, data, isLoading, errorCode, reset } = useFacility();\r\n  const { list: listTenants, data: tenantData, isLoading: tenantListLoading } = useTenant();\r\n\r\n  const isEdit = Boolean(id);\r\n  const [name, setName] = useState('');\r\n  const [facilityType, setFacilityType] = useState('');\r\n  const [isActive, setIsActive] = useState(true);\r\n  const [tenantId, setTenantId] = useState('');\r\n\r\n  const facility = data && typeof data === 'object' && !Array.isArray(data) ? data : null;\r\n\r\n  const tenantItems = useMemo(\r\n    () => (Array.isArray(tenantData) ? tenantData : (tenantData?.items ?? [])),\r\n    [tenantData]\r\n  );\r\n  const tenantOptions = useMemo(\r\n    () =>\r\n      tenantItems.map((tenant) => ({\r\n        value: tenant.id,\r\n        label: tenant.name ?? tenant.slug ?? tenant.id ?? '',\r\n      })),\r\n    [tenantItems]\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (isEdit && id) {\r\n      reset();\r\n      get(id);\r\n    }\r\n  }, [isEdit, id, get, reset]);\r\n\r\n  useEffect(() => {\r\n    if (!isEdit) {\r\n      listTenants({ page: 1, limit: 200 });\r\n    }\r\n  }, [isEdit, listTenants]);\r\n\r\n  useEffect(() => {\r\n    if (facility) {\r\n      setName(facility.name ?? '');\r\n      setFacilityType(facility.facility_type ?? '');\r\n      setIsActive(facility.is_active ?? true);\r\n    }\r\n  }, [facility]);\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    try {\r\n      if (isEdit && id) {\r\n        await update(id, { name: name.trim(), facility_type: facilityType || undefined, is_active: isActive });\r\n      } else {\r\n        await create({\r\n          tenant_id: String(tenantId).trim(),\r\n          name: name.trim(),\r\n          facility_type: facilityType,\r\n          is_active: isActive,\r\n        });\r\n      }\r\n      router.replace('/settings/facilities');\r\n    } catch {\r\n      /* error from hook */\r\n    }\r\n  }, [isEdit, id, name, facilityType, isActive, tenantId, create, update, router]);\r\n\r\n  const handleCancel = useCallback(() => {\r\n    router.push('/settings/facilities');\r\n  }, [router]);\r\n\r\n  const handleGoToTenants = useCallback(() => {\r\n    router.push('/settings/tenants');\r\n  }, [router]);\r\n\r\n  const typeOptions = FACILITY_TYPES.map(({ value, labelKey }) => ({\r\n    value,\r\n    label: t(labelKey),\r\n  }));\r\n\r\n  return {\r\n    isEdit,\r\n    name,\r\n    setName,\r\n    facilityType,\r\n    setFacilityType,\r\n    isActive,\r\n    setIsActive,\r\n    tenantId,\r\n    setTenantId,\r\n    tenantOptions,\r\n    tenantListLoading,\r\n    isLoading,\r\n    hasError: Boolean(errorCode),\r\n    facility,\r\n    onSubmit: handleSubmit,\r\n    onCancel: handleCancel,\r\n    onGoToTenants: handleGoToTenants,\r\n    typeOptions,\r\n    testID: 'facility-form-screen',\r\n  };\r\n};\r\n\r\nexport default useFacilityFormScreen;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;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","ignoreList":[]}