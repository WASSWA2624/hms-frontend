{"version":3,"names":["_react","require","_expoRouter","_hooks","resolveErrorMessage","t","errorCode","loadErrorKey","key","resolved","useUserSessionListScreen","_useI18n","useI18n","router","useRouter","_useNetwork","useNetwork","isOffline","_useUserSession","useUserSession","list","revoke","data","isLoading","reset","items","useMemo","_data$items","Array","isArray","errorMessage","fetchList","useCallback","page","limit","useEffect","handleRetry","handleSessionPress","id","push","handleRevoke","_ref","_asyncToGenerator2","default","e","stopPropagation","_unused","_x","_x2","apply","arguments","hasError","Boolean","onRetry","onSessionPress","onRevoke","_default","exports"],"sources":["useUserSessionListScreen.js"],"sourcesContent":["/**\r\n * useUserSessionListScreen Hook\r\n * Shared logic for UserSessionListScreen across platforms.\r\n * File: useUserSessionListScreen.js\r\n */\r\nimport { useCallback, useEffect, useMemo } from 'react';\r\nimport { useRouter } from 'expo-router';\r\nimport { useI18n, useNetwork, useUserSession } from '@hooks';\r\n\r\nconst resolveErrorMessage = (t, errorCode, loadErrorKey) => {\r\n  if (!errorCode) return null;\r\n  if (errorCode === 'UNKNOWN_ERROR' || errorCode === 'NETWORK_ERROR') {\r\n    return t(loadErrorKey);\r\n  }\r\n  const key = `errors.codes.${errorCode}`;\r\n  const resolved = t(key);\r\n  return resolved === key ? t(loadErrorKey) : resolved;\r\n};\r\n\r\nconst useUserSessionListScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { isOffline } = useNetwork();\r\n  const {\r\n    list,\r\n    revoke,\r\n    data,\r\n    isLoading,\r\n    errorCode,\r\n    reset,\r\n  } = useUserSession();\r\n\r\n  const items = useMemo(\r\n    () => (Array.isArray(data) ? data : (data?.items ?? [])),\r\n    [data]\r\n  );\r\n  const errorMessage = useMemo(\r\n    () => resolveErrorMessage(t, errorCode, 'userSession.list.loadError'),\r\n    [t, errorCode]\r\n  );\r\n\r\n  const fetchList = useCallback(() => {\r\n    reset();\r\n    list({ page: 1, limit: 20 });\r\n  }, [list, reset]);\r\n\r\n  useEffect(() => {\r\n    fetchList();\r\n  }, [fetchList]);\r\n\r\n  const handleRetry = useCallback(() => {\r\n    fetchList();\r\n  }, [fetchList]);\r\n\r\n  const handleSessionPress = useCallback(\r\n    (id) => {\r\n      router.push(`/settings/user-sessions/${id}`);\r\n    },\r\n    [router]\r\n  );\r\n\r\n  const handleRevoke = useCallback(\r\n    async (id, e) => {\r\n      if (e?.stopPropagation) e.stopPropagation();\r\n      try {\r\n        await revoke(id);\r\n        fetchList();\r\n      } catch {\r\n        /* error handled by hook */\r\n      }\r\n    },\r\n    [revoke, fetchList]\r\n  );\r\n\r\n  return {\r\n    items,\r\n    isLoading,\r\n    hasError: Boolean(errorCode),\r\n    errorMessage,\r\n    isOffline,\r\n    onRetry: handleRetry,\r\n    onSessionPress: handleSessionPress,\r\n    onRevoke: handleRevoke,\r\n  };\r\n};\r\n\r\nexport default useUserSessionListScreen;\r\n"],"mappings":"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","ignoreList":[]}