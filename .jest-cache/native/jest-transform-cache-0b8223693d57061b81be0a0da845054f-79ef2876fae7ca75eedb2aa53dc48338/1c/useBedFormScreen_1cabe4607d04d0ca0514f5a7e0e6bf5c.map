{"version":3,"names":["useCallback","useEffect","useState","useRouter","useLocalSearchParams","useI18n","useBed","cov_23f8yyn28q","s","useBedFormScreen","f","_ref","t","router","_ref2","id","_ref3","get","create","update","data","isLoading","errorCode","reset","isEdit","Boolean","_ref4","_ref5","_slicedToArray","label","setLabel","_ref6","_ref7","status","setStatus","_ref8","_ref9","tenantId","setTenantId","_ref0","_ref1","facilityId","setFacilityId","_ref10","_ref11","wardId","setWardId","bed","b","Array","isArray","_ref12","_ref13","_ref14","_ref15","_ref16","_ref17","name","tenant_id","facility_id","ward_id","handleSubmit","_asyncToGenerator","payload","trim","undefined","replace","_unused","handleCancel","push","hasError","onSubmit","onCancel","testID"],"sources":["useBedFormScreen.js"],"sourcesContent":["/**\r\n * useBedFormScreen Hook\r\n * Shared logic for BedFormScreen (create/edit).\r\n */\r\nimport { useCallback, useEffect, useState } from 'react';\r\nimport { useRouter, useLocalSearchParams } from 'expo-router';\r\nimport { useI18n, useBed } from '@hooks';\r\n\r\nconst useBedFormScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { id } = useLocalSearchParams();\r\n  const { get, create, update, data, isLoading, errorCode, reset } = useBed();\r\n\r\n  const isEdit = Boolean(id);\r\n  const [label, setLabel] = useState('');\r\n  const [status, setStatus] = useState('');\r\n  const [tenantId, setTenantId] = useState('');\r\n  const [facilityId, setFacilityId] = useState('');\r\n  const [wardId, setWardId] = useState('');\r\n\r\n  const bed = data && typeof data === 'object' && !Array.isArray(data) ? data : null;\r\n\r\n  useEffect(() => {\r\n    if (isEdit && id) {\r\n      reset();\r\n      get(id);\r\n    }\r\n  }, [isEdit, id, get, reset]);\r\n\r\n  useEffect(() => {\r\n    if (bed) {\r\n      setLabel(bed.label ?? bed.name ?? '');\r\n      setStatus(bed.status ?? '');\r\n      setTenantId(bed.tenant_id ?? '');\r\n      setFacilityId(bed.facility_id ?? '');\r\n      setWardId(bed.ward_id ?? '');\r\n    }\r\n  }, [bed]);\r\n\r\n  const handleSubmit = useCallback(async () => {\r\n    try {\r\n      const payload = {\r\n        label: label.trim(),\r\n        status: status.trim() || undefined,\r\n      };\r\n      if (!isEdit) {\r\n        if (tenantId?.trim()) payload.tenant_id = tenantId.trim();\r\n        if (facilityId?.trim()) payload.facility_id = facilityId.trim();\r\n        if (wardId?.trim()) payload.ward_id = wardId.trim();\r\n      }\r\n      if (isEdit && id) {\r\n        await update(id, payload);\r\n      } else {\r\n        await create(payload);\r\n      }\r\n      router.replace('/settings/beds');\r\n    } catch {\r\n      /* error from hook */\r\n    }\r\n  }, [isEdit, id, label, status, tenantId, facilityId, wardId, create, update, router]);\r\n\r\n  const handleCancel = useCallback(() => {\r\n    router.push('/settings/beds');\r\n  }, [router]);\r\n\r\n  return {\r\n    isEdit,\r\n    label,\r\n    setLabel,\r\n    status,\r\n    setStatus,\r\n    tenantId,\r\n    setTenantId,\r\n    facilityId,\r\n    setFacilityId,\r\n    wardId,\r\n    setWardId,\r\n    isLoading,\r\n    hasError: Boolean(errorCode),\r\n    bed,\r\n    onSubmit: handleSubmit,\r\n    onCancel: handleCancel,\r\n    testID: 'bed-form-screen',\r\n  };\r\n};\r\n\r\nexport default useBedFormScreen;\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA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","ignoreList":[]}