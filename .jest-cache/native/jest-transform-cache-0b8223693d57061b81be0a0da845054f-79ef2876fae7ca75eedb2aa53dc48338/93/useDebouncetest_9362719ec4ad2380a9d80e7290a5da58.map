{"version":3,"names":["_react","_interopRequireDefault","require","_reactNative","_reactTestRenderer","_useDebounce","_jsxRuntime","TestComponent","_ref","value","delayMs","onResult","debouncedValue","useDebounce","React","useEffect","describe","beforeEach","jest","useFakeTimers","afterEach","clearAllTimers","useRealTimers","it","_asyncToGenerator2","default","results","_render","render","jsx","v","push","rerender","waitFor","expect","toBe","act","advanceTimersByTime","length","_render2","consoleError","spyOn","console","mockImplementation","_render3","unmount","not","toHaveBeenCalled","mockRestore","_render4","_render5","NaN"],"sources":["useDebounce.test.js"],"sourcesContent":["/**\r\n * useDebounce Hook Tests\r\n * File: useDebounce.test.js\r\n */\r\nimport React from 'react';\r\nimport { render, waitFor } from '@testing-library/react-native';\r\nimport { act } from 'react-test-renderer';\r\nimport useDebounce from '@hooks/useDebounce';\r\n\r\nconst TestComponent = ({ value, delayMs, onResult }) => {\r\n  const debouncedValue = useDebounce(value, delayMs);\r\n  React.useEffect(() => {\r\n    onResult(debouncedValue);\r\n  });\r\n  return null;\r\n};\r\n\r\ndescribe('useDebounce', () => {\r\n  beforeEach(() => {\r\n    jest.useFakeTimers();\r\n  });\r\n\r\n  afterEach(() => {\r\n    jest.clearAllTimers();\r\n    jest.useRealTimers();\r\n  });\r\n\r\n  it('delays updates until delayMs', async () => {\r\n    const results = [];\r\n    const { rerender } = render(\r\n      <TestComponent value=\"a\" delayMs={300} onResult={(v) => results.push(v)} />\r\n    );\r\n\r\n    await waitFor(() => expect(results[0]).toBe('a'));\r\n\r\n    rerender(<TestComponent value=\"b\" delayMs={300} onResult={(v) => results.push(v)} />);\r\n\r\n    act(() => {\r\n      jest.advanceTimersByTime(299);\r\n    });\r\n    expect(results[results.length - 1]).toBe('a');\r\n\r\n    act(() => {\r\n      jest.advanceTimersByTime(1);\r\n    });\r\n    expect(results[results.length - 1]).toBe('b');\r\n  });\r\n\r\n  it('cancels the previous timer on rapid changes (only emits last value)', async () => {\r\n    const results = [];\r\n    const { rerender } = render(\r\n      <TestComponent value=\"a\" delayMs={200} onResult={(v) => results.push(v)} />\r\n    );\r\n\r\n    await waitFor(() => expect(results[0]).toBe('a'));\r\n\r\n    rerender(<TestComponent value=\"b\" delayMs={200} onResult={(v) => results.push(v)} />);\r\n    rerender(<TestComponent value=\"c\" delayMs={200} onResult={(v) => results.push(v)} />);\r\n\r\n    act(() => {\r\n      jest.advanceTimersByTime(200);\r\n    });\r\n\r\n    expect(results[results.length - 1]).toBe('c');\r\n  });\r\n\r\n  it('clears timers on unmount (no post-unmount state update)', async () => {\r\n    const consoleError = jest.spyOn(console, 'error').mockImplementation(() => {});\r\n\r\n    const results = [];\r\n    const { rerender, unmount } = render(\r\n      <TestComponent value=\"a\" delayMs={100} onResult={(v) => results.push(v)} />\r\n    );\r\n\r\n    await waitFor(() => expect(results[0]).toBe('a'));\r\n\r\n    rerender(<TestComponent value=\"b\" delayMs={100} onResult={(v) => results.push(v)} />);\r\n    unmount();\r\n\r\n    act(() => {\r\n      jest.advanceTimersByTime(200);\r\n    });\r\n\r\n    expect(consoleError).not.toHaveBeenCalled();\r\n    consoleError.mockRestore();\r\n  });\r\n\r\n  it('applies delay changes deterministically', async () => {\r\n    const results = [];\r\n    const { rerender } = render(\r\n      <TestComponent value=\"a\" delayMs={200} onResult={(v) => results.push(v)} />\r\n    );\r\n\r\n    await waitFor(() => expect(results[0]).toBe('a'));\r\n\r\n    rerender(<TestComponent value=\"b\" delayMs={500} onResult={(v) => results.push(v)} />);\r\n\r\n    act(() => {\r\n      jest.advanceTimersByTime(200);\r\n    });\r\n    expect(results[results.length - 1]).toBe('a');\r\n\r\n    act(() => {\r\n      jest.advanceTimersByTime(300);\r\n    });\r\n    expect(results[results.length - 1]).toBe('b');\r\n  });\r\n\r\n  it('treats invalid delays as 0ms (immediate debounce)', async () => {\r\n    const results = [];\r\n    const { rerender } = render(\r\n      <TestComponent value=\"a\" delayMs={NaN} onResult={(v) => results.push(v)} />\r\n    );\r\n\r\n    await waitFor(() => expect(results[0]).toBe('a'));\r\n\r\n    rerender(<TestComponent value=\"b\" delayMs={-5} onResult={(v) => results.push(v)} />);\r\n\r\n    act(() => {\r\n      jest.advanceTimersByTime(0);\r\n    });\r\n\r\n    expect(results[results.length - 1]).toBe('b');\r\n  });\r\n});\r\n\r\n"],"mappings":"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","ignoreList":[]}