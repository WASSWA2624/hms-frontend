{"version":3,"names":["runCrudUsecaseTests","_ref","_ref2","list","get","create","update","remove","_ref$extraActions","extraActions","cov_a96o22ij3","b","queueRequestIfOffline","_ref2$payload","payload","name","_ref2$id","id","_ref2$listParams","listParams","page","f","s","it","_asyncToGenerator","mockResolvedValue","expect","resolves","toBeDefined","action","fn","apply","_toConsumableArray","args","toEqual","Object","assign","rejects"],"sources":["crud-usecase-runner.js"],"sourcesContent":["/**\r\n * CRUD Usecase Test Helpers\r\n * File: crud-usecase-runner.js\r\n */\r\nconst runCrudUsecaseTests = (\r\n  {\r\n    list,\r\n    get,\r\n    create,\r\n    update,\r\n    remove,\r\n    extraActions = [],\r\n  },\r\n  {\r\n    queueRequestIfOffline,\r\n    payload = { name: 'value' },\r\n    id = '1',\r\n    listParams = { page: 1 },\r\n  }\r\n) => {\r\n  it('runs online usecases', async () => {\r\n    queueRequestIfOffline.mockResolvedValue(false);\r\n\r\n    if (list) {\r\n      await expect(list(listParams)).resolves.toBeDefined();\r\n      await expect(list()).resolves.toBeDefined();\r\n    }\r\n    if (get) {\r\n      await expect(get(id)).resolves.toBeDefined();\r\n    }\r\n    if (create) {\r\n      await expect(create(payload)).resolves.toBeDefined();\r\n    }\r\n    if (update) {\r\n      await expect(update(id, payload)).resolves.toBeDefined();\r\n    }\r\n    if (remove) {\r\n      await expect(remove(id)).resolves.toBeDefined();\r\n    }\r\n\r\n    for (const action of extraActions) {\r\n      await expect(action.fn(...(action.args || []))).resolves.toBeDefined();\r\n    }\r\n  });\r\n\r\n  it('queues offline writes', async () => {\r\n    queueRequestIfOffline.mockResolvedValue(true);\r\n\r\n    if (create) {\r\n      await expect(create(payload)).resolves.toEqual(payload);\r\n    }\r\n    if (update) {\r\n      await expect(update(id, payload)).resolves.toEqual({ id, ...payload });\r\n    }\r\n    if (remove) {\r\n      await expect(remove(id)).resolves.toEqual({ id });\r\n    }\r\n  });\r\n\r\n  if (get) {\r\n    it('rejects invalid ids', async () => {\r\n      await expect(get(null)).rejects.toBeDefined();\r\n    });\r\n  }\r\n};\r\n\r\nexport { runCrudUsecaseTests };\r\n"],"mappings":"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","ignoreList":[]}