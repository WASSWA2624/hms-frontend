489341d69940bbcba763e74073073aa7
_getJestObj().mock("../../offline/queue", function () {
  return {
    addToQueue: jest.fn()
  };
});
_getJestObj().mock("../../offline/network.listener", function () {
  return {
    getIsOnline: jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _queue = require("../../offline/queue");
var _network = require("../../offline/network.listener");
var _request = require("../../offline/request");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('queueRequestIfOffline', function () {
  beforeEach(function () {
    _queue.addToQueue.mockReset();
    _network.getIsOnline.mockReset();
  });
  it('returns false when online', (0, _asyncToGenerator2.default)(function* () {
    _network.getIsOnline.mockReturnValue(true);
    yield expect((0, _request.queueRequestIfOffline)({
      url: '/x',
      method: 'POST'
    })).resolves.toBe(false);
    expect(_queue.addToQueue).not.toHaveBeenCalled();
  }));
  it('queues when offline', (0, _asyncToGenerator2.default)(function* () {
    _network.getIsOnline.mockReturnValue(false);
    _queue.addToQueue.mockResolvedValue(true);
    yield expect((0, _request.queueRequestIfOffline)({
      url: '/x',
      method: 'POST'
    })).resolves.toBe(true);
    expect(_queue.addToQueue).toHaveBeenCalledWith({
      url: '/x',
      method: 'POST'
    });
  }));
  it('throws when queue fails', (0, _asyncToGenerator2.default)(function* () {
    _network.getIsOnline.mockReturnValue(false);
    _queue.addToQueue.mockResolvedValue(false);
    yield expect((0, _request.queueRequestIfOffline)({
      url: '/x',
      method: 'POST'
    })).rejects.toThrow('OFFLINE_QUEUE_FAILED');
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJhZGRUb1F1ZXVlIiwiamVzdCIsImZuIiwiZ2V0SXNPbmxpbmUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImRlZmF1bHQiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfcXVldWUiLCJfbmV0d29yayIsIl9yZXF1ZXN0IiwiX3JlcXVpcmUiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJtb2NrUmVzZXQiLCJpdCIsIm1vY2tSZXR1cm5WYWx1ZSIsImV4cGVjdCIsInF1ZXVlUmVxdWVzdElmT2ZmbGluZSIsInVybCIsIm1ldGhvZCIsInJlc29sdmVzIiwidG9CZSIsIm5vdCIsInRvSGF2ZUJlZW5DYWxsZWQiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsInRvSGF2ZUJlZW5DYWxsZWRXaXRoIiwicmVqZWN0cyIsInRvVGhyb3ciXSwic291cmNlcyI6WyJyZXF1ZXN0LnRlc3QuanMiXSwic291cmNlc0NvbnRlbnQiOlsiLyoqXHJcbiAqIE9mZmxpbmUgUmVxdWVzdCBUZXN0c1xyXG4gKiBGaWxlOiByZXF1ZXN0LnRlc3QuanNcclxuICovXHJcbmltcG9ydCB7IGFkZFRvUXVldWUgfSBmcm9tICdAb2ZmbGluZS9xdWV1ZSc7XHJcbmltcG9ydCB7IGdldElzT25saW5lIH0gZnJvbSAnQG9mZmxpbmUvbmV0d29yay5saXN0ZW5lcic7XHJcbmltcG9ydCB7IHF1ZXVlUmVxdWVzdElmT2ZmbGluZSB9IGZyb20gJ0BvZmZsaW5lL3JlcXVlc3QnO1xyXG5cclxuamVzdC5tb2NrKCdAb2ZmbGluZS9xdWV1ZScsICgpID0+ICh7XHJcbiAgYWRkVG9RdWV1ZTogamVzdC5mbigpLFxyXG59KSk7XHJcblxyXG5qZXN0Lm1vY2soJ0BvZmZsaW5lL25ldHdvcmsubGlzdGVuZXInLCAoKSA9PiAoe1xyXG4gIGdldElzT25saW5lOiBqZXN0LmZuKCksXHJcbn0pKTtcclxuXHJcbmRlc2NyaWJlKCdxdWV1ZVJlcXVlc3RJZk9mZmxpbmUnLCAoKSA9PiB7XHJcbiAgYmVmb3JlRWFjaCgoKSA9PiB7XHJcbiAgICBhZGRUb1F1ZXVlLm1vY2tSZXNldCgpO1xyXG4gICAgZ2V0SXNPbmxpbmUubW9ja1Jlc2V0KCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdyZXR1cm5zIGZhbHNlIHdoZW4gb25saW5lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgZ2V0SXNPbmxpbmUubW9ja1JldHVyblZhbHVlKHRydWUpO1xyXG4gICAgYXdhaXQgZXhwZWN0KHF1ZXVlUmVxdWVzdElmT2ZmbGluZSh7IHVybDogJy94JywgbWV0aG9kOiAnUE9TVCcgfSkpLnJlc29sdmVzLnRvQmUoZmFsc2UpO1xyXG4gICAgZXhwZWN0KGFkZFRvUXVldWUpLm5vdC50b0hhdmVCZWVuQ2FsbGVkKCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdxdWV1ZXMgd2hlbiBvZmZsaW5lJywgYXN5bmMgKCkgPT4ge1xyXG4gICAgZ2V0SXNPbmxpbmUubW9ja1JldHVyblZhbHVlKGZhbHNlKTtcclxuICAgIGFkZFRvUXVldWUubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XHJcbiAgICBhd2FpdCBleHBlY3QocXVldWVSZXF1ZXN0SWZPZmZsaW5lKHsgdXJsOiAnL3gnLCBtZXRob2Q6ICdQT1NUJyB9KSkucmVzb2x2ZXMudG9CZSh0cnVlKTtcclxuICAgIGV4cGVjdChhZGRUb1F1ZXVlKS50b0hhdmVCZWVuQ2FsbGVkV2l0aCh7IHVybDogJy94JywgbWV0aG9kOiAnUE9TVCcgfSk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCd0aHJvd3Mgd2hlbiBxdWV1ZSBmYWlscycsIGFzeW5jICgpID0+IHtcclxuICAgIGdldElzT25saW5lLm1vY2tSZXR1cm5WYWx1ZShmYWxzZSk7XHJcbiAgICBhZGRUb1F1ZXVlLm1vY2tSZXNvbHZlZFZhbHVlKGZhbHNlKTtcclxuICAgIGF3YWl0IGV4cGVjdChxdWV1ZVJlcXVlc3RJZk9mZmxpbmUoeyB1cmw6ICcveCcsIG1ldGhvZDogJ1BPU1QnIH0pKS5yZWplY3RzLnRvVGhyb3coXHJcbiAgICAgICdPRkZMSU5FX1FVRVVFX0ZBSUxFRCdcclxuICAgICk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXSwibWFwcGluZ3MiOiJBQVFBQSxXQUFBLEdBQUtDLElBQUksd0JBQW1CO0VBQUEsT0FBTztJQUNqQ0MsVUFBVSxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQztFQUN0QixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBRUhKLFdBQUEsR0FBS0MsSUFBSSxtQ0FBOEI7RUFBQSxPQUFPO0lBQzVDSSxXQUFXLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDO0VBQ3ZCLENBQUM7QUFBQSxDQUFDLENBQUM7QUFBQyxJQUFBRSxzQkFBQSxHQUFBQyxPQUFBLGlEQUFBQyxPQUFBO0FBQUEsSUFBQUMsa0JBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQVZKLElBQUFHLE1BQUEsR0FBQUgsT0FBQTtBQUNBLElBQUFJLFFBQUEsR0FBQUosT0FBQTtBQUNBLElBQUFLLFFBQUEsR0FBQUwsT0FBQTtBQUF5RCxTQUFBUCxZQUFBO0VBQUEsSUFBQWEsUUFBQSxHQUFBTixPQUFBO0lBQUFKLElBQUEsR0FBQVUsUUFBQSxDQUFBVixJQUFBO0VBQUFILFdBQUEsWUFBQUEsWUFBQTtJQUFBLE9BQUFHLElBQUE7RUFBQTtFQUFBLE9BQUFBLElBQUE7QUFBQTtBQVV6RFcsUUFBUSxDQUFDLHVCQUF1QixFQUFFLFlBQU07RUFDdENDLFVBQVUsQ0FBQyxZQUFNO0lBQ2ZiLGlCQUFVLENBQUNjLFNBQVMsQ0FBQyxDQUFDO0lBQ3RCWCxvQkFBVyxDQUFDVyxTQUFTLENBQUMsQ0FBQztFQUN6QixDQUFDLENBQUM7RUFFRkMsRUFBRSxDQUFDLDJCQUEyQixNQUFBUixrQkFBQSxDQUFBRCxPQUFBLEVBQUUsYUFBWTtJQUMxQ0gsb0JBQVcsQ0FBQ2EsZUFBZSxDQUFDLElBQUksQ0FBQztJQUNqQyxNQUFNQyxNQUFNLENBQUMsSUFBQUMsOEJBQXFCLEVBQUM7TUFBRUMsR0FBRyxFQUFFLElBQUk7TUFBRUMsTUFBTSxFQUFFO0lBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBQ0MsUUFBUSxDQUFDQyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3ZGTCxNQUFNLENBQUNqQixpQkFBVSxDQUFDLENBQUN1QixHQUFHLENBQUNDLGdCQUFnQixDQUFDLENBQUM7RUFDM0MsQ0FBQyxFQUFDO0VBRUZULEVBQUUsQ0FBQyxxQkFBcUIsTUFBQVIsa0JBQUEsQ0FBQUQsT0FBQSxFQUFFLGFBQVk7SUFDcENILG9CQUFXLENBQUNhLGVBQWUsQ0FBQyxLQUFLLENBQUM7SUFDbENoQixpQkFBVSxDQUFDeUIsaUJBQWlCLENBQUMsSUFBSSxDQUFDO0lBQ2xDLE1BQU1SLE1BQU0sQ0FBQyxJQUFBQyw4QkFBcUIsRUFBQztNQUFFQyxHQUFHLEVBQUUsSUFBSTtNQUFFQyxNQUFNLEVBQUU7SUFBTyxDQUFDLENBQUMsQ0FBQyxDQUFDQyxRQUFRLENBQUNDLElBQUksQ0FBQyxJQUFJLENBQUM7SUFDdEZMLE1BQU0sQ0FBQ2pCLGlCQUFVLENBQUMsQ0FBQzBCLG9CQUFvQixDQUFDO01BQUVQLEdBQUcsRUFBRSxJQUFJO01BQUVDLE1BQU0sRUFBRTtJQUFPLENBQUMsQ0FBQztFQUN4RSxDQUFDLEVBQUM7RUFFRkwsRUFBRSxDQUFDLHlCQUF5QixNQUFBUixrQkFBQSxDQUFBRCxPQUFBLEVBQUUsYUFBWTtJQUN4Q0gsb0JBQVcsQ0FBQ2EsZUFBZSxDQUFDLEtBQUssQ0FBQztJQUNsQ2hCLGlCQUFVLENBQUN5QixpQkFBaUIsQ0FBQyxLQUFLLENBQUM7SUFDbkMsTUFBTVIsTUFBTSxDQUFDLElBQUFDLDhCQUFxQixFQUFDO01BQUVDLEdBQUcsRUFBRSxJQUFJO01BQUVDLE1BQU0sRUFBRTtJQUFPLENBQUMsQ0FBQyxDQUFDLENBQUNPLE9BQU8sQ0FBQ0MsT0FBTyxDQUNoRixzQkFDRixDQUFDO0VBQ0gsQ0FBQyxFQUFDO0FBQ0osQ0FBQyxDQUFDIiwiaWdub3JlTGlzdCI6W119