c1bb7202a4d60611128f29490121dc47
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.initTheme = initTheme;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _store = _interopRequireDefault(require("../store"));
var _ui = require("../store/slices/ui.slice");
var _storage = require("../services/storage");
var _logging = require("../logging");
function initTheme() {
  return _initTheme.apply(this, arguments);
}
function _initTheme() {
  _initTheme = (0, _asyncToGenerator2.default)(function* () {
    try {
      var savedTheme = 'light';
      try {
        var persistedTheme = yield _storage.async.getItem('theme_preference');
        if (persistedTheme && ['light', 'dark', 'high-contrast'].includes(persistedTheme)) {
          savedTheme = persistedTheme;
        }
      } catch (error) {
        _logging.logger.debug('Could not load persisted theme, using default', {
          error: error.message
        });
      }
      _store.default.dispatch(_ui.actions.setTheme(savedTheme));
      _logging.logger.info('Theme initialized successfully', {
        theme: savedTheme
      });
    } catch (error) {
      _logging.logger.error('Theme initialization failed', {
        error: error.message
      });
    }
  });
  return _initTheme.apply(this, arguments);
}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfc3RvcmUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl91aSIsIl9zdG9yYWdlIiwiX2xvZ2dpbmciLCJpbml0VGhlbWUiLCJfaW5pdFRoZW1lIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJkZWZhdWx0Iiwic2F2ZWRUaGVtZSIsInBlcnNpc3RlZFRoZW1lIiwiYXN5bmMiLCJnZXRJdGVtIiwiaW5jbHVkZXMiLCJlcnJvciIsImxvZ2dlciIsImRlYnVnIiwibWVzc2FnZSIsInN0b3JlIiwiZGlzcGF0Y2giLCJhY3Rpb25zIiwic2V0VGhlbWUiLCJpbmZvIiwidGhlbWUiXSwic291cmNlcyI6WyJpbml0LnRoZW1lLmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBUaGVtZSBJbml0aWFsaXphdGlvblxyXG4gKiBGaWxlOiBpbml0LnRoZW1lLmpzXHJcbiAqL1xyXG5pbXBvcnQgc3RvcmUgZnJvbSAnQHN0b3JlJztcclxuaW1wb3J0IHsgYWN0aW9ucyB9IGZyb20gJ0BzdG9yZS9zbGljZXMvdWkuc2xpY2UnO1xyXG5pbXBvcnQgeyBhc3luYyB9IGZyb20gJ0BzZXJ2aWNlcy9zdG9yYWdlJztcclxuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSAnQGxvZ2dpbmcnO1xyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXRUaGVtZSgpIHtcclxuICB0cnkge1xyXG4gICAgLy8gVHJ5IHRvIGxvYWQgcGVyc2lzdGVkIHRoZW1lIHByZWZlcmVuY2VcclxuICAgIGxldCBzYXZlZFRoZW1lID0gJ2xpZ2h0JzsgLy8gZGVmYXVsdFxyXG4gICAgXHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBwZXJzaXN0ZWRUaGVtZSA9IGF3YWl0IGFzeW5jLmdldEl0ZW0oJ3RoZW1lX3ByZWZlcmVuY2UnKTtcclxuICAgICAgaWYgKHBlcnNpc3RlZFRoZW1lICYmIFsnbGlnaHQnLCAnZGFyaycsICdoaWdoLWNvbnRyYXN0J10uaW5jbHVkZXMocGVyc2lzdGVkVGhlbWUpKSB7XHJcbiAgICAgICAgc2F2ZWRUaGVtZSA9IHBlcnNpc3RlZFRoZW1lO1xyXG4gICAgICB9XHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAvLyBJZiBzdG9yYWdlIHJlYWQgZmFpbHMsIHVzZSBkZWZhdWx0XHJcbiAgICAgIGxvZ2dlci5kZWJ1ZygnQ291bGQgbm90IGxvYWQgcGVyc2lzdGVkIHRoZW1lLCB1c2luZyBkZWZhdWx0JywgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIH1cclxuICAgIFxyXG4gICAgLy8gU2V0IHRoZW1lIGluIHN0b3JlXHJcbiAgICBzdG9yZS5kaXNwYXRjaChhY3Rpb25zLnNldFRoZW1lKHNhdmVkVGhlbWUpKTtcclxuICAgIFxyXG4gICAgbG9nZ2VyLmluZm8oJ1RoZW1lIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseScsIHsgdGhlbWU6IHNhdmVkVGhlbWUgfSk7XHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGxvZ2dlci5lcnJvcignVGhlbWUgaW5pdGlhbGl6YXRpb24gZmFpbGVkJywgeyBlcnJvcjogZXJyb3IubWVzc2FnZSB9KTtcclxuICAgIC8vIFRoZW1lIGZhaWx1cmUgaXMgbm90IGZhdGFsIC0gdXNlIGRlZmF1bHRcclxuICB9XHJcbn1cclxuXHJcbiJdLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBSUEsSUFBQUEsTUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsR0FBQSxHQUFBRCxPQUFBO0FBQ0EsSUFBQUUsUUFBQSxHQUFBRixPQUFBO0FBQ0EsSUFBQUcsUUFBQSxHQUFBSCxPQUFBO0FBQWtDLFNBRVpJLFNBQVNBLENBQUE7RUFBQSxPQUFBQyxVQUFBLENBQUFDLEtBQUEsT0FBQUMsU0FBQTtBQUFBO0FBQUEsU0FBQUYsV0FBQTtFQUFBQSxVQUFBLE9BQUFHLGtCQUFBLENBQUFDLE9BQUEsRUFBeEIsYUFBMkI7SUFDaEMsSUFBSTtNQUVGLElBQUlDLFVBQVUsR0FBRyxPQUFPO01BRXhCLElBQUk7UUFDRixJQUFNQyxjQUFjLFNBQVNDLGNBQUssQ0FBQ0MsT0FBTyxDQUFDLGtCQUFrQixDQUFDO1FBQzlELElBQUlGLGNBQWMsSUFBSSxDQUFDLE9BQU8sRUFBRSxNQUFNLEVBQUUsZUFBZSxDQUFDLENBQUNHLFFBQVEsQ0FBQ0gsY0FBYyxDQUFDLEVBQUU7VUFDakZELFVBQVUsR0FBR0MsY0FBYztRQUM3QjtNQUNGLENBQUMsQ0FBQyxPQUFPSSxLQUFLLEVBQUU7UUFFZEMsZUFBTSxDQUFDQyxLQUFLLENBQUMsK0NBQStDLEVBQUU7VUFBRUYsS0FBSyxFQUFFQSxLQUFLLENBQUNHO1FBQVEsQ0FBQyxDQUFDO01BQ3pGO01BR0FDLGNBQUssQ0FBQ0MsUUFBUSxDQUFDQyxXQUFPLENBQUNDLFFBQVEsQ0FBQ1osVUFBVSxDQUFDLENBQUM7TUFFNUNNLGVBQU0sQ0FBQ08sSUFBSSxDQUFDLGdDQUFnQyxFQUFFO1FBQUVDLEtBQUssRUFBRWQ7TUFBVyxDQUFDLENBQUM7SUFDdEUsQ0FBQyxDQUFDLE9BQU9LLEtBQUssRUFBRTtNQUNkQyxlQUFNLENBQUNELEtBQUssQ0FBQyw2QkFBNkIsRUFBRTtRQUFFQSxLQUFLLEVBQUVBLEtBQUssQ0FBQ0c7TUFBUSxDQUFDLENBQUM7SUFFdkU7RUFDRixDQUFDO0VBQUEsT0FBQWIsVUFBQSxDQUFBQyxLQUFBLE9BQUFDLFNBQUE7QUFBQSIsImlnbm9yZUxpc3QiOltdfQ==