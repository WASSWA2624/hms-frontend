{"version":3,"names":["_react","require","_expoRouter","_hooks","resolveErrorMessage","t","errorCode","key","resolved","useUserSessionDetailScreen","_useI18n","useI18n","router","useRouter","_useLocalSearchParams","useLocalSearchParams","id","_useNetwork","useNetwork","isOffline","_useUserSession","useUserSession","get","revoke","data","isLoading","reset","session","Array","isArray","errorMessage","useMemo","fetchDetail","useCallback","useEffect","handleRetry","handleBack","push","handleRevoke","_asyncToGenerator2","default","_unused","hasError","Boolean","onRetry","onBack","onRevoke","_default","exports"],"sources":["useUserSessionDetailScreen.js"],"sourcesContent":["/**\r\n * useUserSessionDetailScreen Hook\r\n * Shared logic for UserSessionDetailScreen across platforms.\r\n * File: useUserSessionDetailScreen.js\r\n */\r\nimport { useCallback, useEffect, useMemo } from 'react';\r\nimport { useRouter, useLocalSearchParams } from 'expo-router';\r\nimport { useI18n, useNetwork, useUserSession } from '@hooks';\r\n\r\nconst resolveErrorMessage = (t, errorCode) => {\r\n  if (!errorCode) return null;\r\n  const key = `errors.codes.${errorCode}`;\r\n  const resolved = t(key);\r\n  return resolved === key ? t('errors.codes.UNKNOWN_ERROR') : resolved;\r\n};\r\n\r\nconst useUserSessionDetailScreen = () => {\r\n  const { t } = useI18n();\r\n  const router = useRouter();\r\n  const { id } = useLocalSearchParams();\r\n  const { isOffline } = useNetwork();\r\n  const { get, revoke, data, isLoading, errorCode, reset } = useUserSession();\r\n\r\n  const session = data && typeof data === 'object' && !Array.isArray(data) ? data : null;\r\n  const errorMessage = useMemo(\r\n    () => resolveErrorMessage(t, errorCode),\r\n    [t, errorCode]\r\n  );\r\n\r\n  const fetchDetail = useCallback(() => {\r\n    if (!id) return;\r\n    reset();\r\n    get(id);\r\n  }, [id, get, reset]);\r\n\r\n  useEffect(() => {\r\n    fetchDetail();\r\n  }, [fetchDetail]);\r\n\r\n  const handleRetry = useCallback(() => {\r\n    fetchDetail();\r\n  }, [fetchDetail]);\r\n\r\n  const handleBack = useCallback(() => {\r\n    router.push('/settings/user-sessions');\r\n  }, [router]);\r\n\r\n  const handleRevoke = useCallback(async () => {\r\n    if (!id) return;\r\n    try {\r\n      await revoke(id);\r\n      handleBack();\r\n    } catch {\r\n      /* error handled by hook */\r\n    }\r\n  }, [id, revoke, handleBack]);\r\n\r\n  return {\r\n    id,\r\n    session,\r\n    isLoading,\r\n    hasError: Boolean(errorCode),\r\n    errorMessage,\r\n    isOffline,\r\n    onRetry: handleRetry,\r\n    onBack: handleBack,\r\n    onRevoke: handleRevoke,\r\n  };\r\n};\r\n\r\nexport default useUserSessionDetailScreen;\r\n"],"mappings":";;;;;;AAKA,IAAAA,MAAA,GAAAC,OAAA;AACA,IAAAC,WAAA,GAAAD,OAAA;AACA,IAAAE,MAAA,GAAAF,OAAA;AAEA,IAAMG,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIC,CAAC,EAAEC,SAAS,EAAK;EAC5C,IAAI,CAACA,SAAS,EAAE,OAAO,IAAI;EAC3B,IAAMC,GAAG,GAAG,gBAAgBD,SAAS,EAAE;EACvC,IAAME,QAAQ,GAAGH,CAAC,CAACE,GAAG,CAAC;EACvB,OAAOC,QAAQ,KAAKD,GAAG,GAAGF,CAAC,CAAC,4BAA4B,CAAC,GAAGG,QAAQ;AACtE,CAAC;AAED,IAAMC,0BAA0B,GAAG,SAA7BA,0BAA0BA,CAAA,EAAS;EACvC,IAAAC,QAAA,GAAc,IAAAC,cAAO,EAAC,CAAC;IAAfN,CAAC,GAAAK,QAAA,CAADL,CAAC;EACT,IAAMO,MAAM,GAAG,IAAAC,qBAAS,EAAC,CAAC;EAC1B,IAAAC,qBAAA,GAAe,IAAAC,gCAAoB,EAAC,CAAC;IAA7BC,EAAE,GAAAF,qBAAA,CAAFE,EAAE;EACV,IAAAC,WAAA,GAAsB,IAAAC,iBAAU,EAAC,CAAC;IAA1BC,SAAS,GAAAF,WAAA,CAATE,SAAS;EACjB,IAAAC,eAAA,GAA2D,IAAAC,qBAAc,EAAC,CAAC;IAAnEC,GAAG,GAAAF,eAAA,CAAHE,GAAG;IAAEC,MAAM,GAAAH,eAAA,CAANG,MAAM;IAAEC,IAAI,GAAAJ,eAAA,CAAJI,IAAI;IAAEC,SAAS,GAAAL,eAAA,CAATK,SAAS;IAAEnB,SAAS,GAAAc,eAAA,CAATd,SAAS;IAAEoB,KAAK,GAAAN,eAAA,CAALM,KAAK;EAEtD,IAAMC,OAAO,GAAGH,IAAI,IAAI,OAAOA,IAAI,KAAK,QAAQ,IAAI,CAACI,KAAK,CAACC,OAAO,CAACL,IAAI,CAAC,GAAGA,IAAI,GAAG,IAAI;EACtF,IAAMM,YAAY,GAAG,IAAAC,cAAO,EAC1B;IAAA,OAAM3B,mBAAmB,CAACC,CAAC,EAAEC,SAAS,CAAC;EAAA,GACvC,CAACD,CAAC,EAAEC,SAAS,CACf,CAAC;EAED,IAAM0B,WAAW,GAAG,IAAAC,kBAAW,EAAC,YAAM;IACpC,IAAI,CAACjB,EAAE,EAAE;IACTU,KAAK,CAAC,CAAC;IACPJ,GAAG,CAACN,EAAE,CAAC;EACT,CAAC,EAAE,CAACA,EAAE,EAAEM,GAAG,EAAEI,KAAK,CAAC,CAAC;EAEpB,IAAAQ,gBAAS,EAAC,YAAM;IACdF,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EAEjB,IAAMG,WAAW,GAAG,IAAAF,kBAAW,EAAC,YAAM;IACpCD,WAAW,CAAC,CAAC;EACf,CAAC,EAAE,CAACA,WAAW,CAAC,CAAC;EAEjB,IAAMI,UAAU,GAAG,IAAAH,kBAAW,EAAC,YAAM;IACnCrB,MAAM,CAACyB,IAAI,CAAC,yBAAyB,CAAC;EACxC,CAAC,EAAE,CAACzB,MAAM,CAAC,CAAC;EAEZ,IAAM0B,YAAY,GAAG,IAAAL,kBAAW,MAAAM,kBAAA,CAAAC,OAAA,EAAC,aAAY;IAC3C,IAAI,CAACxB,EAAE,EAAE;IACT,IAAI;MACF,MAAMO,MAAM,CAACP,EAAE,CAAC;MAChBoB,UAAU,CAAC,CAAC;IACd,CAAC,CAAC,OAAAK,OAAA,EAAM,CAER;EACF,CAAC,GAAE,CAACzB,EAAE,EAAEO,MAAM,EAAEa,UAAU,CAAC,CAAC;EAE5B,OAAO;IACLpB,EAAE,EAAFA,EAAE;IACFW,OAAO,EAAPA,OAAO;IACPF,SAAS,EAATA,SAAS;IACTiB,QAAQ,EAAEC,OAAO,CAACrC,SAAS,CAAC;IAC5BwB,YAAY,EAAZA,YAAY;IACZX,SAAS,EAATA,SAAS;IACTyB,OAAO,EAAET,WAAW;IACpBU,MAAM,EAAET,UAAU;IAClBU,QAAQ,EAAER;EACZ,CAAC;AACH,CAAC;AAAC,IAAAS,QAAA,GAAAC,OAAA,CAAAR,OAAA,GAEa/B,0BAA0B","ignoreList":[]}