{"version":3,"names":["_getJestObj","mock","addToQueue","jest","fn","getIsOnline","_interopRequireDefault","require","default","_asyncToGenerator2","_queue","_network","_request","_require","describe","beforeEach","mockReset","it","mockReturnValue","expect","queueRequestIfOffline","url","method","resolves","toBe","not","toHaveBeenCalled","mockResolvedValue","toHaveBeenCalledWith","rejects","toThrow"],"sources":["request.test.js"],"sourcesContent":["/**\r\n * Offline Request Tests\r\n * File: request.test.js\r\n */\r\nimport { addToQueue } from '@offline/queue';\r\nimport { getIsOnline } from '@offline/network.listener';\r\nimport { queueRequestIfOffline } from '@offline/request';\r\n\r\njest.mock('@offline/queue', () => ({\r\n  addToQueue: jest.fn(),\r\n}));\r\n\r\njest.mock('@offline/network.listener', () => ({\r\n  getIsOnline: jest.fn(),\r\n}));\r\n\r\ndescribe('queueRequestIfOffline', () => {\r\n  beforeEach(() => {\r\n    addToQueue.mockReset();\r\n    getIsOnline.mockReset();\r\n  });\r\n\r\n  it('returns false when online', async () => {\r\n    getIsOnline.mockReturnValue(true);\r\n    await expect(queueRequestIfOffline({ url: '/x', method: 'POST' })).resolves.toBe(false);\r\n    expect(addToQueue).not.toHaveBeenCalled();\r\n  });\r\n\r\n  it('queues when offline', async () => {\r\n    getIsOnline.mockReturnValue(false);\r\n    addToQueue.mockResolvedValue(true);\r\n    await expect(queueRequestIfOffline({ url: '/x', method: 'POST' })).resolves.toBe(true);\r\n    expect(addToQueue).toHaveBeenCalledWith({ url: '/x', method: 'POST' });\r\n  });\r\n\r\n  it('throws when queue fails', async () => {\r\n    getIsOnline.mockReturnValue(false);\r\n    addToQueue.mockResolvedValue(false);\r\n    await expect(queueRequestIfOffline({ url: '/x', method: 'POST' })).rejects.toThrow(\r\n      'OFFLINE_QUEUE_FAILED'\r\n    );\r\n  });\r\n});\r\n"],"mappings":"AAQAA,WAAA,GAAKC,IAAI,wBAAmB;EAAA,OAAO;IACjCC,UAAU,EAAEC,IAAI,CAACC,EAAE,CAAC;EACtB,CAAC;AAAA,CAAC,CAAC;AAEHJ,WAAA,GAAKC,IAAI,mCAA8B;EAAA,OAAO;IAC5CI,WAAW,EAAEF,IAAI,CAACC,EAAE,CAAC;EACvB,CAAC;AAAA,CAAC,CAAC;AAAC,IAAAE,sBAAA,GAAAC,OAAA,iDAAAC,OAAA;AAAA,IAAAC,kBAAA,GAAAH,sBAAA,CAAAC,OAAA;AAVJ,IAAAG,MAAA,GAAAH,OAAA;AACA,IAAAI,QAAA,GAAAJ,OAAA;AACA,IAAAK,QAAA,GAAAL,OAAA;AAAyD,SAAAP,YAAA;EAAA,IAAAa,QAAA,GAAAN,OAAA;IAAAJ,IAAA,GAAAU,QAAA,CAAAV,IAAA;EAAAH,WAAA,YAAAA,YAAA;IAAA,OAAAG,IAAA;EAAA;EAAA,OAAAA,IAAA;AAAA;AAUzDW,QAAQ,CAAC,uBAAuB,EAAE,YAAM;EACtCC,UAAU,CAAC,YAAM;IACfb,iBAAU,CAACc,SAAS,CAAC,CAAC;IACtBX,oBAAW,CAACW,SAAS,CAAC,CAAC;EACzB,CAAC,CAAC;EAEFC,EAAE,CAAC,2BAA2B,MAAAR,kBAAA,CAAAD,OAAA,EAAE,aAAY;IAC1CH,oBAAW,CAACa,eAAe,CAAC,IAAI,CAAC;IACjC,MAAMC,MAAM,CAAC,IAAAC,8BAAqB,EAAC;MAAEC,GAAG,EAAE,IAAI;MAAEC,MAAM,EAAE;IAAO,CAAC,CAAC,CAAC,CAACC,QAAQ,CAACC,IAAI,CAAC,KAAK,CAAC;IACvFL,MAAM,CAACjB,iBAAU,CAAC,CAACuB,GAAG,CAACC,gBAAgB,CAAC,CAAC;EAC3C,CAAC,EAAC;EAEFT,EAAE,CAAC,qBAAqB,MAAAR,kBAAA,CAAAD,OAAA,EAAE,aAAY;IACpCH,oBAAW,CAACa,eAAe,CAAC,KAAK,CAAC;IAClChB,iBAAU,CAACyB,iBAAiB,CAAC,IAAI,CAAC;IAClC,MAAMR,MAAM,CAAC,IAAAC,8BAAqB,EAAC;MAAEC,GAAG,EAAE,IAAI;MAAEC,MAAM,EAAE;IAAO,CAAC,CAAC,CAAC,CAACC,QAAQ,CAACC,IAAI,CAAC,IAAI,CAAC;IACtFL,MAAM,CAACjB,iBAAU,CAAC,CAAC0B,oBAAoB,CAAC;MAAEP,GAAG,EAAE,IAAI;MAAEC,MAAM,EAAE;IAAO,CAAC,CAAC;EACxE,CAAC,EAAC;EAEFL,EAAE,CAAC,yBAAyB,MAAAR,kBAAA,CAAAD,OAAA,EAAE,aAAY;IACxCH,oBAAW,CAACa,eAAe,CAAC,KAAK,CAAC;IAClChB,iBAAU,CAACyB,iBAAiB,CAAC,KAAK,CAAC;IACnC,MAAMR,MAAM,CAAC,IAAAC,8BAAqB,EAAC;MAAEC,GAAG,EAAE,IAAI;MAAEC,MAAM,EAAE;IAAO,CAAC,CAAC,CAAC,CAACO,OAAO,CAACC,OAAO,CAChF,sBACF,CAAC;EACH,CAAC,EAAC;AACJ,CAAC,CAAC","ignoreList":[]}