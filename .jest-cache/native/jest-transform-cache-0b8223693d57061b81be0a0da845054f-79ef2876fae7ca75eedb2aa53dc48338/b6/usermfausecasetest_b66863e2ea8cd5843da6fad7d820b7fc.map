{"version":3,"names":["_getJestObj","mock","userMfaApi","list","jest","fn","get","create","update","remove","verifyUserMfaApi","enableUserMfaApi","disableUserMfaApi","queueRequestIfOffline","_interopRequireDefault","require","default","_asyncToGenerator2","_userMfa","_userMfa2","_request","_crudUsecaseRunner","_require","describe","beforeEach","mockResolvedValue","data","id","runCrudUsecaseTests","listUserMfas","getUserMfa","createUserMfa","updateUserMfa","deleteUserMfa","it","expect","verifyUserMfa","code","resolves","toBeDefined","enableUserMfa","enabled","disableUserMfa","toEqual"],"sources":["user-mfa.usecase.test.js"],"sourcesContent":["/**\r\n * User MFA Usecase Tests\r\n * File: user-mfa.usecase.test.js\r\n */\r\nimport {\r\n  listUserMfas,\r\n  getUserMfa,\r\n  createUserMfa,\r\n  updateUserMfa,\r\n  deleteUserMfa,\r\n  verifyUserMfa,\r\n  enableUserMfa,\r\n  disableUserMfa,\r\n} from '@features/user-mfa';\r\nimport {\r\n  userMfaApi,\r\n  verifyUserMfaApi,\r\n  enableUserMfaApi,\r\n  disableUserMfaApi,\r\n} from '@features/user-mfa/user-mfa.api';\r\nimport { queueRequestIfOffline } from '@offline/request';\r\nimport { runCrudUsecaseTests } from '../../helpers/crud-usecase-runner';\r\n\r\njest.mock('@features/user-mfa/user-mfa.api', () => ({\r\n  userMfaApi: {\r\n    list: jest.fn(),\r\n    get: jest.fn(),\r\n    create: jest.fn(),\r\n    update: jest.fn(),\r\n    remove: jest.fn(),\r\n  },\r\n  verifyUserMfaApi: jest.fn(),\r\n  enableUserMfaApi: jest.fn(),\r\n  disableUserMfaApi: jest.fn(),\r\n}));\r\n\r\njest.mock('@offline/request', () => ({\r\n  queueRequestIfOffline: jest.fn(),\r\n}));\r\n\r\ndescribe('user-mfa.usecase', () => {\r\n  beforeEach(() => {\r\n    userMfaApi.list.mockResolvedValue({ data: [{ id: '1' }] });\r\n    userMfaApi.get.mockResolvedValue({ data: { id: '1' } });\r\n    userMfaApi.create.mockResolvedValue({ data: { id: '1' } });\r\n    userMfaApi.update.mockResolvedValue({ data: { id: '1' } });\r\n    userMfaApi.remove.mockResolvedValue({ data: { id: '1' } });\r\n    verifyUserMfaApi.mockResolvedValue({ data: { id: '1' } });\r\n    enableUserMfaApi.mockResolvedValue({ data: { id: '1' } });\r\n    disableUserMfaApi.mockResolvedValue({ data: { id: '1' } });\r\n  });\r\n\r\n  runCrudUsecaseTests(\r\n    {\r\n      list: listUserMfas,\r\n      get: getUserMfa,\r\n      create: createUserMfa,\r\n      update: updateUserMfa,\r\n      remove: deleteUserMfa,\r\n    },\r\n    { queueRequestIfOffline }\r\n  );\r\n\r\n  it('runs online verify/enable/disable', async () => {\r\n    queueRequestIfOffline.mockResolvedValue(false);\r\n    await expect(verifyUserMfa('1', { code: '123456' })).resolves.toBeDefined();\r\n    await expect(enableUserMfa('1', { enabled: true })).resolves.toBeDefined();\r\n    await expect(disableUserMfa('1', { enabled: false })).resolves.toBeDefined();\r\n  });\r\n\r\n  it('queues offline verify/enable/disable', async () => {\r\n    queueRequestIfOffline.mockResolvedValue(true);\r\n    await expect(verifyUserMfa('1', { code: '123456' })).resolves.toEqual({\r\n      id: '1',\r\n      code: '123456',\r\n    });\r\n    await expect(enableUserMfa('1', { enabled: true })).resolves.toEqual({\r\n      id: '1',\r\n      enabled: true,\r\n    });\r\n    await expect(disableUserMfa('1', { enabled: false })).resolves.toEqual({\r\n      id: '1',\r\n      enabled: false,\r\n    });\r\n  });\r\n});\r\n"],"mappings":"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","ignoreList":[]}