f4652b59d372d6ee57847d22d6b03183
_getJestObj().mock("../../../features/user-mfa/user-mfa.api", function () {
  return {
    userMfaApi: {
      list: jest.fn(),
      get: jest.fn(),
      create: jest.fn(),
      update: jest.fn(),
      remove: jest.fn()
    },
    verifyUserMfaApi: jest.fn(),
    enableUserMfaApi: jest.fn(),
    disableUserMfaApi: jest.fn()
  };
});
_getJestObj().mock("../../../offline/request", function () {
  return {
    queueRequestIfOffline: jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault").default;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _userMfa = require("../../../features/user-mfa");
var _userMfa2 = require("../../../features/user-mfa/user-mfa.api");
var _request = require("../../../offline/request");
var _crudUsecaseRunner = require("../../helpers/crud-usecase-runner");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('user-mfa.usecase', function () {
  beforeEach(function () {
    _userMfa2.userMfaApi.list.mockResolvedValue({
      data: [{
        id: '1'
      }]
    });
    _userMfa2.userMfaApi.get.mockResolvedValue({
      data: {
        id: '1'
      }
    });
    _userMfa2.userMfaApi.create.mockResolvedValue({
      data: {
        id: '1'
      }
    });
    _userMfa2.userMfaApi.update.mockResolvedValue({
      data: {
        id: '1'
      }
    });
    _userMfa2.userMfaApi.remove.mockResolvedValue({
      data: {
        id: '1'
      }
    });
    _userMfa2.verifyUserMfaApi.mockResolvedValue({
      data: {
        id: '1'
      }
    });
    _userMfa2.enableUserMfaApi.mockResolvedValue({
      data: {
        id: '1'
      }
    });
    _userMfa2.disableUserMfaApi.mockResolvedValue({
      data: {
        id: '1'
      }
    });
  });
  (0, _crudUsecaseRunner.runCrudUsecaseTests)({
    list: _userMfa.listUserMfas,
    get: _userMfa.getUserMfa,
    create: _userMfa.createUserMfa,
    update: _userMfa.updateUserMfa,
    remove: _userMfa.deleteUserMfa
  }, {
    queueRequestIfOffline: _request.queueRequestIfOffline
  });
  it('runs online verify/enable/disable', (0, _asyncToGenerator2.default)(function* () {
    _request.queueRequestIfOffline.mockResolvedValue(false);
    yield expect((0, _userMfa.verifyUserMfa)('1', {
      code: '123456'
    })).resolves.toBeDefined();
    yield expect((0, _userMfa.enableUserMfa)('1', {
      enabled: true
    })).resolves.toBeDefined();
    yield expect((0, _userMfa.disableUserMfa)('1', {
      enabled: false
    })).resolves.toBeDefined();
  }));
  it('queues offline verify/enable/disable', (0, _asyncToGenerator2.default)(function* () {
    _request.queueRequestIfOffline.mockResolvedValue(true);
    yield expect((0, _userMfa.verifyUserMfa)('1', {
      code: '123456'
    })).resolves.toEqual({
      id: '1',
      code: '123456'
    });
    yield expect((0, _userMfa.enableUserMfa)('1', {
      enabled: true
    })).resolves.toEqual({
      id: '1',
      enabled: true
    });
    yield expect((0, _userMfa.disableUserMfa)('1', {
      enabled: false
    })).resolves.toEqual({
      id: '1',
      enabled: false
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJ1c2VyTWZhQXBpIiwibGlzdCIsImplc3QiLCJmbiIsImdldCIsImNyZWF0ZSIsInVwZGF0ZSIsInJlbW92ZSIsInZlcmlmeVVzZXJNZmFBcGkiLCJlbmFibGVVc2VyTWZhQXBpIiwiZGlzYWJsZVVzZXJNZmFBcGkiLCJxdWV1ZVJlcXVlc3RJZk9mZmxpbmUiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsImRlZmF1bHQiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfdXNlck1mYSIsIl91c2VyTWZhMiIsIl9yZXF1ZXN0IiwiX2NydWRVc2VjYXNlUnVubmVyIiwiX3JlcXVpcmUiLCJkZXNjcmliZSIsImJlZm9yZUVhY2giLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImRhdGEiLCJpZCIsInJ1bkNydWRVc2VjYXNlVGVzdHMiLCJsaXN0VXNlck1mYXMiLCJnZXRVc2VyTWZhIiwiY3JlYXRlVXNlck1mYSIsInVwZGF0ZVVzZXJNZmEiLCJkZWxldGVVc2VyTWZhIiwiaXQiLCJleHBlY3QiLCJ2ZXJpZnlVc2VyTWZhIiwiY29kZSIsInJlc29sdmVzIiwidG9CZURlZmluZWQiLCJlbmFibGVVc2VyTWZhIiwiZW5hYmxlZCIsImRpc2FibGVVc2VyTWZhIiwidG9FcXVhbCJdLCJzb3VyY2VzIjpbInVzZXItbWZhLnVzZWNhc2UudGVzdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogVXNlciBNRkEgVXNlY2FzZSBUZXN0c1xyXG4gKiBGaWxlOiB1c2VyLW1mYS51c2VjYXNlLnRlc3QuanNcclxuICovXHJcbmltcG9ydCB7XHJcbiAgbGlzdFVzZXJNZmFzLFxyXG4gIGdldFVzZXJNZmEsXHJcbiAgY3JlYXRlVXNlck1mYSxcclxuICB1cGRhdGVVc2VyTWZhLFxyXG4gIGRlbGV0ZVVzZXJNZmEsXHJcbiAgdmVyaWZ5VXNlck1mYSxcclxuICBlbmFibGVVc2VyTWZhLFxyXG4gIGRpc2FibGVVc2VyTWZhLFxyXG59IGZyb20gJ0BmZWF0dXJlcy91c2VyLW1mYSc7XHJcbmltcG9ydCB7XHJcbiAgdXNlck1mYUFwaSxcclxuICB2ZXJpZnlVc2VyTWZhQXBpLFxyXG4gIGVuYWJsZVVzZXJNZmFBcGksXHJcbiAgZGlzYWJsZVVzZXJNZmFBcGksXHJcbn0gZnJvbSAnQGZlYXR1cmVzL3VzZXItbWZhL3VzZXItbWZhLmFwaSc7XHJcbmltcG9ydCB7IHF1ZXVlUmVxdWVzdElmT2ZmbGluZSB9IGZyb20gJ0BvZmZsaW5lL3JlcXVlc3QnO1xyXG5pbXBvcnQgeyBydW5DcnVkVXNlY2FzZVRlc3RzIH0gZnJvbSAnLi4vLi4vaGVscGVycy9jcnVkLXVzZWNhc2UtcnVubmVyJztcclxuXHJcbmplc3QubW9jaygnQGZlYXR1cmVzL3VzZXItbWZhL3VzZXItbWZhLmFwaScsICgpID0+ICh7XHJcbiAgdXNlck1mYUFwaToge1xyXG4gICAgbGlzdDogamVzdC5mbigpLFxyXG4gICAgZ2V0OiBqZXN0LmZuKCksXHJcbiAgICBjcmVhdGU6IGplc3QuZm4oKSxcclxuICAgIHVwZGF0ZTogamVzdC5mbigpLFxyXG4gICAgcmVtb3ZlOiBqZXN0LmZuKCksXHJcbiAgfSxcclxuICB2ZXJpZnlVc2VyTWZhQXBpOiBqZXN0LmZuKCksXHJcbiAgZW5hYmxlVXNlck1mYUFwaTogamVzdC5mbigpLFxyXG4gIGRpc2FibGVVc2VyTWZhQXBpOiBqZXN0LmZuKCksXHJcbn0pKTtcclxuXHJcbmplc3QubW9jaygnQG9mZmxpbmUvcmVxdWVzdCcsICgpID0+ICh7XHJcbiAgcXVldWVSZXF1ZXN0SWZPZmZsaW5lOiBqZXN0LmZuKCksXHJcbn0pKTtcclxuXHJcbmRlc2NyaWJlKCd1c2VyLW1mYS51c2VjYXNlJywgKCkgPT4ge1xyXG4gIGJlZm9yZUVhY2goKCkgPT4ge1xyXG4gICAgdXNlck1mYUFwaS5saXN0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogW3sgaWQ6ICcxJyB9XSB9KTtcclxuICAgIHVzZXJNZmFBcGkuZ2V0Lm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogeyBpZDogJzEnIH0gfSk7XHJcbiAgICB1c2VyTWZhQXBpLmNyZWF0ZS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHsgaWQ6ICcxJyB9IH0pO1xyXG4gICAgdXNlck1mYUFwaS51cGRhdGUubW9ja1Jlc29sdmVkVmFsdWUoeyBkYXRhOiB7IGlkOiAnMScgfSB9KTtcclxuICAgIHVzZXJNZmFBcGkucmVtb3ZlLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogeyBpZDogJzEnIH0gfSk7XHJcbiAgICB2ZXJpZnlVc2VyTWZhQXBpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogeyBpZDogJzEnIH0gfSk7XHJcbiAgICBlbmFibGVVc2VyTWZhQXBpLm1vY2tSZXNvbHZlZFZhbHVlKHsgZGF0YTogeyBpZDogJzEnIH0gfSk7XHJcbiAgICBkaXNhYmxlVXNlck1mYUFwaS5tb2NrUmVzb2x2ZWRWYWx1ZSh7IGRhdGE6IHsgaWQ6ICcxJyB9IH0pO1xyXG4gIH0pO1xyXG5cclxuICBydW5DcnVkVXNlY2FzZVRlc3RzKFxyXG4gICAge1xyXG4gICAgICBsaXN0OiBsaXN0VXNlck1mYXMsXHJcbiAgICAgIGdldDogZ2V0VXNlck1mYSxcclxuICAgICAgY3JlYXRlOiBjcmVhdGVVc2VyTWZhLFxyXG4gICAgICB1cGRhdGU6IHVwZGF0ZVVzZXJNZmEsXHJcbiAgICAgIHJlbW92ZTogZGVsZXRlVXNlck1mYSxcclxuICAgIH0sXHJcbiAgICB7IHF1ZXVlUmVxdWVzdElmT2ZmbGluZSB9XHJcbiAgKTtcclxuXHJcbiAgaXQoJ3J1bnMgb25saW5lIHZlcmlmeS9lbmFibGUvZGlzYWJsZScsIGFzeW5jICgpID0+IHtcclxuICAgIHF1ZXVlUmVxdWVzdElmT2ZmbGluZS5tb2NrUmVzb2x2ZWRWYWx1ZShmYWxzZSk7XHJcbiAgICBhd2FpdCBleHBlY3QodmVyaWZ5VXNlck1mYSgnMScsIHsgY29kZTogJzEyMzQ1NicgfSkpLnJlc29sdmVzLnRvQmVEZWZpbmVkKCk7XHJcbiAgICBhd2FpdCBleHBlY3QoZW5hYmxlVXNlck1mYSgnMScsIHsgZW5hYmxlZDogdHJ1ZSB9KSkucmVzb2x2ZXMudG9CZURlZmluZWQoKTtcclxuICAgIGF3YWl0IGV4cGVjdChkaXNhYmxlVXNlck1mYSgnMScsIHsgZW5hYmxlZDogZmFsc2UgfSkpLnJlc29sdmVzLnRvQmVEZWZpbmVkKCk7XHJcbiAgfSk7XHJcblxyXG4gIGl0KCdxdWV1ZXMgb2ZmbGluZSB2ZXJpZnkvZW5hYmxlL2Rpc2FibGUnLCBhc3luYyAoKSA9PiB7XHJcbiAgICBxdWV1ZVJlcXVlc3RJZk9mZmxpbmUubW9ja1Jlc29sdmVkVmFsdWUodHJ1ZSk7XHJcbiAgICBhd2FpdCBleHBlY3QodmVyaWZ5VXNlck1mYSgnMScsIHsgY29kZTogJzEyMzQ1NicgfSkpLnJlc29sdmVzLnRvRXF1YWwoe1xyXG4gICAgICBpZDogJzEnLFxyXG4gICAgICBjb2RlOiAnMTIzNDU2JyxcclxuICAgIH0pO1xyXG4gICAgYXdhaXQgZXhwZWN0KGVuYWJsZVVzZXJNZmEoJzEnLCB7IGVuYWJsZWQ6IHRydWUgfSkpLnJlc29sdmVzLnRvRXF1YWwoe1xyXG4gICAgICBpZDogJzEnLFxyXG4gICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgfSk7XHJcbiAgICBhd2FpdCBleHBlY3QoZGlzYWJsZVVzZXJNZmEoJzEnLCB7IGVuYWJsZWQ6IGZhbHNlIH0pKS5yZXNvbHZlcy50b0VxdWFsKHtcclxuICAgICAgaWQ6ICcxJyxcclxuICAgICAgZW5hYmxlZDogZmFsc2UsXHJcbiAgICB9KTtcclxuICB9KTtcclxufSk7XHJcbiJdLCJtYXBwaW5ncyI6IkFBdUJBQSxXQUFBLEdBQUtDLElBQUksNENBQW9DO0VBQUEsT0FBTztJQUNsREMsVUFBVSxFQUFFO01BQ1ZDLElBQUksRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQztNQUNmQyxHQUFHLEVBQUVGLElBQUksQ0FBQ0MsRUFBRSxDQUFDLENBQUM7TUFDZEUsTUFBTSxFQUFFSCxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDO01BQ2pCRyxN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